{"version":3,"file":"main.js","sources":["../../../packages/plugin-topology-diagram/src/utils.ts","../../../packages/plugin-topology-diagram/src/topic-block-topology.tsx","../../../packages/plugin-topology-diagram/src/tools-config.ts","../../../packages/plugin-topology-diagram/src/topology-diagram.tsx","../../../packages/plugin-topology-diagram/src/topology-diagram-utils.tsx","../../../packages/plugin-topology-diagram/src/topology-drawer.tsx","../../../packages/plugin-topology-diagram/src/plugin.tsx"],"sourcesContent":["export const FOCUS_MODE_EDITING_TOPOLOGY = 'FOCUS_MODE_EDITING_TOPOLOGY';\nexport const OP_TYPE_START_EDITING_TOPOLOGY = 'OP_TYPE_START_EDITING_TOPOLOGY';\nexport const BLOCK_TYPE_TOPOLOGY = 'TOPOLOGY';\nexport const REF_KEY_TOPOLOGY_DIAGRAM = 'TOPOLOGY_DIAGRAM';\nexport const REF_KEY_TOPOLOGY_DIAGRAM_UTIL = 'TOPOLOGY_DIAGRAM_UTIL';\n","import { iconClassName, TopicBlockIcon } from '@blink-mind/renderer-react';\nimport * as React from 'react';\n\nimport {\n  BLOCK_TYPE_TOPOLOGY,\n  FOCUS_MODE_EDITING_TOPOLOGY,\n  OP_TYPE_START_EDITING_TOPOLOGY\n} from './utils';\n\nexport function TopicBlockTopology(props) {\n  const { controller, model, topicKey } = props;\n  const onClick = e => {\n    e.stopPropagation();\n    controller.run('operation', {\n      ...props,\n      opType: OP_TYPE_START_EDITING_TOPOLOGY\n    });\n  };\n  const isEditing =\n    model.focusKey === topicKey &&\n    model.focusMode === FOCUS_MODE_EDITING_TOPOLOGY;\n\n  const { block } = model.getTopic(topicKey).getBlock(BLOCK_TYPE_TOPOLOGY);\n\n  if (!isEditing && !block) return null;\n  const iconProps = {\n    className: iconClassName('topology'),\n    onClick,\n    tabIndex: -1\n  };\n\n  return <TopicBlockIcon {...iconProps} />;\n}\n","export const ToolsConfig = [\n  {\n    group: 'Basic',\n    children: [\n      {\n        name: 'rectangle',\n        icon: 'icon-rect',\n        data: {\n          text: 'Topology',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          paddingLeft: 10,\n          paddingRight: 10,\n          paddingTop: 10,\n          paddingBottom: 10,\n          name: 'rectangle',\n          icon: '\\ue64d',\n          iconFamily: 'topology',\n          iconColor: '#2f54eb'\n        }\n      },\n      {\n        name: 'rectangle',\n        icon: 'icon-rectangle',\n        data: {\n          text: 'rectangle',\n          rect: {\n            width: 200,\n            height: 50\n          },\n          paddingLeft: 10,\n          paddingRight: 10,\n          paddingTop: 10,\n          paddingBottom: 10,\n          borderRadius: 0.1,\n          name: 'rectangle'\n        }\n      },\n      {\n        name: 'circle',\n        icon: 'icon-circle',\n        data: {\n          text: 'circle',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'circle',\n          textMaxLine: 1\n        }\n      },\n      {\n        name: 'triangle',\n        icon: 'icon-triangle',\n        data: {\n          text: 'triangle',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'triangle'\n        }\n      },\n      {\n        name: 'diamond',\n        icon: 'icon-diamond',\n        data: {\n          text: 'diamond',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'diamond'\n        }\n      },\n      {\n        name: 'pentagon',\n        icon: 'icon-pentagon',\n        data: {\n          text: 'pentagon',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'pentagon'\n        }\n      },\n      {\n        name: 'hexagon',\n        icon: 'icon-hexagon',\n        data: {\n          text: 'hexagon',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          paddingTop: 10,\n          paddingBottom: 10,\n          name: 'hexagon'\n        }\n      },\n      {\n        name: 'pentagram',\n        icon: 'icon-pentagram',\n        data: {\n          text: 'pentagram',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'pentagram'\n        }\n      },\n      {\n        name: 'left arrow',\n        icon: 'icon-arrow-left',\n        data: {\n          text: '',\n          rect: {\n            width: 200,\n            height: 100\n          },\n          name: 'leftArrow'\n        }\n      },\n      {\n        name: 'right arrow',\n        icon: 'icon-arrow-right',\n        data: {\n          text: '',\n          rect: {\n            width: 200,\n            height: 100\n          },\n          name: 'rightArrow'\n        }\n      },\n      {\n        name: 'bidirectional arrow',\n        icon: 'icon-twoway-arrow',\n        data: {\n          text: '',\n          rect: {\n            width: 200,\n            height: 100\n          },\n          name: 'twowayArrow'\n        }\n      },\n      {\n        name: 'line',\n        icon: 'icon-line',\n        data: {\n          text: 'line',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'line'\n        }\n      },\n      {\n        name: 'cloud',\n        icon: 'icon-cloud',\n        data: {\n          text: 'cloud',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'cloud'\n        }\n      },\n      {\n        name: 'message',\n        icon: 'icon-msg',\n        data: {\n          text: 'message',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          paddingLeft: 10,\n          paddingRight: 10,\n          paddingTop: 10,\n          paddingBottom: 10,\n          name: 'message'\n        }\n      },\n      {\n        name: 'file',\n        icon: 'icon-file',\n        data: {\n          text: 'file',\n          rect: {\n            width: 80,\n            height: 100\n          },\n          paddingLeft: 10,\n          paddingRight: 10,\n          paddingTop: 10,\n          paddingBottom: 10,\n          name: 'file'\n        }\n      },\n      {\n        name: 'text',\n        icon: 'icon-text',\n        data: {\n          text: 'text',\n          rect: {\n            width: 160,\n            height: 30\n          },\n          name: 'text'\n        }\n      },\n      {\n        name: 'image',\n        icon: 'icon-image',\n        data: {\n          text: '',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'image',\n          image: '/assets/img/logo.png'\n        }\n      },\n      {\n        name: 'cube',\n        icon: 'icon-cube',\n        data: {\n          rect: {\n            width: 50,\n            height: 70\n          },\n          is3D: true,\n          z: 10,\n          zRotate: 15,\n          fillStyle: '#ddd',\n          name: 'cube',\n          icon: '\\ue63c',\n          iconFamily: 'topology',\n          iconColor: '#777',\n          iconSize: 30\n        }\n      },\n      {\n        name: 'people',\n        icon: 'icon-people',\n        data: {\n          rect: {\n            width: 70,\n            height: 100\n          },\n          name: 'people'\n        }\n      },\n      {\n        name: 'multi media',\n        icon: 'icon-pc',\n        data: {\n          text: 'multi media',\n          rect: {\n            width: 200,\n            height: 200\n          },\n          paddingLeft: 10,\n          paddingRight: 10,\n          paddingTop: 10,\n          paddingBottom: 10,\n          // strokeStyle: 'transparent',\n          name: 'div'\n        }\n      }\n    ]\n  },\n  {\n    group: 'Flow Graph',\n    children: [\n      {\n        name: 'start/end',\n        icon: 'icon-flow-start',\n        data: {\n          text: 'start',\n          rect: {\n            width: 120,\n            height: 40\n          },\n          borderRadius: 0.5,\n          name: 'rectangle'\n        }\n      },\n      {\n        name: 'flow',\n        icon: 'icon-rectangle',\n        data: {\n          text: 'flow',\n          rect: {\n            width: 120,\n            height: 40\n          },\n          name: 'rectangle'\n        }\n      },\n      {\n        name: 'judgement',\n        icon: 'icon-diamond',\n        data: {\n          text: 'judgement',\n          rect: {\n            width: 120,\n            height: 60\n          },\n          name: 'diamond'\n        }\n      },\n      {\n        name: 'data',\n        icon: 'icon-flow-data',\n        data: {\n          text: 'data',\n          rect: {\n            width: 120,\n            height: 50\n          },\n          name: 'flowData'\n        }\n      },\n      {\n        name: 'prepare',\n        icon: 'icon-flow-ready',\n        data: {\n          text: 'prepare',\n          rect: {\n            width: 120,\n            height: 50\n          },\n          name: 'hexagon'\n        }\n      },\n      {\n        name: 'sub flow',\n        icon: 'icon-flow-subprocess',\n        data: {\n          text: 'sub flow',\n          rect: {\n            width: 120,\n            height: 50\n          },\n          name: 'flowSubprocess'\n        }\n      },\n      {\n        name: 'database',\n        icon: 'icon-db',\n        data: {\n          text: 'database',\n          rect: {\n            width: 80,\n            height: 120\n          },\n          name: 'flowDb'\n        }\n      },\n      {\n        name: 'document',\n        icon: 'icon-flow-document',\n        data: {\n          text: 'document',\n          rect: {\n            width: 120,\n            height: 100\n          },\n          name: 'flowDocument'\n        }\n      },\n      {\n        name: 'internal storage',\n        icon: 'icon-internal-storage',\n        data: {\n          text: 'internal storage',\n          rect: {\n            width: 120,\n            height: 80\n          },\n          name: 'flowInternalStorage'\n        }\n      },\n      {\n        name: 'external storage',\n        icon: 'icon-extern-storage',\n        data: {\n          text: 'external storage',\n          rect: {\n            width: 120,\n            height: 80\n          },\n          name: 'flowExternStorage'\n        }\n      },\n      {\n        name: 'queue',\n        icon: 'icon-flow-queue',\n        data: {\n          text: 'queue',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'flowQueue'\n        }\n      },\n      {\n        name: 'input manually',\n        icon: 'icon-flow-manually',\n        data: {\n          text: 'input manually',\n          rect: {\n            width: 120,\n            height: 80\n          },\n          name: 'flowManually'\n        }\n      },\n      {\n        name: 'display',\n        icon: 'icon-flow-display',\n        data: {\n          text: 'display',\n          rect: {\n            width: 120,\n            height: 80\n          },\n          name: 'flowDisplay'\n        }\n      },\n      {\n        name: 'parallel',\n        icon: 'icon-flow-parallel',\n        data: {\n          text: 'parallel',\n          rect: {\n            width: 120,\n            height: 50\n          },\n          name: 'flowParallel'\n        }\n      },\n      {\n        name: 'comment',\n        icon: 'icon-flow-comment',\n        data: {\n          text: 'comment',\n          rect: {\n            width: 100,\n            height: 100\n          },\n          name: 'flowComment'\n        }\n      }\n    ]\n  },\n  {\n    group: 'Activity Diagram',\n    children: [\n      {\n        name: 'start',\n        icon: 'icon-inital',\n        data: {\n          text: '',\n          rect: {\n            width: 30,\n            height: 30\n          },\n          name: 'circle',\n          fillStyle: '#555',\n          strokeStyle: 'transparent'\n        }\n      },\n      {\n        name: 'end',\n        icon: 'icon-final',\n        data: {\n          text: '',\n          rect: {\n            width: 30,\n            height: 30\n          },\n          name: 'activityFinal'\n        }\n      },\n      {\n        name: 'action',\n        icon: 'icon-action',\n        data: {\n          text: 'action',\n          rect: {\n            width: 120,\n            height: 50\n          },\n          borderRadius: 0.25,\n          name: 'rectangle'\n        }\n      },\n      {\n        name: 'decision/merge',\n        icon: 'icon-diamond',\n        data: {\n          text: '决策',\n          rect: {\n            width: 120,\n            height: 50\n          },\n          name: 'diamond'\n        }\n      },\n      {\n        name: 'vertical swimming lane',\n        icon: 'icon-swimlane-v',\n        data: {\n          text: 'vertical swimming lane',\n          rect: {\n            width: 200,\n            height: 500\n          },\n          name: 'swimlaneV'\n        }\n      },\n      {\n        name: 'horizontal swimming lane',\n        icon: 'icon-swimlane-h',\n        data: {\n          text: 'horizontal swimming lane',\n          rect: {\n            width: 500,\n            height: 200\n          },\n          name: 'swimlaneH'\n        }\n      },\n      {\n        name: 'vertical fork/merge',\n        icon: 'icon-fork-v',\n        data: {\n          text: '',\n          rect: {\n            width: 10,\n            height: 150\n          },\n          name: 'forkV',\n          fillStyle: '#555',\n          strokeStyle: 'transparent'\n        }\n      },\n      {\n        name: 'horizontal fork/merge',\n        icon: 'icon-fork',\n        data: {\n          text: '',\n          rect: {\n            width: 150,\n            height: 10\n          },\n          name: 'forkH',\n          fillStyle: '#555',\n          strokeStyle: 'transparent'\n        }\n      }\n    ]\n  },\n  {\n    group: 'Sequence Diagram && Class Diagram',\n    children: [\n      {\n        name: 'lifeline',\n        icon: 'icon-lifeline',\n        data: {\n          text: 'lifeline',\n          rect: {\n            width: 150,\n            height: 400\n          },\n          name: 'lifeline'\n        }\n      },\n      {\n        name: 'activation',\n        icon: 'icon-focus',\n        data: {\n          text: '',\n          rect: {\n            width: 12,\n            height: 200\n          },\n          name: 'sequenceFocus'\n        }\n      },\n      {\n        name: 'simple class',\n        icon: 'icon-simple-class',\n        data: {\n          text: 'Topolgoy',\n          rect: {\n            width: 270,\n            height: 200\n          },\n          paddingTop: 40,\n          font: {\n            fontFamily: 'Arial',\n            color: '#222',\n            fontWeight: 'bold'\n          },\n          fillStyle: '#ffffba',\n          strokeStyle: '#7e1212',\n          name: 'simpleClass',\n          children: [\n            {\n              text: '- name: string\\n+ setName(name: string): void',\n              name: 'text',\n              paddingLeft: 10,\n              paddingRight: 10,\n              paddingTop: 10,\n              paddingBottom: 10,\n              rectInParent: {\n                x: 0,\n                y: 0,\n                width: '100%',\n                height: '100%',\n                rotate: 0\n              },\n              font: {\n                fontFamily: 'Arial',\n                color: '#222',\n                textAlign: 'left',\n                textBaseline: 'top'\n              }\n            }\n          ]\n        }\n      },\n      {\n        name: 'class',\n        icon: 'icon-class',\n        data: {\n          text: 'Topolgoy',\n          rect: {\n            width: 270,\n            height: 200\n          },\n          paddingTop: 40,\n          font: {\n            fontFamily: 'Arial',\n            color: '#222',\n            fontWeight: 'bold'\n          },\n          fillStyle: '#ffffba',\n          strokeStyle: '#7e1212',\n          name: 'interfaceClass',\n          children: [\n            {\n              text: '- name: string',\n              name: 'text',\n              paddingLeft: 10,\n              paddingRight: 10,\n              paddingTop: 10,\n              paddingBottom: 10,\n              rectInParent: {\n                x: 0,\n                y: 0,\n                width: '100%',\n                height: '50%',\n                rotate: 0\n              },\n              font: {\n                fontFamily: 'Arial',\n                color: '#222',\n                textAlign: 'left',\n                textBaseline: 'top'\n              }\n            },\n            {\n              text: '+ setName(name: string): void',\n              name: 'text',\n              paddingLeft: 10,\n              paddingRight: 10,\n              paddingTop: 10,\n              paddingBottom: 10,\n              rectInParent: {\n                x: 0,\n                y: '50%',\n                width: '100%',\n                height: '50%',\n                rotate: 0\n              },\n              font: {\n                fontFamily: 'Arial',\n                color: '#222',\n                textAlign: 'left',\n                textBaseline: 'top'\n              }\n            }\n          ]\n        }\n      }\n    ]\n  }\n];\n","import { BaseProps, BaseWidget } from '@blink-mind/renderer-react';\nimport * as React from 'react';\nimport { Topology } from 'topology-core';\nimport { registerNode } from 'topology-core/middles';\nimport { Options } from 'topology-core/options';\n\nimport {\n  flowComment,\n  flowCommentAnchors,\n  flowData,\n  flowDataAnchors,\n  flowDataIconRect,\n  flowDataTextRect,\n  flowDb,\n  flowDbIconRect,\n  flowDbTextRect,\n  flowDisplay,\n  flowDisplayAnchors,\n  flowDisplayIconRect,\n  flowDisplayTextRect,\n  flowDocument,\n  flowDocumentAnchors,\n  flowDocumentIconRect,\n  flowDocumentTextRect,\n  flowExternStorage,\n  flowExternStorageAnchors,\n  flowExternStorageIconRect,\n  flowExternStorageTextRect,\n  flowInternalStorage,\n  flowInternalStorageIconRect,\n  flowInternalStorageTextRect,\n  flowManually,\n  flowManuallyAnchors,\n  flowManuallyIconRect,\n  flowManuallyTextRect,\n  flowParallel,\n  flowParallelAnchors,\n  flowQueue,\n  flowQueueIconRect,\n  flowQueueTextRect,\n  flowSubprocess,\n  flowSubprocessIconRect,\n  flowSubprocessTextRect\n} from 'topology-flow-diagram';\nimport { ToolsConfig } from './tools-config';\n\nimport '@blink-mind/icons/iconfont/topology';\nimport styled from 'styled-components';\nimport {\n  activityFinal,\n  activityFinalIconRect,\n  activityFinalTextRect,\n  fork,\n  forkHAnchors,\n  forkIconRect,\n  forkTextRect,\n  forkVAnchors,\n  swimlaneH,\n  swimlaneHIconRect,\n  swimlaneHTextRect,\n  swimlaneV,\n  swimlaneVIconRect,\n  swimlaneVTextRect\n} from 'topology-activity-diagram';\nimport {\n  interfaceClass,\n  interfaceClassIconRect,\n  interfaceClassTextRect,\n  simpleClass,\n  simpleClassIconRect,\n  simpleClassTextRect\n} from 'topology-class-diagram';\nimport {\n  lifeline,\n  lifelineAnchors,\n  lifelineIconRect,\n  lifelineTextRect,\n  sequenceFocus,\n  sequenceFocusAnchors,\n  sequenceFocusIconRect,\n  sequenceFocusTextRect\n} from 'topology-sequence-diagram';\nimport { TopologyDiagramUtils } from './topology-diagram-utils';\nimport { BLOCK_TYPE_TOPOLOGY, REF_KEY_TOPOLOGY_DIAGRAM_UTIL } from './utils';\n\nconst Root = styled.div`\n  position: relative;\n  display: flex;\n  width: 100%;\n  height: 100%;\n`;\n\nconst Canvas = styled.div`\n  flex: 1;\n  width: initial;\n  position: relative;\n  overflow: auto;\n  background: #fff;\n`;\n\nconst Tools = styled.div`\n  flex-shrink: 0;\n  width: 1.75rem;\n  background-color: #f8f8f8;\n  border-right: 1px solid #d9d9d9;\n  overflow-y: auto;\n`;\n\nconst ToolTitle = styled.div`\n  color: #0d1a26;\n  font-weight: 600;\n  font-size: 0.12rem;\n  padding: 0.05rem 0.1rem;\n  margin-top: 0.08rem;\n  border-bottom: 1px solid #ddd;\n\n  &:first-child {\n    border-top: none;\n  }\n`;\n\nconst ToolbarButtons = styled.div`\n  padding: 0.1rem 0;\n  a {\n    display: inline-block;\n    color: @text-color;\n    line-height: 1;\n    width: 0.4rem;\n    height: 0.4rem;\n    text-align: center;\n    text-decoration: none !important;\n\n    .iconfont {\n      font-size: 0.24rem;\n    }\n  }\n`;\n\ninterface IState {\n  id: string;\n  data: any;\n  toolsConfig: any[];\n}\n\nexport class TopologyDiagram extends BaseWidget<BaseProps, IState> {\n  state: IState = {\n    id: '',\n    data: null,\n    toolsConfig: ToolsConfig\n  };\n  iconfont: { fontSize: '0.24rem' };\n  topology: Topology;\n\n  canvasOptions: Options = {};\n\n  canvasRegister() {\n    registerNode(\n      'flowData',\n      flowData,\n      flowDataAnchors,\n      flowDataIconRect,\n      flowDataTextRect\n    );\n    registerNode(\n      'flowSubprocess',\n      flowSubprocess,\n      null,\n      flowSubprocessIconRect,\n      flowSubprocessTextRect\n    );\n    registerNode('flowDb', flowDb, null, flowDbIconRect, flowDbTextRect);\n    registerNode(\n      'flowDocument',\n      flowDocument,\n      flowDocumentAnchors,\n      flowDocumentIconRect,\n      flowDocumentTextRect\n    );\n    registerNode(\n      'flowInternalStorage',\n      flowInternalStorage,\n      null,\n      flowInternalStorageIconRect,\n      flowInternalStorageTextRect\n    );\n    registerNode(\n      'flowExternStorage',\n      flowExternStorage,\n      flowExternStorageAnchors,\n      flowExternStorageIconRect,\n      flowExternStorageTextRect\n    );\n    registerNode(\n      'flowQueue',\n      flowQueue,\n      null,\n      flowQueueIconRect,\n      flowQueueTextRect\n    );\n    registerNode(\n      'flowManually',\n      flowManually,\n      flowManuallyAnchors,\n      flowManuallyIconRect,\n      flowManuallyTextRect\n    );\n    registerNode(\n      'flowDisplay',\n      flowDisplay,\n      flowDisplayAnchors,\n      flowDisplayIconRect,\n      flowDisplayTextRect\n    );\n    registerNode('flowParallel', flowParallel, flowParallelAnchors, null, null);\n    registerNode('flowComment', flowComment, flowCommentAnchors, null, null);\n\n    // activity\n    registerNode(\n      'activityFinal',\n      activityFinal,\n      null,\n      activityFinalIconRect,\n      activityFinalTextRect\n    );\n    registerNode(\n      'swimlaneV',\n      swimlaneV,\n      null,\n      swimlaneVIconRect,\n      swimlaneVTextRect\n    );\n    registerNode(\n      'swimlaneH',\n      swimlaneH,\n      null,\n      swimlaneHIconRect,\n      swimlaneHTextRect\n    );\n    registerNode('forkH', fork, forkHAnchors, forkIconRect, forkTextRect);\n    registerNode('forkV', fork, forkVAnchors, forkIconRect, forkTextRect);\n\n    // class\n    registerNode(\n      'simpleClass',\n      simpleClass,\n      null,\n      simpleClassIconRect,\n      simpleClassTextRect\n    );\n    registerNode(\n      'interfaceClass',\n      interfaceClass,\n      null,\n      interfaceClassIconRect,\n      interfaceClassTextRect\n    );\n\n    // sequence\n    registerNode(\n      'lifeline',\n      lifeline,\n      lifelineAnchors,\n      lifelineIconRect,\n      lifelineTextRect\n    );\n    registerNode(\n      'sequenceFocus',\n      sequenceFocus,\n      sequenceFocusAnchors,\n      sequenceFocusIconRect,\n      sequenceFocusTextRect\n    );\n  }\n\n  handleContextMenu = e => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  onMessage = (event, data) => {\n    const { getRef } = this.props;\n    const diagramUtil: TopologyDiagramUtils = getRef(\n      REF_KEY_TOPOLOGY_DIAGRAM_UTIL\n    );\n    switch (event) {\n      case 'resize':\n      case 'scale':\n      case 'locked':\n        if (this.topology && diagramUtil) {\n          diagramUtil.setCanvasData(this.topology.data);\n        }\n        break;\n    }\n  };\n\n  componentDidMount(): void {\n    this.canvasRegister();\n    this.canvasOptions.on = this.onMessage;\n    this.topology = new Topology('topology-canvas', this.canvasOptions);\n    this.openData();\n  }\n\n  componentDidUpdate(): void {\n    // this.openData();\n  }\n\n  openData() {\n    const { topic } = this.props;\n    const { block } = topic.getBlock(BLOCK_TYPE_TOPOLOGY);\n    if (block && block.data && block.data !== '') {\n      this.setState({\n        data: block.data\n      });\n      this.topology.open(block.data);\n    }\n  }\n\n  onDrag(event: React.DragEvent<HTMLAnchorElement>, node: any) {\n    event.dataTransfer.setData('Text', JSON.stringify(node.data));\n  }\n\n  renderTools() {\n    return (\n      <Tools>\n        {this.state.toolsConfig.map((item, index) => {\n          return (\n            <div key={index}>\n              <ToolTitle>{item.group}</ToolTitle>\n              <ToolbarButtons>\n                {//TODO\n                //@ts-ignore\n                item.children.map((btn, i) => {\n                  return (\n                    <a\n                      key={i}\n                      title={btn.name}\n                      draggable={true}\n                      onDragStart={ev => {\n                        this.onDrag(ev, btn);\n                      }}\n                    >\n                      <i\n                        className={'iconfont ' + btn.icon}\n                        style={this.iconfont}\n                      />\n                    </a>\n                  );\n                })}\n              </ToolbarButtons>\n            </div>\n          );\n        })}\n      </Tools>\n    );\n  }\n\n  render() {\n    return (\n      <Root>\n        {this.renderTools()}\n        <Canvas id=\"topology-canvas\" onContextMenu={this.handleContextMenu} />\n      </Root>\n    );\n  }\n}\n","import { OpType } from '@blink-mind/core';\nimport {\n  BaseProps,\n  Btn,\n  getI18nText,\n  I18nKey,\n  Icon,\n  IconName,\n  ZIndex\n} from '@blink-mind/renderer-react';\nimport { Alert, Classes, Position, Tooltip } from '@blueprintjs/core';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { Topology } from 'topology-core';\nimport { BLOCK_TYPE_TOPOLOGY, REF_KEY_TOPOLOGY_DIAGRAM } from './utils';\n\nconst Root = styled(ZIndex)`\n  position: absolute;\n  //background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  z-index: 3;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n`;\n\nconst Item_ = styled(Btn)`\n  margin: 10px;\n`;\n\nconst Item = props => {\n  return (\n    <Tooltip\n      content={props.tooltip}\n      position={Position.TOP}\n      className={Classes.ICON}\n    >\n      <Item_ onClick={props.onClick}>{props.children}</Item_>\n    </Tooltip>\n  );\n};\n\nconst ZoomFactorSpan = styled.span`\n  display: inline-block;\n  width: 80px;\n  height: 18px;\n`;\ninterface State {\n  deleteConfirm: boolean;\n  canvasData: any;\n}\n\nexport class TopologyDiagramUtils extends React.Component<BaseProps, State> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      deleteConfirm: false,\n      canvasData: null\n    };\n  }\n\n  setCanvasData = canvasData => {\n    this.setState({ canvasData });\n  };\n\n  getTopology(): Topology {\n    const { getRef } = this.props;\n    return getRef(REF_KEY_TOPOLOGY_DIAGRAM).topology;\n  }\n\n  onClickResetZoom = e => {\n    const topology = this.getTopology();\n    topology.scaleTo(1);\n  };\n\n  render() {\n    const props = this.props;\n    const { controller } = props;\n\n    const onClickDelete = e => {\n      this.setState({ deleteConfirm: true });\n    };\n    const deleteAlertProps = {\n      ...props,\n      isOpen: this.state.deleteConfirm,\n      content: getI18nText(props, I18nKey.DELETE_TOPOLOGY_TIP),\n      onConfirm: e => {\n        controller.run('operation', {\n          ...props,\n          opType: OpType.DELETE_TOPIC_BLOCK,\n          blockType: BLOCK_TYPE_TOPOLOGY\n        });\n      },\n      onCancel: e => {\n        this.setState({ deleteConfirm: false });\n      }\n    };\n    const { canvasData } = this.state;\n    const scale = canvasData ? canvasData.scale : 1;\n    return (\n      <Root>\n        <Item\n          onClick={this.onClickResetZoom}\n          tooltip={getI18nText(props, I18nKey.RESET_ZOOM)}\n        >\n          <ZoomFactorSpan>{`${getI18nText(props, I18nKey.ZOOM)}:${Math.floor(\n            scale * 100\n          )}%`}</ZoomFactorSpan>\n        </Item>\n        <Item\n          onClick={onClickDelete}\n          tooltip={getI18nText(props, I18nKey.DELETE)}\n        >\n          {Icon(IconName.TRASH)}\n        </Item>\n        <Alert {...deleteAlertProps} />\n      </Root>\n    );\n  }\n}\n","import {\n  getI18nText,\n  I18nKey,\n  Icon,\n  stopPropagation\n} from '@blink-mind/renderer-react';\nimport { Drawer } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { TopologyDiagram } from './topology-diagram';\n\nimport { FocusMode, OpType } from '@blink-mind/core';\nimport styled from 'styled-components';\nimport { TopologyDiagramUtils } from './topology-diagram-utils';\nimport {\n  BLOCK_TYPE_TOPOLOGY,\n  REF_KEY_TOPOLOGY_DIAGRAM,\n  REF_KEY_TOPOLOGY_DIAGRAM_UTIL\n} from './utils';\n\nconst DiagramWrapper = styled.div`\n  position: relative;\n  overflow: auto;\n  padding: 0px 0px 0px 5px;\n  background: #88888850;\n  height: 100%;\n`;\n\nconst Title = styled.span`\n  padding: 0px 20px;\n`;\n\nexport function TopologyDrawer(props) {\n  const { controller, topicKey, getRef, saveRef } = props;\n  const onDiagramClose = e => {\n    e.stopPropagation();\n    // const key = `topic-topology-data-${topicKey}`;\n    // const topologyData = controller.run('deleteTempValue', { key });\n\n    const diagram: TopologyDiagram = getRef(REF_KEY_TOPOLOGY_DIAGRAM);\n    const topologyData = diagram.topology.data;\n    controller.run('operation', {\n      ...props,\n      opType: OpType.SET_TOPIC_BLOCK,\n      topicKey,\n      blockType: BLOCK_TYPE_TOPOLOGY,\n      data: topologyData,\n      focusMode: FocusMode.NORMAL\n    });\n  };\n  const diagramProps = {\n    ...props,\n    ref: saveRef(REF_KEY_TOPOLOGY_DIAGRAM)\n  };\n  const utilProps = {\n    ...props,\n    ref: saveRef(REF_KEY_TOPOLOGY_DIAGRAM_UTIL)\n  };\n  return (\n    <Drawer\n      title={\n        <Title>{getI18nText(props, I18nKey.TOPOLOGY_DIAGRAM_EDITOR)}</Title>\n      }\n      icon={Icon('topology')}\n      isOpen\n      hasBackdrop\n      backdropClassName=\"backdrop\"\n      backdropProps={{ onMouseDown: stopPropagation }}\n      canOutsideClickClose={false}\n      isCloseButtonShown={true}\n      onClose={onDiagramClose}\n      size=\"100%\"\n    >\n      <DiagramWrapper onClick={stopPropagation} onDoubleClick={stopPropagation}>\n        <TopologyDiagram {...diagramProps} />\n        <TopologyDiagramUtils {...utilProps} />\n      </DiagramWrapper>\n    </Drawer>\n  );\n}\n","import {\n  BaseSheetModelModifierArg,\n  SheetModelModifier,\n  toDocModelModifierFunc\n} from '@blink-mind/core';\nimport { getI18nText, I18nKey, Icon } from '@blink-mind/renderer-react';\nimport { MenuDivider, MenuItem } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { TopicBlockTopology } from './topic-block-topology';\nimport { TopologyDrawer } from './topology-drawer';\nimport {\n  BLOCK_TYPE_TOPOLOGY,\n  FOCUS_MODE_EDITING_TOPOLOGY,\n  OP_TYPE_START_EDITING_TOPOLOGY\n} from './utils';\n\nfunction startEditingTopology({ model, topicKey }: BaseSheetModelModifierArg) {\n  const topic = model.getTopic(topicKey);\n  const { block } = topic.getBlock(BLOCK_TYPE_TOPOLOGY);\n  if (block == null || block.data == null) {\n    model = SheetModelModifier.setTopicBlockData({\n      model,\n      topicKey,\n      blockType: BLOCK_TYPE_TOPOLOGY,\n      data: ''\n    });\n  }\n  model = SheetModelModifier.focusTopic({\n    model,\n    topicKey,\n    focusMode: FOCUS_MODE_EDITING_TOPOLOGY\n  });\n  return model;\n}\n\nexport default function TopologyDiagramPlugin() {\n  return {\n    renderTopicBlock(props, next) {\n      const { controller, block } = props;\n      if (block.type === BLOCK_TYPE_TOPOLOGY) {\n        return controller.run('renderTopicBlockTopology', props);\n      }\n      return next();\n    },\n\n    renderTopicBlockTopology(props) {\n      return <TopicBlockTopology {...props} />;\n    },\n\n    renderDrawer(props, next) {\n      const { model } = props;\n      if (model.focusMode === FOCUS_MODE_EDITING_TOPOLOGY) {\n        const topoProps = {\n          ...props,\n          topicKey: model.focusKey,\n          key: 'topology-drawer'\n        };\n        return <TopologyDrawer {...topoProps} />;\n      }\n      return next();\n    },\n\n    customizeTopicContextMenu(props, next) {\n      const { controller } = props;\n      function editTopology(e) {\n        controller.run('operation', {\n          ...props,\n          opType: OP_TYPE_START_EDITING_TOPOLOGY\n        });\n      }\n      return (\n        <>\n          {next()}\n          <MenuDivider />\n          <MenuItem\n            icon={Icon('topology')}\n            text={getI18nText(props, I18nKey.EDIT_TOPOLOGY_DIAGRAM)}\n            onClick={editTopology}\n          />\n        </>\n      );\n    },\n\n    getOpMap(props, next) {\n      const opMap = next();\n      opMap.set(\n        OP_TYPE_START_EDITING_TOPOLOGY,\n        toDocModelModifierFunc(startEditingTopology)\n      );\n      return opMap;\n    }\n  };\n}\n"],"names":["iconClassName","React.createElement","TopicBlockIcon","BaseWidget","registerNode","flowData","flowDataAnchors","flowDataIconRect","flowDataTextRect","flowSubprocess","flowSubprocessIconRect","flowSubprocessTextRect","flowDb","flowDbIconRect","flowDbTextRect","flowDocument","flowDocumentAnchors","flowDocumentIconRect","flowDocumentTextRect","flowInternalStorage","flowInternalStorageIconRect","flowInternalStorageTextRect","flowExternStorage","flowExternStorageAnchors","flowExternStorageIconRect","flowExternStorageTextRect","flowQueue","flowQueueIconRect","flowQueueTextRect","flowManually","flowManuallyAnchors","flowManuallyIconRect","flowManuallyTextRect","flowDisplay","flowDisplayAnchors","flowDisplayIconRect","flowDisplayTextRect","flowParallel","flowParallelAnchors","flowComment","flowCommentAnchors","activityFinal","activityFinalIconRect","activityFinalTextRect","swimlaneV","swimlaneVIconRect","swimlaneVTextRect","swimlaneH","swimlaneHIconRect","swimlaneHTextRect","fork","forkHAnchors","forkIconRect","forkTextRect","forkVAnchors","simpleClass","simpleClassIconRect","simpleClassTextRect","interfaceClass","interfaceClassIconRect","interfaceClassTextRect","lifeline","lifelineAnchors","lifelineIconRect","lifelineTextRect","sequenceFocus","sequenceFocusAnchors","sequenceFocusIconRect","sequenceFocusTextRect","Topology","Root","ZIndex","Btn","Tooltip","Position","Classes","React.Component","getI18nText","I18nKey","OpType","Icon","IconName","Alert","FocusMode","Drawer","stopPropagation","SheetModelModifier","MenuDivider","MenuItem","toDocModelModifierFunc"],"mappings":";;;;;;;;;;;;;;;;;;;AAAO,MAAM,2BAA2B,GAAG,6BAA6B,CAAC;AAClE,MAAM,8BAA8B,GAAG,gCAAgC,CAAC;AACxE,MAAM,mBAAmB,GAAG,UAAU,CAAC;AACvC,MAAM,wBAAwB,GAAG,kBAAkB,CAAC;AACpD,MAAM,6BAA6B,GAAG,uBAAuB;;SCKpD,kBAAkB,CAAC,KAAK;IACtC,MAAM,EAAE,UAAU,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,KAAK,CAAC;IAC9C,MAAM,OAAO,GAAG,CAAC;QACf,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,UAAU,CAAC,GAAG,CAAC,WAAW,EAAE;YAC1B,GAAG,KAAK;YACR,MAAM,EAAE,8BAA8B;SACvC,CAAC,CAAC;KACJ,CAAC;IACF,MAAM,SAAS,GACb,KAAK,CAAC,QAAQ,KAAK,QAAQ;QAC3B,KAAK,CAAC,SAAS,KAAK,2BAA2B,CAAC;IAElD,MAAM,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;IAEzE,IAAI,CAAC,SAAS,IAAI,CAAC,KAAK;QAAE,OAAO,IAAI,CAAC;IACtC,MAAM,SAAS,GAAG;QAChB,SAAS,EAAEA,2BAAa,CAAC,UAAU,CAAC;QACpC,OAAO;QACP,QAAQ,EAAE,CAAC,CAAC;KACb,CAAC;IAEF,OAAOC,oBAACC,4BAAc,oBAAK,SAAS,EAAI,CAAC;AAC3C,CAAC;;AChCM,MAAM,WAAW,GAAG;IACzB;QACE,KAAK,EAAE,OAAO;QACd,QAAQ,EAAE;YACR;gBACE,IAAI,EAAE,WAAW;gBACjB,IAAI,EAAE,WAAW;gBACjB,IAAI,EAAE;oBACJ,IAAI,EAAE,UAAU;oBAChB,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,GAAG;qBACZ;oBACD,WAAW,EAAE,EAAE;oBACf,YAAY,EAAE,EAAE;oBAChB,UAAU,EAAE,EAAE;oBACd,aAAa,EAAE,EAAE;oBACjB,IAAI,EAAE,WAAW;oBACjB,IAAI,EAAE,QAAQ;oBACd,UAAU,EAAE,UAAU;oBACtB,SAAS,EAAE,SAAS;iBACrB;aACF;YACD;gBACE,IAAI,EAAE,WAAW;gBACjB,IAAI,EAAE,gBAAgB;gBACtB,IAAI,EAAE;oBACJ,IAAI,EAAE,WAAW;oBACjB,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,EAAE;qBACX;oBACD,WAAW,EAAE,EAAE;oBACf,YAAY,EAAE,EAAE;oBAChB,UAAU,EAAE,EAAE;oBACd,aAAa,EAAE,EAAE;oBACjB,YAAY,EAAE,GAAG;oBACjB,IAAI,EAAE,WAAW;iBAClB;aACF;YACD;gBACE,IAAI,EAAE,QAAQ;gBACd,IAAI,EAAE,aAAa;gBACnB,IAAI,EAAE;oBACJ,IAAI,EAAE,QAAQ;oBACd,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,GAAG;qBACZ;oBACD,IAAI,EAAE,QAAQ;oBACd,WAAW,EAAE,CAAC;iBACf;aACF;YACD;gBACE,IAAI,EAAE,UAAU;gBAChB,IAAI,EAAE,eAAe;gBACrB,IAAI,EAAE;oBACJ,IAAI,EAAE,UAAU;oBAChB,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,GAAG;qBACZ;oBACD,IAAI,EAAE,UAAU;iBACjB;aACF;YACD;gBACE,IAAI,EAAE,SAAS;gBACf,IAAI,EAAE,cAAc;gBACpB,IAAI,EAAE;oBACJ,IAAI,EAAE,SAAS;oBACf,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,GAAG;qBACZ;oBACD,IAAI,EAAE,SAAS;iBAChB;aACF;YACD;gBACE,IAAI,EAAE,UAAU;gBAChB,IAAI,EAAE,eAAe;gBACrB,IAAI,EAAE;oBACJ,IAAI,EAAE,UAAU;oBAChB,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,GAAG;qBACZ;oBACD,IAAI,EAAE,UAAU;iBACjB;aACF;YACD;gBACE,IAAI,EAAE,SAAS;gBACf,IAAI,EAAE,cAAc;gBACpB,IAAI,EAAE;oBACJ,IAAI,EAAE,SAAS;oBACf,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,GAAG;qBACZ;oBACD,UAAU,EAAE,EAAE;oBACd,aAAa,EAAE,EAAE;oBACjB,IAAI,EAAE,SAAS;iBAChB;aACF;YACD;gBACE,IAAI,EAAE,WAAW;gBACjB,IAAI,EAAE,gBAAgB;gBACtB,IAAI,EAAE;oBACJ,IAAI,EAAE,WAAW;oBACjB,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,GAAG;qBACZ;oBACD,IAAI,EAAE,WAAW;iBAClB;aACF;YACD;gBACE,IAAI,EAAE,YAAY;gBAClB,IAAI,EAAE,iBAAiB;gBACvB,IAAI,EAAE;oBACJ,IAAI,EAAE,EAAE;oBACR,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,GAAG;qBACZ;oBACD,IAAI,EAAE,WAAW;iBAClB;aACF;YACD;gBACE,IAAI,EAAE,aAAa;gBACnB,IAAI,EAAE,kBAAkB;gBACxB,IAAI,EAAE;oBACJ,IAAI,EAAE,EAAE;oBACR,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,GAAG;qBACZ;oBACD,IAAI,EAAE,YAAY;iBACnB;aACF;YACD;gBACE,IAAI,EAAE,qBAAqB;gBAC3B,IAAI,EAAE,mBAAmB;gBACzB,IAAI,EAAE;oBACJ,IAAI,EAAE,EAAE;oBACR,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,GAAG;qBACZ;oBACD,IAAI,EAAE,aAAa;iBACpB;aACF;YACD;gBACE,IAAI,EAAE,MAAM;gBACZ,IAAI,EAAE,WAAW;gBACjB,IAAI,EAAE;oBACJ,IAAI,EAAE,MAAM;oBACZ,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,GAAG;qBACZ;oBACD,IAAI,EAAE,MAAM;iBACb;aACF;YACD;gBACE,IAAI,EAAE,OAAO;gBACb,IAAI,EAAE,YAAY;gBAClB,IAAI,EAAE;oBACJ,IAAI,EAAE,OAAO;oBACb,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,GAAG;qBACZ;oBACD,IAAI,EAAE,OAAO;iBACd;aACF;YACD;gBACE,IAAI,EAAE,SAAS;gBACf,IAAI,EAAE,UAAU;gBAChB,IAAI,EAAE;oBACJ,IAAI,EAAE,SAAS;oBACf,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,GAAG;qBACZ;oBACD,WAAW,EAAE,EAAE;oBACf,YAAY,EAAE,EAAE;oBAChB,UAAU,EAAE,EAAE;oBACd,aAAa,EAAE,EAAE;oBACjB,IAAI,EAAE,SAAS;iBAChB;aACF;YACD;gBACE,IAAI,EAAE,MAAM;gBACZ,IAAI,EAAE,WAAW;gBACjB,IAAI,EAAE;oBACJ,IAAI,EAAE,MAAM;oBACZ,IAAI,EAAE;wBACJ,KAAK,EAAE,EAAE;wBACT,MAAM,EAAE,GAAG;qBACZ;oBACD,WAAW,EAAE,EAAE;oBACf,YAAY,EAAE,EAAE;oBAChB,UAAU,EAAE,EAAE;oBACd,aAAa,EAAE,EAAE;oBACjB,IAAI,EAAE,MAAM;iBACb;aACF;YACD;gBACE,IAAI,EAAE,MAAM;gBACZ,IAAI,EAAE,WAAW;gBACjB,IAAI,EAAE;oBACJ,IAAI,EAAE,MAAM;oBACZ,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,EAAE;qBACX;oBACD,IAAI,EAAE,MAAM;iBACb;aACF;YACD;gBACE,IAAI,EAAE,OAAO;gBACb,IAAI,EAAE,YAAY;gBAClB,IAAI,EAAE;oBACJ,IAAI,EAAE,EAAE;oBACR,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,GAAG;qBACZ;oBACD,IAAI,EAAE,OAAO;oBACb,KAAK,EAAE,sBAAsB;iBAC9B;aACF;YACD;gBACE,IAAI,EAAE,MAAM;gBACZ,IAAI,EAAE,WAAW;gBACjB,IAAI,EAAE;oBACJ,IAAI,EAAE;wBACJ,KAAK,EAAE,EAAE;wBACT,MAAM,EAAE,EAAE;qBACX;oBACD,IAAI,EAAE,IAAI;oBACV,CAAC,EAAE,EAAE;oBACL,OAAO,EAAE,EAAE;oBACX,SAAS,EAAE,MAAM;oBACjB,IAAI,EAAE,MAAM;oBACZ,IAAI,EAAE,QAAQ;oBACd,UAAU,EAAE,UAAU;oBACtB,SAAS,EAAE,MAAM;oBACjB,QAAQ,EAAE,EAAE;iBACb;aACF;YACD;gBACE,IAAI,EAAE,QAAQ;gBACd,IAAI,EAAE,aAAa;gBACnB,IAAI,EAAE;oBACJ,IAAI,EAAE;wBACJ,KAAK,EAAE,EAAE;wBACT,MAAM,EAAE,GAAG;qBACZ;oBACD,IAAI,EAAE,QAAQ;iBACf;aACF;YACD;gBACE,IAAI,EAAE,aAAa;gBACnB,IAAI,EAAE,SAAS;gBACf,IAAI,EAAE;oBACJ,IAAI,EAAE,aAAa;oBACnB,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,GAAG;qBACZ;oBACD,WAAW,EAAE,EAAE;oBACf,YAAY,EAAE,EAAE;oBAChB,UAAU,EAAE,EAAE;oBACd,aAAa,EAAE,EAAE;;oBAEjB,IAAI,EAAE,KAAK;iBACZ;aACF;SACF;KACF;IACD;QACE,KAAK,EAAE,YAAY;QACnB,QAAQ,EAAE;YACR;gBACE,IAAI,EAAE,WAAW;gBACjB,IAAI,EAAE,iBAAiB;gBACvB,IAAI,EAAE;oBACJ,IAAI,EAAE,OAAO;oBACb,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,EAAE;qBACX;oBACD,YAAY,EAAE,GAAG;oBACjB,IAAI,EAAE,WAAW;iBAClB;aACF;YACD;gBACE,IAAI,EAAE,MAAM;gBACZ,IAAI,EAAE,gBAAgB;gBACtB,IAAI,EAAE;oBACJ,IAAI,EAAE,MAAM;oBACZ,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,EAAE;qBACX;oBACD,IAAI,EAAE,WAAW;iBAClB;aACF;YACD;gBACE,IAAI,EAAE,WAAW;gBACjB,IAAI,EAAE,cAAc;gBACpB,IAAI,EAAE;oBACJ,IAAI,EAAE,WAAW;oBACjB,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,EAAE;qBACX;oBACD,IAAI,EAAE,SAAS;iBAChB;aACF;YACD;gBACE,IAAI,EAAE,MAAM;gBACZ,IAAI,EAAE,gBAAgB;gBACtB,IAAI,EAAE;oBACJ,IAAI,EAAE,MAAM;oBACZ,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,EAAE;qBACX;oBACD,IAAI,EAAE,UAAU;iBACjB;aACF;YACD;gBACE,IAAI,EAAE,SAAS;gBACf,IAAI,EAAE,iBAAiB;gBACvB,IAAI,EAAE;oBACJ,IAAI,EAAE,SAAS;oBACf,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,EAAE;qBACX;oBACD,IAAI,EAAE,SAAS;iBAChB;aACF;YACD;gBACE,IAAI,EAAE,UAAU;gBAChB,IAAI,EAAE,sBAAsB;gBAC5B,IAAI,EAAE;oBACJ,IAAI,EAAE,UAAU;oBAChB,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,EAAE;qBACX;oBACD,IAAI,EAAE,gBAAgB;iBACvB;aACF;YACD;gBACE,IAAI,EAAE,UAAU;gBAChB,IAAI,EAAE,SAAS;gBACf,IAAI,EAAE;oBACJ,IAAI,EAAE,UAAU;oBAChB,IAAI,EAAE;wBACJ,KAAK,EAAE,EAAE;wBACT,MAAM,EAAE,GAAG;qBACZ;oBACD,IAAI,EAAE,QAAQ;iBACf;aACF;YACD;gBACE,IAAI,EAAE,UAAU;gBAChB,IAAI,EAAE,oBAAoB;gBAC1B,IAAI,EAAE;oBACJ,IAAI,EAAE,UAAU;oBAChB,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,GAAG;qBACZ;oBACD,IAAI,EAAE,cAAc;iBACrB;aACF;YACD;gBACE,IAAI,EAAE,kBAAkB;gBACxB,IAAI,EAAE,uBAAuB;gBAC7B,IAAI,EAAE;oBACJ,IAAI,EAAE,kBAAkB;oBACxB,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,EAAE;qBACX;oBACD,IAAI,EAAE,qBAAqB;iBAC5B;aACF;YACD;gBACE,IAAI,EAAE,kBAAkB;gBACxB,IAAI,EAAE,qBAAqB;gBAC3B,IAAI,EAAE;oBACJ,IAAI,EAAE,kBAAkB;oBACxB,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,EAAE;qBACX;oBACD,IAAI,EAAE,mBAAmB;iBAC1B;aACF;YACD;gBACE,IAAI,EAAE,OAAO;gBACb,IAAI,EAAE,iBAAiB;gBACvB,IAAI,EAAE;oBACJ,IAAI,EAAE,OAAO;oBACb,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,GAAG;qBACZ;oBACD,IAAI,EAAE,WAAW;iBAClB;aACF;YACD;gBACE,IAAI,EAAE,gBAAgB;gBACtB,IAAI,EAAE,oBAAoB;gBAC1B,IAAI,EAAE;oBACJ,IAAI,EAAE,gBAAgB;oBACtB,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,EAAE;qBACX;oBACD,IAAI,EAAE,cAAc;iBACrB;aACF;YACD;gBACE,IAAI,EAAE,SAAS;gBACf,IAAI,EAAE,mBAAmB;gBACzB,IAAI,EAAE;oBACJ,IAAI,EAAE,SAAS;oBACf,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,EAAE;qBACX;oBACD,IAAI,EAAE,aAAa;iBACpB;aACF;YACD;gBACE,IAAI,EAAE,UAAU;gBAChB,IAAI,EAAE,oBAAoB;gBAC1B,IAAI,EAAE;oBACJ,IAAI,EAAE,UAAU;oBAChB,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,EAAE;qBACX;oBACD,IAAI,EAAE,cAAc;iBACrB;aACF;YACD;gBACE,IAAI,EAAE,SAAS;gBACf,IAAI,EAAE,mBAAmB;gBACzB,IAAI,EAAE;oBACJ,IAAI,EAAE,SAAS;oBACf,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,GAAG;qBACZ;oBACD,IAAI,EAAE,aAAa;iBACpB;aACF;SACF;KACF;IACD;QACE,KAAK,EAAE,kBAAkB;QACzB,QAAQ,EAAE;YACR;gBACE,IAAI,EAAE,OAAO;gBACb,IAAI,EAAE,aAAa;gBACnB,IAAI,EAAE;oBACJ,IAAI,EAAE,EAAE;oBACR,IAAI,EAAE;wBACJ,KAAK,EAAE,EAAE;wBACT,MAAM,EAAE,EAAE;qBACX;oBACD,IAAI,EAAE,QAAQ;oBACd,SAAS,EAAE,MAAM;oBACjB,WAAW,EAAE,aAAa;iBAC3B;aACF;YACD;gBACE,IAAI,EAAE,KAAK;gBACX,IAAI,EAAE,YAAY;gBAClB,IAAI,EAAE;oBACJ,IAAI,EAAE,EAAE;oBACR,IAAI,EAAE;wBACJ,KAAK,EAAE,EAAE;wBACT,MAAM,EAAE,EAAE;qBACX;oBACD,IAAI,EAAE,eAAe;iBACtB;aACF;YACD;gBACE,IAAI,EAAE,QAAQ;gBACd,IAAI,EAAE,aAAa;gBACnB,IAAI,EAAE;oBACJ,IAAI,EAAE,QAAQ;oBACd,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,EAAE;qBACX;oBACD,YAAY,EAAE,IAAI;oBAClB,IAAI,EAAE,WAAW;iBAClB;aACF;YACD;gBACE,IAAI,EAAE,gBAAgB;gBACtB,IAAI,EAAE,cAAc;gBACpB,IAAI,EAAE;oBACJ,IAAI,EAAE,IAAI;oBACV,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,EAAE;qBACX;oBACD,IAAI,EAAE,SAAS;iBAChB;aACF;YACD;gBACE,IAAI,EAAE,wBAAwB;gBAC9B,IAAI,EAAE,iBAAiB;gBACvB,IAAI,EAAE;oBACJ,IAAI,EAAE,wBAAwB;oBAC9B,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,GAAG;qBACZ;oBACD,IAAI,EAAE,WAAW;iBAClB;aACF;YACD;gBACE,IAAI,EAAE,0BAA0B;gBAChC,IAAI,EAAE,iBAAiB;gBACvB,IAAI,EAAE;oBACJ,IAAI,EAAE,0BAA0B;oBAChC,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,GAAG;qBACZ;oBACD,IAAI,EAAE,WAAW;iBAClB;aACF;YACD;gBACE,IAAI,EAAE,qBAAqB;gBAC3B,IAAI,EAAE,aAAa;gBACnB,IAAI,EAAE;oBACJ,IAAI,EAAE,EAAE;oBACR,IAAI,EAAE;wBACJ,KAAK,EAAE,EAAE;wBACT,MAAM,EAAE,GAAG;qBACZ;oBACD,IAAI,EAAE,OAAO;oBACb,SAAS,EAAE,MAAM;oBACjB,WAAW,EAAE,aAAa;iBAC3B;aACF;YACD;gBACE,IAAI,EAAE,uBAAuB;gBAC7B,IAAI,EAAE,WAAW;gBACjB,IAAI,EAAE;oBACJ,IAAI,EAAE,EAAE;oBACR,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,EAAE;qBACX;oBACD,IAAI,EAAE,OAAO;oBACb,SAAS,EAAE,MAAM;oBACjB,WAAW,EAAE,aAAa;iBAC3B;aACF;SACF;KACF;IACD;QACE,KAAK,EAAE,mCAAmC;QAC1C,QAAQ,EAAE;YACR;gBACE,IAAI,EAAE,UAAU;gBAChB,IAAI,EAAE,eAAe;gBACrB,IAAI,EAAE;oBACJ,IAAI,EAAE,UAAU;oBAChB,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,GAAG;qBACZ;oBACD,IAAI,EAAE,UAAU;iBACjB;aACF;YACD;gBACE,IAAI,EAAE,YAAY;gBAClB,IAAI,EAAE,YAAY;gBAClB,IAAI,EAAE;oBACJ,IAAI,EAAE,EAAE;oBACR,IAAI,EAAE;wBACJ,KAAK,EAAE,EAAE;wBACT,MAAM,EAAE,GAAG;qBACZ;oBACD,IAAI,EAAE,eAAe;iBACtB;aACF;YACD;gBACE,IAAI,EAAE,cAAc;gBACpB,IAAI,EAAE,mBAAmB;gBACzB,IAAI,EAAE;oBACJ,IAAI,EAAE,UAAU;oBAChB,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,GAAG;qBACZ;oBACD,UAAU,EAAE,EAAE;oBACd,IAAI,EAAE;wBACJ,UAAU,EAAE,OAAO;wBACnB,KAAK,EAAE,MAAM;wBACb,UAAU,EAAE,MAAM;qBACnB;oBACD,SAAS,EAAE,SAAS;oBACpB,WAAW,EAAE,SAAS;oBACtB,IAAI,EAAE,aAAa;oBACnB,QAAQ,EAAE;wBACR;4BACE,IAAI,EAAE,+CAA+C;4BACrD,IAAI,EAAE,MAAM;4BACZ,WAAW,EAAE,EAAE;4BACf,YAAY,EAAE,EAAE;4BAChB,UAAU,EAAE,EAAE;4BACd,aAAa,EAAE,EAAE;4BACjB,YAAY,EAAE;gCACZ,CAAC,EAAE,CAAC;gCACJ,CAAC,EAAE,CAAC;gCACJ,KAAK,EAAE,MAAM;gCACb,MAAM,EAAE,MAAM;gCACd,MAAM,EAAE,CAAC;6BACV;4BACD,IAAI,EAAE;gCACJ,UAAU,EAAE,OAAO;gCACnB,KAAK,EAAE,MAAM;gCACb,SAAS,EAAE,MAAM;gCACjB,YAAY,EAAE,KAAK;6BACpB;yBACF;qBACF;iBACF;aACF;YACD;gBACE,IAAI,EAAE,OAAO;gBACb,IAAI,EAAE,YAAY;gBAClB,IAAI,EAAE;oBACJ,IAAI,EAAE,UAAU;oBAChB,IAAI,EAAE;wBACJ,KAAK,EAAE,GAAG;wBACV,MAAM,EAAE,GAAG;qBACZ;oBACD,UAAU,EAAE,EAAE;oBACd,IAAI,EAAE;wBACJ,UAAU,EAAE,OAAO;wBACnB,KAAK,EAAE,MAAM;wBACb,UAAU,EAAE,MAAM;qBACnB;oBACD,SAAS,EAAE,SAAS;oBACpB,WAAW,EAAE,SAAS;oBACtB,IAAI,EAAE,gBAAgB;oBACtB,QAAQ,EAAE;wBACR;4BACE,IAAI,EAAE,gBAAgB;4BACtB,IAAI,EAAE,MAAM;4BACZ,WAAW,EAAE,EAAE;4BACf,YAAY,EAAE,EAAE;4BAChB,UAAU,EAAE,EAAE;4BACd,aAAa,EAAE,EAAE;4BACjB,YAAY,EAAE;gCACZ,CAAC,EAAE,CAAC;gCACJ,CAAC,EAAE,CAAC;gCACJ,KAAK,EAAE,MAAM;gCACb,MAAM,EAAE,KAAK;gCACb,MAAM,EAAE,CAAC;6BACV;4BACD,IAAI,EAAE;gCACJ,UAAU,EAAE,OAAO;gCACnB,KAAK,EAAE,MAAM;gCACb,SAAS,EAAE,MAAM;gCACjB,YAAY,EAAE,KAAK;6BACpB;yBACF;wBACD;4BACE,IAAI,EAAE,+BAA+B;4BACrC,IAAI,EAAE,MAAM;4BACZ,WAAW,EAAE,EAAE;4BACf,YAAY,EAAE,EAAE;4BAChB,UAAU,EAAE,EAAE;4BACd,aAAa,EAAE,EAAE;4BACjB,YAAY,EAAE;gCACZ,CAAC,EAAE,CAAC;gCACJ,CAAC,EAAE,KAAK;gCACR,KAAK,EAAE,MAAM;gCACb,MAAM,EAAE,KAAK;gCACb,MAAM,EAAE,CAAC;6BACV;4BACD,IAAI,EAAE;gCACJ,UAAU,EAAE,OAAO;gCACnB,KAAK,EAAE,MAAM;gCACb,SAAS,EAAE,MAAM;gCACjB,YAAY,EAAE,KAAK;6BACpB;yBACF;qBACF;iBACF;aACF;SACF;KACF;CACF,CAAC;;AClnBF,MAAM,IAAI,GAAG,MAAM,CAAC,GAAG,CAAA;;;;;CAKtB,CAAC;AAEF,MAAM,MAAM,GAAG,MAAM,CAAC,GAAG,CAAA;;;;;;CAMxB,CAAC;AAEF,MAAM,KAAK,GAAG,MAAM,CAAC,GAAG,CAAA;;;;;;CAMvB,CAAC;AAEF,MAAM,SAAS,GAAG,MAAM,CAAC,GAAG,CAAA;;;;;;;;;;;CAW3B,CAAC;AAEF,MAAM,cAAc,GAAG,MAAM,CAAC,GAAG,CAAA;;;;;;;;;;;;;;;CAehC,CAAC;AAQF,MAAa,eAAgB,SAAQC,wBAA6B;IAAlE;;QACE,UAAK,GAAW;YACd,EAAE,EAAE,EAAE;YACN,IAAI,EAAE,IAAI;YACV,WAAW,EAAE,WAAW;SACzB,CAAC;QAIF,kBAAa,GAAY,EAAE,CAAC;QAyH5B,sBAAiB,GAAG,CAAC;YACnB,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,CAAC,CAAC,eAAe,EAAE,CAAC;SACrB,CAAC;QAEF,cAAS,GAAG,CAAC,KAAK,EAAE,IAAI;YACtB,MAAM,EAAE,MAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;YAC9B,MAAM,WAAW,GAAyB,MAAM,CAC9C,6BAA6B,CAC9B,CAAC;YACF,QAAQ,KAAK;gBACX,KAAK,QAAQ,CAAC;gBACd,KAAK,OAAO,CAAC;gBACb,KAAK,QAAQ;oBACX,IAAI,IAAI,CAAC,QAAQ,IAAI,WAAW,EAAE;wBAChC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;qBAC/C;oBACD,MAAM;aACT;SACF,CAAC;KAuEH;IAjNC,cAAc;QACZC,oBAAY,CACV,UAAU,EACVC,4BAAQ,EACRC,mCAAe,EACfC,oCAAgB,EAChBC,oCAAgB,CACjB,CAAC;QACFJ,oBAAY,CACV,gBAAgB,EAChBK,kCAAc,EACd,IAAI,EACJC,0CAAsB,EACtBC,0CAAsB,CACvB,CAAC;QACFP,oBAAY,CAAC,QAAQ,EAAEQ,0BAAM,EAAE,IAAI,EAAEC,kCAAc,EAAEC,kCAAc,CAAC,CAAC;QACrEV,oBAAY,CACV,cAAc,EACdW,gCAAY,EACZC,uCAAmB,EACnBC,wCAAoB,EACpBC,wCAAoB,CACrB,CAAC;QACFd,oBAAY,CACV,qBAAqB,EACrBe,uCAAmB,EACnB,IAAI,EACJC,+CAA2B,EAC3BC,+CAA2B,CAC5B,CAAC;QACFjB,oBAAY,CACV,mBAAmB,EACnBkB,qCAAiB,EACjBC,4CAAwB,EACxBC,6CAAyB,EACzBC,6CAAyB,CAC1B,CAAC;QACFrB,oBAAY,CACV,WAAW,EACXsB,6BAAS,EACT,IAAI,EACJC,qCAAiB,EACjBC,qCAAiB,CAClB,CAAC;QACFxB,oBAAY,CACV,cAAc,EACdyB,gCAAY,EACZC,uCAAmB,EACnBC,wCAAoB,EACpBC,wCAAoB,CACrB,CAAC;QACF5B,oBAAY,CACV,aAAa,EACb6B,+BAAW,EACXC,sCAAkB,EAClBC,uCAAmB,EACnBC,uCAAmB,CACpB,CAAC;QACFhC,oBAAY,CAAC,cAAc,EAAEiC,gCAAY,EAAEC,uCAAmB,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;QAC5ElC,oBAAY,CAAC,aAAa,EAAEmC,+BAAW,EAAEC,sCAAkB,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;;QAGzEpC,oBAAY,CACV,eAAe,EACfqC,qCAAa,EACb,IAAI,EACJC,6CAAqB,EACrBC,6CAAqB,CACtB,CAAC;QACFvC,oBAAY,CACV,WAAW,EACXwC,iCAAS,EACT,IAAI,EACJC,yCAAiB,EACjBC,yCAAiB,CAClB,CAAC;QACF1C,oBAAY,CACV,WAAW,EACX2C,iCAAS,EACT,IAAI,EACJC,yCAAiB,EACjBC,yCAAiB,CAClB,CAAC;QACF7C,oBAAY,CAAC,OAAO,EAAE8C,4BAAI,EAAEC,oCAAY,EAAEC,oCAAY,EAAEC,oCAAY,CAAC,CAAC;QACtEjD,oBAAY,CAAC,OAAO,EAAE8C,4BAAI,EAAEI,oCAAY,EAAEF,oCAAY,EAAEC,oCAAY,CAAC,CAAC;;QAGtEjD,oBAAY,CACV,aAAa,EACbmD,gCAAW,EACX,IAAI,EACJC,wCAAmB,EACnBC,wCAAmB,CACpB,CAAC;QACFrD,oBAAY,CACV,gBAAgB,EAChBsD,mCAAc,EACd,IAAI,EACJC,2CAAsB,EACtBC,2CAAsB,CACvB,CAAC;;QAGFxD,oBAAY,CACV,UAAU,EACVyD,gCAAQ,EACRC,uCAAe,EACfC,wCAAgB,EAChBC,wCAAgB,CACjB,CAAC;QACF5D,oBAAY,CACV,eAAe,EACf6D,qCAAa,EACbC,4CAAoB,EACpBC,6CAAqB,EACrBC,6CAAqB,CACtB,CAAC;KACH;IAuBD,iBAAiB;QACf,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,aAAa,CAAC,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC;QACvC,IAAI,CAAC,QAAQ,GAAG,IAAIC,qBAAQ,CAAC,iBAAiB,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QACpE,IAAI,CAAC,QAAQ,EAAE,CAAC;KACjB;IAED,kBAAkB;;KAEjB;IAED,QAAQ;QACN,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;QAC7B,MAAM,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;QACtD,IAAI,KAAK,IAAI,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,IAAI,KAAK,EAAE,EAAE;YAC5C,IAAI,CAAC,QAAQ,CAAC;gBACZ,IAAI,EAAE,KAAK,CAAC,IAAI;aACjB,CAAC,CAAC;YACH,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;SAChC;KACF;IAED,MAAM,CAAC,KAAyC,EAAE,IAAS;QACzD,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;KAC/D;IAED,WAAW;QACT,QACEpE,oBAAC,KAAK,QACH,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,KAAK;YACtC,QACEA,6BAAK,GAAG,EAAE,KAAK;gBACbA,oBAAC,SAAS,QAAE,IAAI,CAAC,KAAK,CAAa;gBACnCA,oBAAC,cAAc;;gBAGb,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;oBACvB,QACEA,2BACE,GAAG,EAAE,CAAC,EACN,KAAK,EAAE,GAAG,CAAC,IAAI,EACf,SAAS,EAAE,IAAI,EACf,WAAW,EAAE,EAAE;4BACb,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;yBACtB;wBAEDA,2BACE,SAAS,EAAE,WAAW,GAAG,GAAG,CAAC,IAAI,EACjC,KAAK,EAAE,IAAI,CAAC,QAAQ,GACpB,CACA,EACJ;iBACH,CAAC,CACa,CACb,EACN;SACH,CAAC,CACI,EACR;KACH;IAED,MAAM;QACJ,QACEA,oBAAC,IAAI;YACF,IAAI,CAAC,WAAW,EAAE;YACnBA,oBAAC,MAAM,IAAC,EAAE,EAAC,iBAAiB,EAAC,aAAa,EAAE,IAAI,CAAC,iBAAiB,GAAI,CACjE,EACP;KACH;CACF;;AC5VD,MAAMqE,MAAI,GAAG,MAAM,CAACC,oBAAM,CAAC,CAAA;;;;;;;;;;CAU1B,CAAC;AAEF,MAAM,KAAK,GAAG,MAAM,CAACC,iBAAG,CAAC,CAAA;;CAExB,CAAC;AAEF,MAAM,IAAI,GAAG,KAAK;IAChB,QACEvE,oBAACwE,cAAO,IACN,OAAO,EAAE,KAAK,CAAC,OAAO,EACtB,QAAQ,EAAEC,eAAQ,CAAC,GAAG,EACtB,SAAS,EAAEC,cAAO,CAAC,IAAI;QAEvB1E,oBAAC,KAAK,IAAC,OAAO,EAAE,KAAK,CAAC,OAAO,IAAG,KAAK,CAAC,QAAQ,CAAS,CAC/C,EACV;AACJ,CAAC,CAAC;AAEF,MAAM,cAAc,GAAG,MAAM,CAAC,IAAI,CAAA;;;;CAIjC,CAAC;AAMF,MAAa,oBAAqB,SAAQ2E,eAAiC;IACzE,YAAY,KAAK;QACf,KAAK,CAAC,KAAK,CAAC,CAAC;QAOf,kBAAa,GAAG,UAAU;YACxB,IAAI,CAAC,QAAQ,CAAC,EAAE,UAAU,EAAE,CAAC,CAAC;SAC/B,CAAC;QAOF,qBAAgB,GAAG,CAAC;YAClB,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;YACpC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;SACrB,CAAC;QAlBA,IAAI,CAAC,KAAK,GAAG;YACX,aAAa,EAAE,KAAK;YACpB,UAAU,EAAE,IAAI;SACjB,CAAC;KACH;IAMD,WAAW;QACT,MAAM,EAAE,MAAM,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;QAC9B,OAAO,MAAM,CAAC,wBAAwB,CAAC,CAAC,QAAQ,CAAC;KAClD;IAOD,MAAM;QACJ,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;QACzB,MAAM,EAAE,UAAU,EAAE,GAAG,KAAK,CAAC;QAE7B,MAAM,aAAa,GAAG,CAAC;YACrB,IAAI,CAAC,QAAQ,CAAC,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC,CAAC;SACxC,CAAC;QACF,MAAM,gBAAgB,GAAG;YACvB,GAAG,KAAK;YACR,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,aAAa;YAChC,OAAO,EAAEC,yBAAW,CAAC,KAAK,EAAEC,qBAAO,CAAC,mBAAmB,CAAC;YACxD,SAAS,EAAE,CAAC;gBACV,UAAU,CAAC,GAAG,CAAC,WAAW,EAAE;oBAC1B,GAAG,KAAK;oBACR,MAAM,EAAEC,WAAM,CAAC,kBAAkB;oBACjC,SAAS,EAAE,mBAAmB;iBAC/B,CAAC,CAAC;aACJ;YACD,QAAQ,EAAE,CAAC;gBACT,IAAI,CAAC,QAAQ,CAAC,EAAE,aAAa,EAAE,KAAK,EAAE,CAAC,CAAC;aACzC;SACF,CAAC;QACF,MAAM,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;QAClC,MAAM,KAAK,GAAG,UAAU,GAAG,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC;QAChD,QACE9E,oBAACqE,MAAI;YACHrE,oBAAC,IAAI,IACH,OAAO,EAAE,IAAI,CAAC,gBAAgB,EAC9B,OAAO,EAAE4E,yBAAW,CAAC,KAAK,EAAEC,qBAAO,CAAC,UAAU,CAAC;gBAE/C7E,oBAAC,cAAc,QAAE,GAAG4E,yBAAW,CAAC,KAAK,EAAEC,qBAAO,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC,KAAK,CAChE,KAAK,GAAG,GAAG,CACZ,GAAG,CAAkB,CACjB;YACP7E,oBAAC,IAAI,IACH,OAAO,EAAE,aAAa,EACtB,OAAO,EAAE4E,yBAAW,CAAC,KAAK,EAAEC,qBAAO,CAAC,MAAM,CAAC,IAE1CE,kBAAI,CAACC,sBAAQ,CAAC,KAAK,CAAC,CAChB;YACPhF,oBAACiF,YAAK,oBAAK,gBAAgB,EAAI,CAC1B,EACP;KACH;CACF;;ACtGD,MAAM,cAAc,GAAG,MAAM,CAAC,GAAG,CAAA;;;;;;CAMhC,CAAC;AAEF,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAA;;CAExB,CAAC;AAEF,SAAgB,cAAc,CAAC,KAAK;IAClC,MAAM,EAAE,UAAU,EAAE,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,KAAK,CAAC;IACxD,MAAM,cAAc,GAAG,CAAC;QACtB,CAAC,CAAC,eAAe,EAAE,CAAC;;;QAIpB,MAAM,OAAO,GAAoB,MAAM,CAAC,wBAAwB,CAAC,CAAC;QAClE,MAAM,YAAY,GAAG,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC;QAC3C,UAAU,CAAC,GAAG,CAAC,WAAW,EAAE;YAC1B,GAAG,KAAK;YACR,MAAM,EAAEH,WAAM,CAAC,eAAe;YAC9B,QAAQ;YACR,SAAS,EAAE,mBAAmB;YAC9B,IAAI,EAAE,YAAY;YAClB,SAAS,EAAEI,cAAS,CAAC,MAAM;SAC5B,CAAC,CAAC;KACJ,CAAC;IACF,MAAM,YAAY,GAAG;QACnB,GAAG,KAAK;QACR,GAAG,EAAE,OAAO,CAAC,wBAAwB,CAAC;KACvC,CAAC;IACF,MAAM,SAAS,GAAG;QAChB,GAAG,KAAK;QACR,GAAG,EAAE,OAAO,CAAC,6BAA6B,CAAC;KAC5C,CAAC;IACF,QACElF,oBAACmF,aAAM,IACL,KAAK,EACHnF,oBAAC,KAAK,QAAE4E,yBAAW,CAAC,KAAK,EAAEC,qBAAO,CAAC,uBAAuB,CAAC,CAAS,EAEtE,IAAI,EAAEE,kBAAI,CAAC,UAAU,CAAC,EACtB,MAAM,QACN,WAAW,QACX,iBAAiB,EAAC,UAAU,EAC5B,aAAa,EAAE,EAAE,WAAW,EAAEK,6BAAe,EAAE,EAC/C,oBAAoB,EAAE,KAAK,EAC3B,kBAAkB,EAAE,IAAI,EACxB,OAAO,EAAE,cAAc,EACvB,IAAI,EAAC,MAAM;QAEXpF,oBAAC,cAAc,IAAC,OAAO,EAAEoF,6BAAe,EAAE,aAAa,EAAEA,6BAAe;YACtEpF,oBAAC,eAAe,oBAAK,YAAY,EAAI;YACrCA,oBAAC,oBAAoB,oBAAK,SAAS,EAAI,CACxB,CACV,EACT;AACJ,CAAC;;AC9DD,SAAS,oBAAoB,CAAC,EAAE,KAAK,EAAE,QAAQ,EAA6B;IAC1E,MAAM,KAAK,GAAG,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;IACvC,MAAM,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;IACtD,IAAI,KAAK,IAAI,IAAI,IAAI,KAAK,CAAC,IAAI,IAAI,IAAI,EAAE;QACvC,KAAK,GAAGqF,uBAAkB,CAAC,iBAAiB,CAAC;YAC3C,KAAK;YACL,QAAQ;YACR,SAAS,EAAE,mBAAmB;YAC9B,IAAI,EAAE,EAAE;SACT,CAAC,CAAC;KACJ;IACD,KAAK,GAAGA,uBAAkB,CAAC,UAAU,CAAC;QACpC,KAAK;QACL,QAAQ;QACR,SAAS,EAAE,2BAA2B;KACvC,CAAC,CAAC;IACH,OAAO,KAAK,CAAC;AACf,CAAC;AAED,SAAwB,qBAAqB;IAC3C,OAAO;QACL,gBAAgB,CAAC,KAAK,EAAE,IAAI;YAC1B,MAAM,EAAE,UAAU,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC;YACpC,IAAI,KAAK,CAAC,IAAI,KAAK,mBAAmB,EAAE;gBACtC,OAAO,UAAU,CAAC,GAAG,CAAC,0BAA0B,EAAE,KAAK,CAAC,CAAC;aAC1D;YACD,OAAO,IAAI,EAAE,CAAC;SACf;QAED,wBAAwB,CAAC,KAAK;YAC5B,OAAOrF,oBAAC,kBAAkB,oBAAK,KAAK,EAAI,CAAC;SAC1C;QAED,YAAY,CAAC,KAAK,EAAE,IAAI;YACtB,MAAM,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC;YACxB,IAAI,KAAK,CAAC,SAAS,KAAK,2BAA2B,EAAE;gBACnD,MAAM,SAAS,GAAG;oBAChB,GAAG,KAAK;oBACR,QAAQ,EAAE,KAAK,CAAC,QAAQ;oBACxB,GAAG,EAAE,iBAAiB;iBACvB,CAAC;gBACF,OAAOA,oBAAC,cAAc,oBAAK,SAAS,EAAI,CAAC;aAC1C;YACD,OAAO,IAAI,EAAE,CAAC;SACf;QAED,yBAAyB,CAAC,KAAK,EAAE,IAAI;YACnC,MAAM,EAAE,UAAU,EAAE,GAAG,KAAK,CAAC;YAC7B,SAAS,YAAY,CAAC,CAAC;gBACrB,UAAU,CAAC,GAAG,CAAC,WAAW,EAAE;oBAC1B,GAAG,KAAK;oBACR,MAAM,EAAE,8BAA8B;iBACvC,CAAC,CAAC;aACJ;YACD,QACEA;gBACG,IAAI,EAAE;gBACPA,oBAACsF,kBAAW,OAAG;gBACftF,oBAACuF,eAAQ,IACP,IAAI,EAAER,kBAAI,CAAC,UAAU,CAAC,EACtB,IAAI,EAAEH,yBAAW,CAAC,KAAK,EAAEC,qBAAO,CAAC,qBAAqB,CAAC,EACvD,OAAO,EAAE,YAAY,GACrB,CACD,EACH;SACH;QAED,QAAQ,CAAC,KAAK,EAAE,IAAI;YAClB,MAAM,KAAK,GAAG,IAAI,EAAE,CAAC;YACrB,KAAK,CAAC,GAAG,CACP,8BAA8B,EAC9BW,2BAAsB,CAAC,oBAAoB,CAAC,CAC7C,CAAC;YACF,OAAO,KAAK,CAAC;SACd;KACF,CAAC;AACJ,CAAC;;;;"}