{"version":3,"file":"main.es.js","sources":["../../../packages/plugins/src/topic-reference/utils.ts","../../../packages/plugins/src/topic-reference/add-reference-topic-panel.tsx","../../../packages/plugins/src/topic-reference/ext-data-reference.ts","../../../packages/plugins/src/topic-reference/op-function.ts","../../../packages/plugins/src/topic-reference/reference-topic-thumbnail.tsx","../../../packages/plugins/src/topic-reference/reference-topic-list.tsx","../../../packages/plugins/src/topic-reference/topic-ext-reference.tsx","../../../packages/plugins/src/topic-reference/topic-reference-checkbox.tsx","../../../packages/plugins/src/topic-reference/topic-reference-plugin.tsx","../../../node_modules/classnames/index.js","../../../packages/plugins/src/common/components/topic-title-thumbnail.tsx","../../../packages/plugins/src/search/utils.ts","../../../packages/plugins/src/search/search-panel.tsx","../../../packages/plugins/src/search/toolbar-item-search.tsx","../../../packages/plugins/src/search/search-plugin.tsx","../../../packages/plugins/src/open-file/toolbar-item-openfile.tsx","../../../packages/plugins/src/open-file/open-file-plugin.tsx","../../../packages/plugins/src/export-file/toolbar-item-export.tsx","../../../packages/plugins/src/export-file/export-file-plugin.tsx","../../../packages/plugins/src/undo-redo/undo-redo-plugin.tsx","../../../packages/plugins/src/tags/ext-data-tags.ts","../../../packages/plugins/src/tags/utils.ts","../../../packages/plugins/src/tags/components/add-tag-widget.tsx","../../../packages/plugins/src/tags/components/styled.tsx","../../../packages/plugins/src/tags/components/tag-topic-list.tsx","../../../packages/plugins/src/tags/components/update-tag-widget.tsx","../../../packages/plugins/src/tags/components/tag-widget.tsx","../../../packages/plugins/src/tags/components/all-tags-widget.tsx","../../../packages/plugins/src/tags/components/topic-tags-widget.tsx","../../../packages/plugins/src/tags/components/tag-editor.tsx","../../../packages/plugins/src/tags/op-function.ts","../../../packages/plugins/src/tags/tags-plugin.tsx","../../../packages/plugins/src/theme-selector/themes/dark-theme1.ts","../../../packages/plugins/src/theme-selector/themes/theme-random-color-square.ts","../../../packages/plugins/src/theme-selector/themes/theme-random-color-round.ts","../../../packages/plugins/src/theme-selector/themes/theme1.ts","../../../packages/plugins/src/theme-selector/themes/theme2.ts","../../../packages/plugins/src/theme-selector/themes/theme3.ts","../../../packages/plugins/src/theme-selector/themes/theme4.ts","../../../packages/plugins/src/theme-selector/theme-selector-plugin.ts","../../../packages/plugins/src/insert-images/utils/serialize-image.ts","../../../packages/plugins/src/insert-images/utils/constants.ts","../../../packages/plugins/src/insert-images/components/image-widget.tsx","../../../packages/plugins/src/insert-images/components/topic-images-widget.tsx","../../../packages/plugins/src/insert-images/ext-data-images.ts","../../../packages/plugins/src/insert-images/components/insert-image-dialog.tsx","../../../packages/plugins/src/insert-images/op-function.ts","../../../packages/plugins/src/insert-images/insert-images-plugin.tsx","../../../packages/plugins/src/debug/debug-namespace-widget.tsx","../../../packages/plugins/src/debug/debug-panel.tsx","../../../packages/plugins/src/debug/debug-plugin.tsx","../../../packages/plugins/src/export-topic/context-menu-export-topic.tsx","../../../packages/plugins/src/export-topic/utils.ts","../../../packages/plugins/src/export-topic/export-topic-plugin.tsx","../../../packages/plugins/src/simple-capture-error.ts"],"sourcesContent":["export const FOCUS_MODE_SET_REFERENCE_TOPICS =\n  'FOCUS_MODE_SET_REFERENCE_TOPICS';\n// 添加引用的Topic\nexport const OP_TYPE_START_SET_REFERENCE_TOPICS =\n  'OP_TYPE_START_SET_REFERENCE_TOPICS';\nexport const OP_TYPE_SET_REFERENCE_TOPICS = 'OP_TYPE_SET_REFERENCE_TOPICS';\n\nexport const EXT_DATA_KEY_TOPIC_REFERENCE = 'TOPIC_REFERENCE';\n\nexport const EXT_KEY_TOPIC_REFERENCE = 'EXT_KEY_TOPIC_REFERENCE';\n","import { FocusMode, OpType } from '@blink-mind/core';\nimport { Flex, getI18nText, I18nKey, ZIndex } from '@blink-mind/renderer-react';\nimport { Button } from '@blueprintjs/core';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { OP_TYPE_SET_REFERENCE_TOPICS } from './utils';\n\nconst Root = styled(ZIndex)`\n  position: absolute;\n  left: calc(50% - 150px);\n  top: 30px;\n  width: 300px;\n  background: white;\n  padding: 10px;\n  user-select: none;\n`;\n\nconst Title = styled.div`\n  margin-bottom: 10px;\n`;\n\nexport function AddReferenceTopicPanel(props) {\n  const { zIndex, controller, topicKey } = props;\n  const onClickCancel = e => {\n    controller.run('clearSelectedReferenceKeys', props);\n    controller.run('enableOperation', props);\n    controller.run('operation', {\n      ...props,\n      opType: OpType.SET_FOCUS_MODE,\n      focusMode: FocusMode.NORMAL\n    });\n  };\n  const onClickConfirm = e => {\n    const referenceKeys = controller.run('getSelectedReferenceKeys', props);\n    controller.run('enableOperation', props);\n    controller.run('operation', {\n      ...props,\n      opArray: [\n        {\n          opType: OP_TYPE_SET_REFERENCE_TOPICS,\n          topicKey,\n          referenceKeys\n        },\n        {\n          opType: OpType.FOCUS_TOPIC,\n          topicKey,\n          focusMode: FocusMode.NORMAL\n        }\n      ],\n      allowUndo: false\n    });\n    controller.run('clearSelectedReferenceKeys', props);\n  };\n  return (\n    <Root zIndex={zIndex}>\n      <Title>{getI18nText(props, I18nKey.SELECT_REF_TOPICS_TIP)}</Title>\n      <Flex justifyContent={'space-around'}>\n        <Button onClick={onClickConfirm}>\n          {getI18nText(props, I18nKey.CONFIRM)}\n        </Button>\n        <Button onClick={onClickCancel}>\n          {getI18nText(props, I18nKey.CANCEL)}\n        </Button>\n      </Flex>\n    </Root>\n  );\n}\n","import { KeyType } from '@blink-mind/core';\nimport { List, Map, Record } from 'immutable';\n\ntype ReferenceRecordType = {\n  keyList: List<KeyType>;\n  dataMap: Map<KeyType, any>;\n};\n\nconst defaultReferenceRecord: ReferenceRecordType = {\n  keyList: List(),\n  dataMap: Map()\n};\n\nexport class ReferenceRecord extends Record(defaultReferenceRecord) {\n  get keyList(): List<KeyType> {\n    return this.get('keyList');\n  }\n\n  get dataMap(): Map<KeyType, any> {\n    return this.get('dataMap');\n  }\n}\n\ntype ExtDataReferenceRecordType = {\n  reference: Map<KeyType, ReferenceRecord>;\n};\n\nconst defaultExtDataReferenceRecord: ExtDataReferenceRecordType = {\n  reference: Map()\n};\n\nexport class ExtDataReference extends Record(defaultExtDataReferenceRecord) {\n  get reference(): Map<KeyType, ReferenceRecord> {\n    return this.get('reference');\n  }\n\n  getReferenceKeys(topicKey: KeyType): KeyType[] {\n    if (this.reference.has(topicKey)) {\n      return this.reference.get(topicKey).keyList.toArray();\n    }\n    return [];\n  }\n\n  getReferencedKeys(topicKey: KeyType): KeyType[] {\n    const res = [];\n    this.reference.forEach((v, k) => {\n      if (v.keyList.includes(topicKey)) {\n        res.push(k);\n      }\n    });\n    return res;\n  }\n}\n","import { BaseDocModelModifierArg, KeyType } from '@blink-mind/core';\nimport { List } from 'immutable';\nimport { ExtDataReference, ReferenceRecord } from './ext-data-reference';\nimport { EXT_DATA_KEY_TOPIC_REFERENCE } from './utils';\n\n// TODO 能否优化这个函数的写法\nexport function setReferenceTopicKeys({\n  docModel,\n  topicKey,\n  referenceKeys\n}: BaseDocModelModifierArg & { referenceKeys: KeyType[] }) {\n  let extData: ExtDataReference = docModel.getExtDataItem(\n    EXT_DATA_KEY_TOPIC_REFERENCE,\n    ExtDataReference\n  );\n\n  let referenceRecord =\n    extData.reference.get(topicKey) || new ReferenceRecord();\n\n  referenceRecord = referenceRecord.set('keyList', List(referenceKeys));\n  extData = extData.setIn(['reference', topicKey], referenceRecord);\n  docModel = docModel.setIn(['extData', EXT_DATA_KEY_TOPIC_REFERENCE], extData);\n\n  return docModel;\n}\n","import { KeyType } from '@blink-mind/core';\nimport {\n  Alert,\n  BaseProps,\n  getI18nText,\n  I18nKey,\n  PropKey\n} from '@blink-mind/renderer-react';\nimport { Button } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { useState } from 'react';\nimport styled from 'styled-components';\n\nconst Root = styled.div`\n  display: flex;\n  width: 380px;\n  margin: 10px;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst Content = styled.div`\n  width: 300px;\n  text-decoration: underline;\n  cursor: pointer;\n`;\n\nconst ButtonPlace = styled.div`\n  width: 80px;\n`;\n\nexport type ReferenceTopicThumbnailProps = BaseProps & {\n  refKey: KeyType;\n  refType: 'reference' | 'referenced' | undefined | null;\n  removeHandler?: (event: React.MouseEvent<HTMLElement>) => void;\n};\nexport function ReferenceTopicThumbnail(props: ReferenceTopicThumbnailProps) {\n  const { controller, refKey, refType, removeHandler } = props;\n  const [deleteConfirm, setDeleteConfirm] = useState(false);\n  const onClick = e => {\n    e.stopPropagation();\n    controller.run('focusTopicAndMoveToCenter', { ...props, topicKey: refKey });\n  };\n\n  const onClickRemove = e => {\n    setDeleteConfirm(true);\n  };\n\n  const content = controller.getValue(PropKey.TOPIC_TITLE, {\n    ...props,\n    topicKey: refKey,\n    maxLength: 100\n  });\n  const deleteAlertProps = {\n    ...props,\n    isOpen: deleteConfirm,\n    content: getI18nText(props, I18nKey.DELETE_REFERENCE_TIP),\n    onConfirm: e => {\n      removeHandler(e);\n    },\n    onCancel: e => {\n      setDeleteConfirm(false);\n    }\n  };\n  return (\n    <Root>\n      <Content onClick={onClick}>{content}</Content>\n      <ButtonPlace>\n        {refType === 'reference' && (\n          <>\n            <Button onClick={onClickRemove}>\n              {getI18nText(props, I18nKey.REMOVE)}\n            </Button>\n            <Alert {...deleteAlertProps} />\n          </>\n        )}\n      </ButtonPlace>\n    </Root>\n  );\n}\n","import { FocusMode } from '@blink-mind/core';\nimport {\n  BaseProps,\n  COLORS,\n  getI18nText,\n  I18nKey,\n  stopPropagation\n} from '@blink-mind/renderer-react';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { ExtDataReference } from './ext-data-reference';\nimport { ReferenceTopicThumbnail } from './reference-topic-thumbnail';\nimport {\n  EXT_DATA_KEY_TOPIC_REFERENCE,\n  OP_TYPE_SET_REFERENCE_TOPICS\n} from './utils';\nconst Root = styled.div``;\n\nconst Group = styled.div`\n  padding: 10px;\n`;\n\nconst GroupList = styled.div`\n  max-height: 200px;\n  overflow: auto;\n`;\n\nconst GroupTitle = styled.div`\n  font-size: 20px;\n  color: ${COLORS.HIGHLIGHT};\n`;\n\nconst GotoBtn = styled.div`\n  text-decoration: underline;\n  color: ${COLORS.HIGHLIGHT};\n  cursor: pointer;\n`;\n\nexport function ReferenceTopicList(props: BaseProps) {\n  const { topicKey, controller, model, docModel } = props;\n  const extData: ExtDataReference = docModel.extData.get(\n    EXT_DATA_KEY_TOPIC_REFERENCE\n  );\n\n  const removeReference = refKey => e => {\n    e.stopPropagation();\n    const keyList = extData.reference.get(topicKey).keyList;\n    controller.run('operation', {\n      ...props,\n      opArray: [\n        {\n          opType: OP_TYPE_SET_REFERENCE_TOPICS,\n          topicKey: topicKey,\n          focusMode: FocusMode.NORMAL,\n          referenceKeys: keyList.delete(keyList.indexOf(refKey)).toArray()\n        }\n      ]\n    });\n  };\n\n  const referenceKeys = extData.getReferenceKeys(topicKey);\n\n  const referenceGroup =\n    referenceKeys.length === 0 ? null : (\n      <Group>\n        <GroupTitle>\n          {getI18nText(props, I18nKey.REFERENCE_TOPICS) + ':'}\n        </GroupTitle>\n        <GroupList>\n          {referenceKeys.map(key => {\n            const thumbProps = {\n              ...props,\n              key,\n              refKey: key,\n              refType: 'reference',\n              removeHandler: removeReference(key)\n            };\n            //@ts-ignore\n            return <ReferenceTopicThumbnail {...thumbProps} />;\n          })}\n        </GroupList>\n      </Group>\n    );\n\n  const referencedKeys = extData.getReferencedKeys(topicKey);\n\n  const referencedGroup =\n    referencedKeys.length === 0 ? null : (\n      <Group>\n        <GroupTitle>\n          {getI18nText(props, I18nKey.REFERENCED_TOPICS) + ':'}\n        </GroupTitle>\n        <GroupList>\n          {referencedKeys.map(key => {\n            const thumbProps = {\n              ...props,\n              key,\n              refKey: key,\n              refType: 'referenced'\n            };\n            //@ts-ignore\n            return <ReferenceTopicThumbnail {...thumbProps} />;\n          })}\n        </GroupList>\n      </Group>\n    );\n\n  const onClickGotoOriginTopic = e => {\n    e.stopPropagation();\n    controller.run('focusTopicAndMoveToCenter', props);\n  };\n\n  const currentTopic = model.focusKey !== topicKey && (\n    <Group>\n      <GotoBtn onClick={onClickGotoOriginTopic}>\n        {getI18nText(props, I18nKey.GOTO_ORIGINAL_TOPIC)}\n      </GotoBtn>\n    </Group>\n  );\n\n  return (\n    <Root onMouseDown={stopPropagation}>\n      {referenceGroup}\n      {referencedGroup}\n      {currentTopic}\n    </Root>\n  );\n}\n","import {\n  BaseProps,\n  iconClassName,\n  TopicBlockIcon\n} from '@blink-mind/renderer-react';\nimport { Popover, PopoverInteractionKind } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { ExtDataReference } from './ext-data-reference';\nimport { ReferenceTopicList } from './reference-topic-list';\nimport { EXT_DATA_KEY_TOPIC_REFERENCE } from './utils';\n\nexport function TopicExtReference(props: BaseProps) {\n  const { docModel, topicKey } = props;\n  const extData: ExtDataReference = docModel.getExtDataItem(\n    EXT_DATA_KEY_TOPIC_REFERENCE,\n    ExtDataReference\n  );\n  const refRecord = extData.reference.get(topicKey);\n  const referencedKeys = [];\n  extData.reference.forEach((v, k) => {\n    if (v.keyList.includes(topicKey)) referencedKeys.push(k);\n  });\n  if (\n    (refRecord == null || refRecord.keyList.size === 0) &&\n    referencedKeys.length === 0\n  )\n    return null;\n\n  const iconProps = {\n    className: iconClassName('reference'),\n    tabIndex: -1\n  };\n  const icon = <TopicBlockIcon {...iconProps} />;\n  const tooltipContent = <ReferenceTopicList {...props} />;\n  const tooltipProps = {\n    autoFocus: false,\n    content: tooltipContent,\n    target: icon,\n    interactionKind: PopoverInteractionKind.CLICK,\n    hoverOpenDelay: 500\n  };\n  return <Popover {...tooltipProps}></Popover>;\n}\n","import { StyledCheckbox } from '@blink-mind/renderer-react';\nimport * as React from 'react';\n// useState 在vscode 运行报错 https://reactjs.org/docs/error-decoder.html/?invariant=321，\n// 问题原因，在yarn link package的时候，webpack 会打包进去多个 react-dom.js\nimport { useState } from 'react';\nexport function TopicReferenceCheckbox(props) {\n  const { topicKey, selectedTopicKeys } = props;\n  const a = selectedTopicKeys.has(topicKey);\n  const [checked, setChecked] = useState(a);\n  const checkboxProps = {\n    checked,\n    onChange: () => {\n      if (selectedTopicKeys.has(topicKey)) {\n        selectedTopicKeys.delete(topicKey);\n      } else {\n        selectedTopicKeys.add(topicKey);\n      }\n      setChecked(!checked);\n    }\n  };\n  return <StyledCheckbox {...checkboxProps} />;\n}\n","import {\n  BaseDocModelModifierArg,\n  DocModel,\n  getAllSubTopicKeys,\n  IControllerRunContext,\n  OpType,\n  setCurrentSheetModel,\n  SheetModelModifier,\n  toDocModelModifierFunc,\n  ViewModeMindMap\n} from '@blink-mind/core';\nimport {\n  getI18nText,\n  I18nKey,\n  Icon,\n  PropKey\n} from '@blink-mind/renderer-react';\nimport { MenuDivider, MenuItem } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { AddReferenceTopicPanel } from './add-reference-topic-panel';\nimport {\n  EXT_DATA_KEY_TOPIC_REFERENCE,\n  EXT_KEY_TOPIC_REFERENCE,\n  FOCUS_MODE_SET_REFERENCE_TOPICS,\n  OP_TYPE_SET_REFERENCE_TOPICS,\n  OP_TYPE_START_SET_REFERENCE_TOPICS\n} from './utils';\n\nimport { List, Map } from 'immutable';\nimport { ExtDataReference, ReferenceRecord } from './ext-data-reference';\nimport { setReferenceTopicKeys } from './op-function';\nimport { TopicExtReference } from './topic-ext-reference';\nimport { TopicReferenceCheckbox } from './topic-reference-checkbox';\n\nexport function TopicReferencePlugin() {\n  let selectedTopicKeys = new Set();\n  function startSetReferenceTopics({\n    docModel,\n    model,\n    topicKey\n  }: BaseDocModelModifierArg) {\n    const extData: ExtDataReference = docModel.getExtDataItem(\n      EXT_DATA_KEY_TOPIC_REFERENCE,\n      ExtDataReference\n    );\n\n    selectedTopicKeys = new Set(extData.getReferenceKeys(topicKey));\n\n    model = SheetModelModifier.focusTopic({\n      model,\n      topicKey,\n      focusMode: FOCUS_MODE_SET_REFERENCE_TOPICS\n    });\n    docModel = setCurrentSheetModel(docModel, model);\n    return docModel;\n  }\n\n  return {\n    customizeTopicContextMenu(props, next) {\n      const { controller, model } = props;\n      if (model.config.viewMode !== ViewModeMindMap) return next();\n      function onClickSetReferenceTopics(e) {\n        controller.run('operation', {\n          ...props,\n          opType: OP_TYPE_START_SET_REFERENCE_TOPICS\n        });\n        controller.run('disableOperation', {\n          ...props,\n          whiteList: [OpType.TOGGLE_COLLAPSE]\n        });\n      }\n      return (\n        <>\n          {next()}\n          <MenuDivider />\n          <MenuItem\n            key={EXT_KEY_TOPIC_REFERENCE}\n            icon={Icon('reference')}\n            text={getI18nText(props, I18nKey.SET_TOPIC_REFERENCES)}\n            onClick={onClickSetReferenceTopics}\n          />\n        </>\n      );\n    },\n\n    componentAreEqual(ctx, next) {\n      const { prevProps, nextProps } = ctx;\n      const { model: nmodel } = nextProps;\n      const { model } = prevProps;\n      if (\n        nmodel.focusMode !== model.focusMode &&\n        (nmodel.focusMode === FOCUS_MODE_SET_REFERENCE_TOPICS ||\n          model.focusMode === FOCUS_MODE_SET_REFERENCE_TOPICS)\n      )\n        return false;\n      return next();\n    },\n\n    getOpMap(props, next) {\n      const opMap = next();\n      opMap.set(OP_TYPE_START_SET_REFERENCE_TOPICS, startSetReferenceTopics);\n      opMap.set(OP_TYPE_SET_REFERENCE_TOPICS, setReferenceTopicKeys);\n      return opMap;\n    },\n\n    beforeOpFunction(props, next) {\n      let docModel: DocModel = next();\n      const model = docModel.currentSheetModel;\n      const { opType, topicKey } = props;\n      // 注意是在beforeOpFunction里面操作\n      if (\n        opType === OpType.DELETE_TOPIC &&\n        topicKey !== model.editorRootTopicKey\n      ) {\n        const allDeleteKeys = getAllSubTopicKeys(model, topicKey);\n        allDeleteKeys.push(topicKey);\n\n        let extData: ExtDataReference = docModel.getExtDataItem(\n          EXT_DATA_KEY_TOPIC_REFERENCE,\n          ExtDataReference\n        );\n        let reference = extData.reference;\n        // 注意这里要处理所有被删除的Key\n        allDeleteKeys.forEach((deleteKey: KeyType) => {\n          const referencedKeys = extData.getReferencedKeys(deleteKey);\n\n          // 处理被引用的部分\n          reference = reference.withMutations(reference => {\n            referencedKeys.forEach(v => {\n              reference.updateIn([v, 'keyList'], (keyList: List<KeyType>) =>\n                keyList.delete(keyList.indexOf(deleteKey))\n              );\n            });\n          });\n          // 处理引用的部分\n          if (reference.has(deleteKey)) {\n            reference = reference.delete(deleteKey);\n          }\n        });\n\n        extData = extData.set('reference', reference);\n        docModel = docModel.setIn(\n          ['extData', EXT_DATA_KEY_TOPIC_REFERENCE],\n          extData\n        );\n      }\n\n      return docModel;\n    },\n\n    renderSheetCustomize(props: IControllerRunContext, next) {\n      const { model, controller } = props;\n      const zIndex =\n        controller.getValue(PropKey.DIAGRAM_CUSTOMIZE_BASE_Z_INDEX) + 2;\n      const res = next();\n      if (model.focusMode === FOCUS_MODE_SET_REFERENCE_TOPICS) {\n        const panelProps = {\n          ...props,\n          zIndex,\n          topicKey: model.focusKey,\n          key: 'AddReferenceTopicPanel'\n        };\n        res.push(<AddReferenceTopicPanel {...panelProps} />);\n      }\n      return res;\n    },\n\n    renderTopicNodeLastRowOthers(props, next) {\n      const { model, topicKey, controller } = props;\n      const res = next();\n      res.push(\n        controller.run('renderTopicExtReference', {\n          ...props,\n          key: EXT_KEY_TOPIC_REFERENCE + '-icon'\n        })\n      );\n      if (\n        model.focusMode === FOCUS_MODE_SET_REFERENCE_TOPICS &&\n        model.focusKey !== topicKey\n      ) {\n        const checkBoxProps = { ...props, key: 'checkbox', selectedTopicKeys };\n        const checkbox = <TopicReferenceCheckbox {...checkBoxProps} />;\n        res.push(checkbox);\n      }\n      return res;\n    },\n\n    renderTopicExtReference(props, next) {\n      return <TopicExtReference {...props} />;\n    },\n\n    clearSelectedReferenceKeys() {\n      selectedTopicKeys.clear();\n    },\n\n    getSelectedReferenceKeys() {\n      return Array.from(selectedTopicKeys);\n    },\n\n    //TODO\n    deserializeExtDataItem(props, next) {\n      const { extDataKey, extDataItem } = props;\n      if (extDataKey === EXT_DATA_KEY_TOPIC_REFERENCE) {\n        let extDataReference = new ExtDataReference();\n        for (const key in extDataItem.reference) {\n          const item = extDataItem.reference[key];\n          const referenceRecord = new ReferenceRecord({\n            keyList: List(item.keyList),\n            dataMap: Map(item.dataMap)\n          });\n          extDataReference = extDataReference.update('reference', reference =>\n            reference.set(key, referenceRecord)\n          );\n        }\n        return extDataReference;\n      }\n      return next();\n    }\n  };\n}\n","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import { BaseProps, PropKey } from '@blink-mind/renderer-react';\nimport cx from 'classnames';\nimport * as React from 'react';\nimport Highlighter from 'react-highlight-words';\n\nexport interface TopicTitleThumbnailProps extends BaseProps {\n  titleMaxLength?: number;\n  query?: string;\n  usePlainText?: boolean;\n  active?: boolean;\n  sheetId?: string;\n}\n\nexport function TopicTitleThumbnail(props: TopicTitleThumbnailProps) {\n  const {\n    controller,\n    topicKey,\n    sheetId,\n    query,\n    active,\n    usePlainText = true,\n    titleMaxLength = 100,\n    ...restProps\n  } = props;\n  const navigateToTopic = e => {\n    controller.run('focusTopicAndMoveToCenter', {\n      ...props,\n      topicKey,\n      sheetId\n    });\n  };\n  const topicTitle = controller.getValue(PropKey.TOPIC_TITLE, {\n    ...props,\n    usePlainText\n  });\n\n  // const needTip = topicTitle.length > titleMaxLength;\n  // const title = needTip\n  //   ? topicTitle.substr(0, titleMaxLength) + '...'\n  //   : topicTitle;\n  const titleProps = {\n    // ...restProps,\n    key: topicKey,\n    className: cx('bm-topic-title-thumbnail', {\n      'bm-topic-title-thumbnail-active': active\n    }),\n    onClick: navigateToTopic\n  };\n  return (\n    <div {...titleProps}>\n      {query\n        ? Highlighter({ searchWords: [query], textToHighlight: topicTitle })\n        : topicTitle}\n    </div>\n  );\n}\n","export const HOT_KEY_NAME_SEARCH = 'DEFAULT_SEARCH';\nexport const FOCUS_MODE_SEARCH = 'FOCUS_MODE_SEARCH';\nexport const SEARCH_QUERY_TEMP_VALUE_KEY = 'SEARCH_QUERY';\n","import { FocusMode, OpType } from '@blink-mind/core';\nimport {\n  BaseProps,\n  getI18nText,\n  I18nKey,\n  PropKey\n} from '@blink-mind/renderer-react';\nimport { IInputGroupProps, Keys } from '@blueprintjs/core';\nimport { ItemListPredicate, ItemRenderer, Omnibar } from '@blueprintjs/select';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport {\n  TopicTitleThumbnail,\n  TopicTitleThumbnailProps\n} from '../common/components/topic-title-thumbnail';\nimport './search-panel.css';\nimport { SEARCH_QUERY_TEMP_VALUE_KEY } from './utils';\n\nconst NavOmniBar = Omnibar.ofType<INavigationSection>();\n\nconst StyledNavOmniBar = styled(NavOmniBar)`\n  top: 20%;\n  left: 25% !important;\n  width: 50% !important;\n`;\n\nexport interface INavigationSection {\n  topicKey: KeyType;\n  sheetId: KeyType;\n}\n\nexport function SearchPanel(props: BaseProps) {\n  const { docModel, controller } = props;\n  const query = controller.run('getTempValue', {\n    key: SEARCH_QUERY_TEMP_VALUE_KEY\n  });\n  const inputProps: IInputGroupProps = {\n    placeholder: getI18nText(props, I18nKey.SEARCH)\n  };\n  const onClose = () => {\n    controller.run('operation', {\n      ...props,\n      opType: OpType.SET_FOCUS_MODE,\n      focusMode: FocusMode.NORMAL\n    });\n  };\n\n  const getAllSections = () => {\n    const res = [];\n    docModel.sheetModels.forEach(model => {\n      model.topics.forEach((topic, topicKey) => {\n        res.push({\n          topicKey,\n          sheetId: model.id\n        });\n      });\n    });\n    return res;\n  };\n\n  const renderItem: ItemRenderer<INavigationSection> = (\n    section,\n    { handleClick, modifiers, query }\n  ) => {\n    const { topicKey } = section;\n    const thumbnailProps: TopicTitleThumbnailProps = {\n      ...props,\n      ...section,\n      active: modifiers.active,\n      //@ts-ignore\n      onClick: handleClick,\n      query: controller.run('getTempValue', {\n        key: SEARCH_QUERY_TEMP_VALUE_KEY\n      })\n    };\n    return <TopicTitleThumbnail key={topicKey} {...thumbnailProps} />;\n  };\n\n  const itemListPredicate: ItemListPredicate<INavigationSection> = (\n    query,\n    items\n  ) => {\n    controller.run('setTempValue', {\n      key: SEARCH_QUERY_TEMP_VALUE_KEY,\n      value: query\n    });\n    return items.filter(item => {\n      const topicTitle = controller.getValue(PropKey.TOPIC_TITLE, {\n        ...props,\n        ...item\n      });\n      if (topicTitle.trim() === '') {\n        return false;\n      }\n      return topicTitle.toLowerCase().includes(query.toLowerCase());\n    });\n  };\n\n  const items = getAllSections();\n  const onItemSelect = (section: INavigationSection) => {\n    controller.run('focusTopicAndMoveToCenter', {\n      ...props,\n      ...section\n    });\n  };\n  const omniBarProps = {\n    query,\n    inputProps,\n    itemListPredicate,\n    isOpen: true,\n    items: items,\n    itemRenderer: renderItem,\n    onItemSelect,\n    onClose,\n    resetOnSelect: true\n  };\n  return <StyledNavOmniBar {...omniBarProps} />;\n}\n","import { OpType } from '@blink-mind/core';\nimport { IconName, ToolbarItem } from '@blink-mind/renderer-react';\nimport * as React from 'react';\nimport { FOCUS_MODE_SEARCH } from './utils';\n\nexport function ToolbarItemSearch(props) {\n  const onClickSearch = e => {\n    const { controller } = props;\n\n    controller.run('operation', {\n      ...props,\n      opType: OpType.SET_FOCUS_MODE,\n      focusMode: FOCUS_MODE_SEARCH\n    });\n  };\n  return (\n    <ToolbarItem\n      iconName={IconName.SEARCH}\n      iconCxName=\"search\"\n      onClick={onClickSearch}\n      {...props}\n    />\n  );\n}\n","import { OpType } from '@blink-mind/core';\nimport { ElementItemConfigs, HotKeysConfig } from '@blink-mind/renderer-react';\nimport * as React from 'react';\nimport { SearchPanel } from './search-panel';\nimport { ToolbarItemSearch } from './toolbar-item-search';\nimport { FOCUS_MODE_SEARCH, HOT_KEY_NAME_SEARCH } from './utils';\n\nexport function SearchPlugin() {\n  return {\n    customizeHotKeys(props, next): HotKeysConfig {\n      const { controller } = props;\n      const model = controller.model;\n      const hotKeys: HotKeysConfig = next();\n\n      hotKeys.globalHotKeys.set(HOT_KEY_NAME_SEARCH, {\n        label: 'search',\n        combo: 'mod + f',\n        allowInInput: true,\n        onKeyDown: () => {\n          controller.run('operation', {\n            ...props,\n            opType: OpType.FOCUS_TOPIC,\n            topicKey: model.focusKey,\n            focusMode: FOCUS_MODE_SEARCH\n          });\n        }\n      });\n      return hotKeys;\n    },\n\n    customizeToolbar(props, next): ElementItemConfigs {\n      const res: ElementItemConfigs = next();\n      res.push({\n        order: 300,\n        element: ToolbarItemSearch\n      });\n      return res;\n    },\n\n    renderDiagramCustomize(props, next) {\n      const res = next();\n      const { controller } = props;\n      const model = controller.model;\n      if (model.focusMode === FOCUS_MODE_SEARCH) {\n        const searchPanelProps = {\n          key: 'search-panel',\n          ...props\n        };\n        res.push(<SearchPanel {...searchPanelProps} />);\n      }\n      return res;\n    }\n  };\n}\n","import {\n  browserOpenFile,\n  IconName,\n  ToolbarItem\n} from '@blink-mind/renderer-react';\nimport * as React from 'react';\nexport function ToolbarItemOpenFile(props) {\n  const onClickOpenFile = () => {\n    const { controller } = props;\n    browserOpenFile('.json,.blinkmind,.bm').then(txt => {\n      const obj = JSON.parse(txt);\n      const newDocModel = controller.run('deserializeDocModel', {\n        controller,\n        obj\n      });\n      controller.run('openNewDocModel', { ...props, newDocModel });\n    });\n  };\n\n  return (\n    <ToolbarItem\n      iconName={IconName.OPEN_FILE}\n      onClick={onClickOpenFile}\n      {...props}\n    />\n  );\n}\n","import { ElementItemConfigs } from '@blink-mind/renderer-react';\nimport { ToolbarItemOpenFile } from './toolbar-item-openfile';\n\nexport function OpenFilePlugin() {\n  return {\n    customizeToolbar(props, next): ElementItemConfigs {\n      const res: ElementItemConfigs = next();\n      res.push({\n        order: 10,\n        element: ToolbarItemOpenFile\n      });\n      return res;\n    }\n  };\n}\n","import {\n  browserDownloadFile,\n  IconName,\n  ToolbarItem\n} from '@blink-mind/renderer-react';\nimport { Dialog, Menu, MenuDivider, MenuItem } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { useState } from 'react';\n\nexport function ToolbarItemExport(props) {\n  const [showDialog, setShowDialog] = useState(false);\n  const onClickExport = () => {\n    const { controller } = props;\n    const json = controller.run('serializeDocModel', props);\n    const jsonStr = JSON.stringify(json, null, 2);\n    const url = `data:text/plain,${encodeURIComponent(jsonStr)}`;\n    browserDownloadFile(url, 'example.json');\n    setShowDialog(false);\n  };\n  return (\n    <>\n      <ToolbarItem\n        iconName={IconName.EXPORT}\n        onClick={() => setShowDialog(true)}\n        {...props}\n      />\n      <Dialog\n        onClose={() => {\n          setShowDialog(false);\n        }}\n        isOpen={showDialog}\n        autoFocus\n        enforceFocus\n        usePortal\n        title=\"Please select export file format\"\n      >\n        <Menu>\n          <MenuItem text=\"JSON(.json)\" onClick={onClickExport} />\n          <MenuDivider />\n        </Menu>\n      </Dialog>\n    </>\n  );\n}\n","import { ElementItemConfigs } from '@blink-mind/renderer-react';\nimport { ToolbarItemExport } from './toolbar-item-export';\n\nexport function ExportFilePlugin() {\n  return {\n    customizeToolbar(props, next): ElementItemConfigs {\n      const res: ElementItemConfigs = next();\n      res.push({\n        order: 20,\n        element: ToolbarItemExport\n      });\n      return res;\n    }\n  };\n}\n","import {\n  ElementItemConfigs,\n  IconName,\n  ToolbarGroupItem,\n  ToolbarItem\n} from '@blink-mind/renderer-react';\nimport * as React from 'react';\n\nexport function ToolbarGroupItemUndoRedo(props) {\n  const { controller } = props;\n  const onClickUndo = () => {\n    controller.run('undo', props);\n  };\n  const onClickRedo = () => {\n    controller.run('redo', props);\n  };\n  const canUndo = controller.run('canUndo', props);\n  const canRedo = controller.run('canRedo', props);\n  const undoProps = {\n    ...props,\n    key: 'undo',\n    iconName: IconName.UNDO,\n    disabled: !canUndo,\n    onClick: onClickUndo\n  };\n\n  const redoProps = {\n    ...props,\n    key: 'redo',\n    iconName: IconName.REDO,\n    disabled: !canRedo,\n    onClick: onClickRedo\n  };\n\n  return <ToolbarGroupItem items={[undoProps, redoProps]} />;\n}\n\nexport function ToolbarItemUndo(props) {\n  const { controller } = props;\n  const onClickUndo = () => {\n    controller.run('undo', props);\n  };\n  const canUndo = controller.run('canUndo', props);\n  return (\n    <ToolbarItem\n      iconName={IconName.UNDO}\n      disabled={!canUndo}\n      onClick={onClickUndo}\n      {...props}\n    />\n  );\n}\n\nexport function ToolbarItemRedo(props) {\n  const { controller } = props;\n  const onClickRedo = () => {\n    controller.run('redo', props);\n  };\n  const canUndo = controller.run('canRedo', props);\n  return (\n    <ToolbarItem\n      iconName={IconName.REDO}\n      disabled={!canUndo}\n      onClick={onClickRedo}\n      {...props}\n    />\n  );\n}\n\nexport function UndoRedoPlugin() {\n  return {\n    customizeToolbar(props, next): ElementItemConfigs {\n      const res: ElementItemConfigs = next();\n      res.push(\n        {\n          order: 200,\n          element: ToolbarItemUndo\n        },\n        {\n          order: 210,\n          element: ToolbarItemRedo\n        }\n      );\n      return res;\n    }\n  };\n}\n","import { List, Map, Record } from 'immutable';\ntype TagRecordType = {\n  name: string;\n  style: string;\n  topicKeys: List<KeyType>;\n};\n\nconst defaultTagRecord: TagRecordType = {\n  name: null,\n  style: null,\n  topicKeys: List()\n};\n\nexport class TagRecord extends Record(defaultTagRecord) {\n  get name(): string {\n    return this.get('name');\n  }\n\n  get style(): string {\n    return this.get('style');\n  }\n\n  get topicKeys(): List<KeyType> {\n    return this.get('topicKeys');\n  }\n}\n\ntype ExtDataTagsRecordType = {\n  tags: Map<string, TagRecord>;\n};\n\nconst defaultExtDataTagsRecord: ExtDataTagsRecordType = {\n  tags: Map()\n};\n\nexport class ExtDataTags extends Record(defaultExtDataTagsRecord) {\n  get tags(): Map<string, TagRecord> {\n    return this.get('tags');\n  }\n\n  getTopicTags(topicKey): Array<TagRecord> {\n    const res = [];\n    this.tags.forEach(v => {\n      v.topicKeys.includes(topicKey) && res.push(v);\n    });\n    return res;\n  }\n}\n","export const OP_TYPE_ADD_TAG = 'OP_TYPE_ADD_TAG';\nexport const OP_TYPE_DELETE_TAG = 'OP_TYPE_DELETE_TAG';\nexport const OP_TYPE_UPDATE_TAG = 'OP_TYPE_UPDATE_TAG';\nexport const OP_TYPE_ADD_TOPIC_TAG = 'OP_TYPE_ADD_TOPIC_TAG';\nexport const OP_TYPE_REMOVE_TOPIC_TAG = 'OP_TYPE_REMOVE_TOPIC_TAG';\nexport const TAG_NAME_MAX_LEN = 50;\nexport const EXT_DATA_KEY_TAGS = 'TAGS';\nexport const EXT_KEY_TAGS = 'EXT_KEY_TAGS';\n","import {\n  BaseProps,\n  getI18nText,\n  I18nKey,\n  SettingItemButton,\n  SettingItemColorPicker,\n  SettingItemColorPickerProps,\n  SettingItemInput,\n  SettingItemInputProps,\n  SettingRow\n} from '@blink-mind/renderer-react';\nimport { Alert } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { useState } from 'react';\nimport { ExtDataTags, TagRecord } from '../ext-data-tags';\nimport { EXT_DATA_KEY_TAGS, OP_TYPE_ADD_TAG, TAG_NAME_MAX_LEN } from '../utils';\n\nexport function AddTagWidget(props: BaseProps) {\n  const [tagName, setTagName] = useState('');\n  const [background, setBackground] = useState('grey');\n  const [color, setColor] = useState('black');\n  const [showAlert, setShowAlert] = useState(false);\n  const [alertTitle, setAlertTitle] = useState('');\n\n  const { controller, docModel } = props;\n  const handleTagNameChange = e => {\n    setTagName(e.target.value);\n  };\n  const nameProps: SettingItemInputProps = {\n    title: getI18nText(props, I18nKey.TAG_NAME) + ':',\n    value: tagName,\n    onChange: handleTagNameChange,\n    style: {\n      width: 100\n    }\n  };\n  const nameItem = <SettingItemInput {...nameProps} />;\n  const bgColorProps: SettingItemColorPickerProps = {\n    title: getI18nText(props, I18nKey.BACKGROUND) + ':',\n    color: background,\n    handleColorChange: color => {\n      setBackground(color);\n    }\n  };\n  const bgColorItem = <SettingItemColorPicker {...bgColorProps} />;\n\n  const colorProps: SettingItemColorPickerProps = {\n    title: getI18nText(props, I18nKey.COLOR) + ':',\n    color: color,\n    handleColorChange: color => {\n      setColor(color);\n    }\n  };\n\n  const colorItem = <SettingItemColorPicker {...colorProps} />;\n\n  const extData = docModel.getExtDataItem(EXT_DATA_KEY_TAGS, ExtDataTags);\n  const disabled = extData.tags.has(tagName) || tagName.trim() === '';\n  const getTagStyle = () => {\n    const style = {\n      backgroundColor: background,\n      color\n    };\n    return JSON.stringify(style);\n  };\n  const addTagBtnProps = {\n    title: getI18nText(props, I18nKey.ADD_TAG),\n    disabled,\n    onClick: () => {\n      if (tagName.trim().length > TAG_NAME_MAX_LEN) {\n        setShowAlert(true);\n        setAlertTitle(getI18nText(props, I18nKey.TAG_NAME_OVER_MAX_TIP));\n        return;\n      }\n      const tag = new TagRecord({\n        name: tagName.trim(),\n        style: getTagStyle()\n      });\n      controller.run('operation', {\n        ...props,\n        opType: OP_TYPE_ADD_TAG,\n        tag\n      });\n    }\n  };\n\n  const alertProps = {\n    isOpen: showAlert,\n\n    onClose: e => {\n      setShowAlert(false);\n    }\n  };\n  const alert = showAlert && (\n    <Alert {...alertProps}>\n      <p>{alertTitle}</p>\n    </Alert>\n  );\n  const addTagBtn = <SettingItemButton {...addTagBtnProps} />;\n  return (\n    <SettingRow>\n      {nameItem}\n      {bgColorItem}\n      {colorItem}\n      {addTagBtn}\n      {alert}\n    </SettingRow>\n  );\n}\n","import { Tag } from '@blueprintjs/core';\nimport styled from 'styled-components';\n\nexport const StyledTag = styled(Tag)`\n  margin: 0 10px 0 0;\n`;\n","import {\n  BaseProps,\n  getI18nText,\n  I18nKey,\n  SettingBoxContainer,\n  SettingTitle,\n  VListContainer\n} from '@blink-mind/renderer-react';\nimport * as React from 'react';\nimport {\n  TopicTitleThumbnail,\n  TopicTitleThumbnailProps\n} from '../../common/components/topic-title-thumbnail';\nimport { TagRecord } from '../ext-data-tags';\n\nexport interface TagTopicListProps extends BaseProps {\n  tag: TagRecord;\n}\nexport function TagTopicList(props: TagTopicListProps) {\n  const { docModel, tag } = props;\n  const topicList = tag.topicKeys.map(topicKey => {\n    const sheetId = docModel.getSheetIdThatContainsTopic(topicKey);\n    const thumbnailProps: TopicTitleThumbnailProps = {\n      ...props,\n      sheetId,\n      topicKey\n    };\n    return <TopicTitleThumbnail key={topicKey} {...thumbnailProps} />;\n  });\n  return (\n    <>\n      <SettingTitle>\n        {getI18nText(props, I18nKey.TOPICS_THAT_USE_THIS_TAG)}\n      </SettingTitle>\n      <SettingBoxContainer style={{ width: '500px' }}>\n        <VListContainer>{topicList}</VListContainer>\n      </SettingBoxContainer>\n    </>\n  );\n}\n","import {\n  BaseProps,\n  getI18nText,\n  I18nKey,\n  SettingItemButton,\n  SettingItemColorPicker,\n  SettingItemColorPickerProps,\n  SettingItemInput,\n  SettingItemInputProps,\n  SettingRow\n} from '@blink-mind/renderer-react';\nimport * as React from 'react';\nimport { useState } from 'react';\nimport { ExtDataTags, TagRecord } from '../ext-data-tags';\nimport {\n  EXT_DATA_KEY_TAGS,\n  OP_TYPE_UPDATE_TAG,\n  TAG_NAME_MAX_LEN\n} from '../utils';\n\nexport interface UpdateTagWidgetProps extends BaseProps {\n  tag: TagRecord;\n}\n\nexport function UpdateTagWidget(props: UpdateTagWidgetProps) {\n  const { controller, docModel, tag } = props;\n  const style = JSON.parse(tag.style);\n  const [tagName, setTagName] = useState(tag.name);\n  const [background, setBackground] = useState(style.backgroundColor);\n  const [color, setColor] = useState(style.color);\n\n  const handleTagNameChange = e => {\n    setTagName(e.target.value);\n  };\n  const nameProps: SettingItemInputProps = {\n    title: getI18nText(props, I18nKey.TAG_NAME) + ':',\n    value: tagName,\n    onChange: handleTagNameChange,\n    style: {\n      width: 100\n    }\n  };\n  const nameItem = <SettingItemInput {...nameProps} />;\n  const bgColorProps: SettingItemColorPickerProps = {\n    title: getI18nText(props, I18nKey.BACKGROUND) + ':',\n    color: background,\n    handleColorChange: color => {\n      setBackground(color);\n    }\n  };\n  const bgColorItem = <SettingItemColorPicker {...bgColorProps} />;\n\n  const colorProps: SettingItemColorPickerProps = {\n    title: getI18nText(props, I18nKey.COLOR) + ':',\n    color: color,\n    handleColorChange: color => {\n      setColor(color);\n    }\n  };\n\n  const colorItem = <SettingItemColorPicker {...colorProps} />;\n\n  const extData = docModel.getExtDataItem(EXT_DATA_KEY_TAGS, ExtDataTags);\n  const trimTagName = tagName.trim();\n  const disabled =\n    (extData.tags.has(trimTagName) && trimTagName !== tag.name) ||\n    trimTagName === '' ||\n    trimTagName.length > TAG_NAME_MAX_LEN;\n  const getTagStyle = () => {\n    const style = {\n      backgroundColor: background,\n      color\n    };\n    return JSON.stringify(style);\n  };\n  const btnProps = {\n    title: getI18nText(props, I18nKey.UPDATE_TAG),\n    disabled,\n    onClick: () => {\n      const newTag = new TagRecord({\n        name: trimTagName,\n        style: getTagStyle(),\n        topicKeys: tag.topicKeys\n      });\n      controller.run('operation', {\n        ...props,\n        opType: OP_TYPE_UPDATE_TAG,\n        oldTagName: tag.name,\n        newTag: newTag\n      });\n    }\n  };\n\n  const btn = <SettingItemButton {...btnProps} />;\n  return (\n    <SettingRow>\n      {nameItem}\n      {bgColorItem}\n      {colorItem}\n      {btn}\n    </SettingRow>\n  );\n}\n","import { BaseProps } from '@blink-mind/renderer-react';\nimport {\n  ContextMenu,\n  ContextMenuTarget,\n  Divider,\n  Menu\n} from '@blueprintjs/core';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { TagRecord } from '../ext-data-tags';\nimport { StyledTag } from './styled';\nimport { TagTopicList } from './tag-topic-list';\nimport { UpdateTagWidget } from './update-tag-widget';\n\nexport interface TagWidgetProps extends BaseProps {\n  isTopicTag?: boolean;\n  tag: TagRecord;\n  large?: boolean;\n  clickToUpdate?: boolean;\n  onClick?: (tag: TagRecord) => (e) => void;\n  onRemove?: (tag: TagRecord) => (e) => void;\n}\n@ContextMenuTarget\nexport class TagWidget extends React.PureComponent<TagWidgetProps> {\n  constructor(props) {\n    super(props);\n  }\n  public renderContextMenu() {\n    const props = this.props;\n    return props.isTopicTag ? null : (\n      <Menu>\n        <UpdateTagWidget {...props} />\n        <Divider />\n        <TagTopicList {...props} />\n      </Menu>\n    );\n  }\n\n  onClickUpdateTag = e => {};\n\n  handleClick = e => {\n    const { onClick, tag, clickToUpdate } = this.props;\n    onClick && onClick(tag)(e);\n    if (clickToUpdate) {\n      const contextMenu = (\n        <Menu>\n          <UpdateTagWidget {...this.props} />\n          <Divider />\n          <TagTopicList {...this.props} />\n        </Menu>\n      );\n      ContextMenu.show(contextMenu, { left: e.clientX, top: e.clientY });\n    }\n  };\n\n  render() {\n    const { tag, large = true, onRemove } = this.props;\n\n    const tagProps = {\n      key: tag.name,\n      style: JSON.parse(tag.style),\n      // onClick: onClick ? onClick(tag) : null,\n      onClick: this.handleClick,\n      onRemove: onRemove ? onRemove(tag) : null,\n      interactive: true,\n      large\n    };\n    return <StyledTag {...tagProps}>{tag.name}</StyledTag>;\n  }\n}\n\nconst TagWidgetWrapper = styled.div`\n  display: inline-block;\n  margin-bottom: 10px;\n`;\n\nexport function StyledTagWidget(props) {\n  return (\n    <TagWidgetWrapper>\n      <TagWidget {...props} />\n    </TagWidgetWrapper>\n  );\n}\n","import {\n  Alert,\n  BaseProps,\n  getI18nText,\n  I18nKey,\n  SettingBoxContainer\n} from '@blink-mind/renderer-react';\nimport * as React from 'react';\nimport { useState } from 'react';\nimport { ExtDataTags, TagRecord } from '../ext-data-tags';\nimport { EXT_DATA_KEY_TAGS, OP_TYPE_DELETE_TAG } from '../utils';\nimport { StyledTagWidget as TagWidget, TagWidgetProps } from './tag-widget';\n\nlet currentTag: TagRecord;\nexport function AllTagsWidget(props: BaseProps) {\n  const [showAlert, setShowAlert] = useState(false);\n  const { controller, docModel } = props;\n  const extData = docModel.getExtDataItem(EXT_DATA_KEY_TAGS, ExtDataTags);\n  if (extData.tags.size === 0) return null;\n  const tags = extData.tags.toArray().map(([name, tag]) => {\n    const tagProps: TagWidgetProps = {\n      ...props,\n      key: name,\n      clickToUpdate: true,\n      tag,\n      onClick: tag => e => {\n        currentTag = tag;\n      },\n      onRemove: tag => e => {\n        currentTag = tag;\n        setShowAlert(true);\n      }\n    };\n    return <TagWidget {...tagProps} />;\n  });\n  const alertProps = {\n    ...props,\n    isOpen: showAlert,\n    content: getI18nText(props, I18nKey.DELETE_TAG_TIP),\n    onConfirm: e => {\n      controller.run('operation', {\n        ...props,\n        opType: OP_TYPE_DELETE_TAG,\n        tagName: currentTag.name\n      });\n      currentTag = null;\n      setShowAlert(false);\n    },\n\n    onCancel: e => {\n      setShowAlert(false);\n    }\n  };\n  return (\n    <>\n      <SettingBoxContainer>{tags}</SettingBoxContainer>\n      <Alert {...alertProps} />\n    </>\n  );\n}\n","import {\n  BaseProps,\n  getI18nText,\n  I18nKey,\n  SettingBoxContainer,\n  SettingGroup,\n  SettingTitle\n} from '@blink-mind/renderer-react';\nimport * as React from 'react';\nimport { TagRecord } from '../ext-data-tags';\nimport { OP_TYPE_ADD_TOPIC_TAG, OP_TYPE_REMOVE_TOPIC_TAG } from '../utils';\nimport { StyledTagWidget as TagWidget } from './tag-widget';\n\nexport function TopicTagsWidget(props: BaseProps) {\n  const { controller } = props;\n  const topicTags: TagRecord[] = controller.run('getTopicTags', props);\n  const tagsCanBeAdded: TagRecord[] = controller.run(\n    'getTopicTagsCanBeAdded',\n    props\n  );\n  const topicTagsWidget = topicTags.map(tag => {\n    const tagProps = {\n      ...props,\n      isTopicTag: true,\n      tag,\n      onRemove: (tag: TagRecord) => e => {\n        controller.run('operation', {\n          ...props,\n          opType: OP_TYPE_REMOVE_TOPIC_TAG,\n          tagName: tag.name\n        });\n      }\n    };\n    return <TagWidget key={tag.name} {...tagProps} />;\n  });\n\n  const tagsCanBeAddedWidget = tagsCanBeAdded.map(tag => {\n    const tagProps = {\n      ...props,\n      isTopicTag: true,\n      tag,\n      onClick: (tag: TagRecord) => e => {\n        controller.run('operation', {\n          ...props,\n          opType: OP_TYPE_ADD_TOPIC_TAG,\n          tagName: tag.name\n        });\n      }\n    };\n    return <TagWidget key={tag.name} {...tagProps} />;\n  });\n  return (\n    <>\n      <SettingGroup>\n        <SettingTitle>{getI18nText(props, I18nKey.ALREADY_ADDED)}</SettingTitle>\n        <SettingBoxContainer>{topicTagsWidget}</SettingBoxContainer>\n      </SettingGroup>\n\n      <SettingGroup>\n        <SettingTitle>{getI18nText(props, I18nKey.CAN_BE_ADDED)}</SettingTitle>\n        <SettingBoxContainer>{tagsCanBeAddedWidget}</SettingBoxContainer>\n      </SettingGroup>\n    </>\n  );\n}\n","import {\n  getI18nText,\n  I18nKey,\n  PanelTabRoot,\n  SettingBoxContainer,\n  SettingTitle\n} from '@blink-mind/renderer-react';\nimport * as React from 'react';\nimport { AddTagWidget } from './add-tag-widget';\nimport { AllTagsWidget } from './all-tags-widget';\nimport { TopicTagsWidget } from './topic-tags-widget';\nexport function TagEditor(props) {\n  return (\n    <PanelTabRoot>\n      <SettingBoxContainer>\n        <SettingTitle>{getI18nText(props, I18nKey.TAGS_MANAGER)}</SettingTitle>\n        <AddTagWidget {...props} />\n        <AllTagsWidget {...props} />\n      </SettingBoxContainer>\n      <SettingBoxContainer>\n        <TopicTagsWidget {...props} />\n      </SettingBoxContainer>\n    </PanelTabRoot>\n  );\n}\n","import { BaseDocModelModifierArg } from '@blink-mind/core';\nimport { List } from 'immutable';\nimport { ExtDataTags, TagRecord } from './ext-data-tags';\nimport { EXT_DATA_KEY_TAGS } from './utils';\n\nexport function addNewTag({\n  docModel,\n  tag\n}: BaseDocModelModifierArg & { tag: TagRecord }) {\n  let extData: ExtDataTags = docModel.getExtDataItem(\n    EXT_DATA_KEY_TAGS,\n    ExtDataTags\n  );\n\n  if (extData.tags.has(tag.name)) {\n    return docModel;\n  }\n  extData = extData.update('tags', tags => tags.set(tag.name, tag));\n  docModel = docModel.setIn(['extData', EXT_DATA_KEY_TAGS], extData);\n  return docModel;\n}\n\nexport function deleteTag({\n  docModel,\n  tagName\n}: BaseDocModelModifierArg & { tagName: string }) {\n  let extData: ExtDataTags = docModel.getExtDataItem(\n    EXT_DATA_KEY_TAGS,\n    ExtDataTags\n  );\n\n  if (!extData.tags.has(tagName)) {\n    return docModel;\n  }\n  extData = extData.update('tags', tags => tags.delete(tagName));\n  docModel = docModel.setIn(['extData', EXT_DATA_KEY_TAGS], extData);\n  return docModel;\n}\n\nexport function updateTag({\n  docModel,\n  oldTagName,\n  newTag\n}: BaseDocModelModifierArg & { oldTagName: string; newTag: TagRecord }) {\n  let extData: ExtDataTags = docModel.getExtDataItem(\n    EXT_DATA_KEY_TAGS,\n    ExtDataTags\n  );\n  extData = extData.update('tags', tags =>\n    tags.delete(oldTagName).set(newTag.name, newTag)\n  );\n  docModel = docModel.setIn(['extData', EXT_DATA_KEY_TAGS], extData);\n  return docModel;\n}\n\nexport function addTopicTag({\n  docModel,\n  topicKey,\n  tagName\n}: BaseDocModelModifierArg & {\n  tagName: string;\n}) {\n  let extData = docModel.getExtDataItem(EXT_DATA_KEY_TAGS, ExtDataTags);\n  extData = extData.updateIn(\n    ['tags', tagName, 'topicKeys'],\n    (topicKeys: List<KeyType>) =>\n      // @ts-ignore\n      topicKeys.push(topicKey)\n  );\n  docModel = docModel.setIn(['extData', EXT_DATA_KEY_TAGS], extData);\n  return docModel;\n}\n\nexport function removeTopicTag({\n  docModel,\n  topicKey,\n  tagName\n}: BaseDocModelModifierArg & {\n  tagName: string;\n}) {\n  let extData = docModel.getExtDataItem(EXT_DATA_KEY_TAGS, ExtDataTags);\n  extData = extData.updateIn(\n    ['tags', tagName, 'topicKeys'],\n    (topicKeys: List<KeyType>) =>\n      // @ts-ignore\n      topicKeys.delete(topicKeys.indexOf(topicKey))\n  );\n  docModel = docModel.setIn(['extData', EXT_DATA_KEY_TAGS], extData);\n  return docModel;\n}\n\nexport function getTopicTagNames({ docModel, topicKey }): string[] {\n  const extData = docModel.getExtDataItem(EXT_DATA_KEY_TAGS, ExtDataTags);\n  const res = [];\n  extData.tags.forEach(v => {\n    if (v.topicKeys.includes(topicKey)) {\n      res.push(v.name);\n    }\n  });\n  return res;\n}\n","import { getI18nText, I18nKey } from '@blink-mind/renderer-react';\nimport * as React from 'react';\nimport { TagEditor } from './components/tag-editor';\n\nimport { Tab } from '@blueprintjs/core';\nimport {\n  addNewTag,\n  addTopicTag,\n  deleteTag,\n  removeTopicTag,\n  updateTag\n} from './op-function';\nimport {\n  EXT_DATA_KEY_TAGS,\n  EXT_KEY_TAGS,\n  OP_TYPE_ADD_TAG,\n  OP_TYPE_ADD_TOPIC_TAG,\n  OP_TYPE_DELETE_TAG,\n  OP_TYPE_REMOVE_TOPIC_TAG,\n  OP_TYPE_UPDATE_TAG\n} from './utils';\n\nimport { IControllerRunContext } from '@blink-mind/core';\nimport { BaseProps } from '@blink-mind/renderer-react';\nimport { List } from 'immutable';\nimport { TagWidget, TagWidgetProps } from './components/tag-widget';\nimport { ExtDataTags, TagRecord } from './ext-data-tags';\n\nexport function TagsPlugin() {\n  const tabId = 'tags-editor';\n  return {\n    componentAreEqual(\n      ctx: { prevProps: BaseProps; nextProps: BaseProps },\n      next\n    ) {\n      const { docModel } = ctx.prevProps;\n      const { docModel: nDocModel, topicKey } = ctx.nextProps;\n      const extData: ExtDataTags = docModel.extData.get(EXT_DATA_KEY_TAGS);\n      const nExtData: ExtDataTags = nDocModel.extData.get(EXT_DATA_KEY_TAGS);\n      if (extData !== nExtData) {\n        // console.log('extData !== nExtData');\n        if (extData && extData.getTopicTags(topicKey).length) {\n          return false;\n        }\n        if (nExtData && nExtData.getTopicTags(topicKey).length) {\n          return false;\n        }\n      }\n      return next();\n    },\n    renderRightTopPanelTabs(props, next) {\n      const res = next();\n      const tProps = {\n        id: tabId,\n        key: tabId,\n        title: getI18nText(props, I18nKey.TAGS),\n        panel: <TagEditor {...props} />\n      };\n      const tab = <Tab {...tProps} />;\n      res.push(tab);\n      return res;\n    },\n    getOpMap(props, next) {\n      const opMap = next();\n      opMap.set(OP_TYPE_ADD_TAG, addNewTag);\n      opMap.set(OP_TYPE_DELETE_TAG, deleteTag);\n      opMap.set(OP_TYPE_UPDATE_TAG, updateTag);\n      opMap.set(OP_TYPE_ADD_TOPIC_TAG, addTopicTag);\n      opMap.set(OP_TYPE_REMOVE_TOPIC_TAG, removeTopicTag);\n      return opMap;\n    },\n\n    topicExtDataToJson(ctx, next) {\n      const { docModel, topicKey } = ctx;\n      const res = next();\n      const extData = docModel.getExtDataItem(EXT_DATA_KEY_TAGS, ExtDataTags);\n      const tags = [];\n      extData.tags.forEach((v, k) => {\n        if (v.topicKeys.includes(topicKey)) {\n          tags.push({\n            name: v.name,\n            style: v.style\n          });\n        }\n      });\n      res[EXT_DATA_KEY_TAGS] = tags;\n      return res;\n    },\n\n    processTopicExtData(ctx, next) {\n      let extData = next();\n      let { topic } = ctx;\n      if (topic.extData[EXT_DATA_KEY_TAGS]) {\n        if (!extData.has(EXT_DATA_KEY_TAGS)) {\n          let extDataTags = new ExtDataTags();\n          extData = extData.set(EXT_DATA_KEY_TAGS, extDataTags);\n        }\n        let list = List();\n        for (let tag of topic.extData[EXT_DATA_KEY_TAGS]) {\n          extData = extData.updateIn([EXT_DATA_KEY_TAGS, 'tags'], tags => {\n            return tags.has(tag.name)\n              ? tags.updateIn([tag.name, 'topicKeys'], topicKeys =>\n                  topicKeys.push(topic.key)\n                )\n              : tags.set(\n                  tag.name,\n                  new TagRecord({\n                    name: tag.name,\n                    style: tag.style,\n                    topicKeys: List([topic.key])\n                  })\n                );\n          });\n        }\n      }\n      return extData;\n    },\n\n    renderTopicNodeLastRowOthers(props, next) {\n      const { controller } = props;\n      const res = next();\n      res.push(\n        controller.run('renderTopicExtTag', {\n          ...props,\n          key: EXT_KEY_TAGS\n        })\n      );\n      return res;\n    },\n\n    renderTopicExtTag(props) {\n      const { controller, diagramState, setDiagramState } = props;\n      const tags: TagRecord[] = controller.run('getTopicTags', props);\n      const tagsWidget = tags.map(tag => {\n        const tagProps: TagWidgetProps = {\n          ...props,\n          key: tag.name,\n          clickToUpdate: true,\n          onClick: () => e => {\n            setDiagramState({\n              rightTopPanel: {\n                ...diagramState.rightTopPanel,\n                isOpen: true,\n                selectedTabId: tabId\n              }\n            });\n            controller.run('setRightTopPanelProps', {\n              ...props,\n              value: {\n                isOpen: true,\n                selectedTabId: tabId\n              }\n            });\n          },\n          isTopicTag: true,\n          large: false,\n          tag\n        };\n        return <TagWidget {...tagProps} />;\n      });\n      return tagsWidget;\n    },\n\n    //TODO\n    deserializeExtDataItem(props, next) {\n      const { extDataKey, extDataItem } = props;\n      if (extDataKey === EXT_DATA_KEY_TAGS) {\n        let extDataTags = new ExtDataTags();\n        for (const key in extDataItem.tags) {\n          const item = extDataItem.tags[key];\n          const { name, style, topicKeys } = item;\n          const record = new TagRecord({\n            name,\n            style,\n            topicKeys: List(topicKeys)\n          });\n          extDataTags = extDataTags.update('tags', tags =>\n            tags.set(key, record)\n          );\n        }\n        return extDataTags;\n      }\n      return next();\n    },\n\n    getTopicTags(props: IControllerRunContext): TagRecord[] {\n      const { docModel, topicKey } = props;\n      const extData = docModel.getExtDataItem(EXT_DATA_KEY_TAGS, ExtDataTags);\n      const res = [];\n      extData.tags.forEach(v => {\n        if (v.topicKeys.includes(topicKey)) {\n          res.push(v);\n        }\n      });\n      return res;\n    },\n    getTopicTagsCanBeAdded(props: IControllerRunContext) {\n      const { docModel, topicKey } = props;\n      const extData = docModel.getExtDataItem(EXT_DATA_KEY_TAGS, ExtDataTags);\n      const res = [];\n      extData.tags.forEach(v => {\n        if (!v.topicKeys.includes(topicKey)) {\n          res.push(v);\n        }\n      });\n      return res;\n    }\n  };\n}\n","import { ThemeType } from '@blink-mind/core';\n\nexport const darkTheme1: ThemeType = {\n  name: 'dark-theme1',\n  randomColor: false,\n  background: '#2f2f2f',\n  highlightColor: '#C31004',\n  marginH: 50,\n  marginV: 5,\n  contentStyle: {\n    lineHeight: '1'\n  },\n\n  linkStyle: {\n    lineRadius: 5,\n    lineWidth: '2px',\n    lineColor: '#595959',\n    lineType: 'curve'\n  },\n\n  rootTopic: {\n    contentStyle: {\n      background: '#C31004',\n      color: '#fff',\n      fontSize: '34px',\n      borderRadius: '5px',\n      padding: '16px 18px 16px 18px'\n    },\n    subLinkStyle: {\n      lineType: 'curve'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      background: 'rgba(100,100,100,1)',\n      borderRadius: '5px',\n      color: '#fff',\n      fontSize: '14px',\n      padding: '6px 10px 5px 10px'\n    },\n\n    subLinkStyle: {\n      hasUnderline: true,\n      lineType: 'round'\n    }\n  },\n\n  normalTopic: {\n    contentStyle: {\n      borderRadius: '5px',\n      background: '#fff0',\n      color: '#fff',\n      fontSize: '13px',\n      padding: '1px'\n    },\n\n    subLinkStyle: {\n      hasUnderline: true,\n      lineType: 'round'\n    }\n  }\n};\n","import { ThemeType } from '@blink-mind/core';\n\nexport const themeRandomColorSquare: ThemeType = {\n  name: 'random-color-square',\n  randomColor: true,\n  background: 'rgb(57,60,65)',\n  highlightColor: '#50C9CE',\n  marginH: 60,\n  marginV: 20,\n\n  contentStyle: {\n    lineHeight: '1.5',\n    fontSize: '16px'\n  },\n\n  linkStyle: {\n    lineRadius: 5,\n    lineType: 'curve',\n    lineWidth: '3px'\n  },\n\n  rootTopic: {\n    contentStyle: {\n      fontSize: '36px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '3px'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      fontSize: '24px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '3px'\n    }\n  },\n\n  normalTopic: {\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '3px'\n    }\n  }\n};\n","import { ThemeType } from '@blink-mind/core';\n\nexport const themeRandomColorRound: ThemeType = {\n  name: 'random-color-round',\n  randomColor: true,\n  background: 'rgb(57,60,65)',\n  highlightColor: '#50C9CE',\n  marginH: 60,\n  marginV: 20,\n\n  contentStyle: {\n    lineHeight: '1.5',\n    color: '#262626'\n  },\n\n  linkStyle: {\n    lineRadius: 5,\n    lineType: 'curve',\n    lineWidth: '3px'\n  },\n\n  rootTopic: {\n    contentStyle: {\n      fontSize: '34px',\n      borderRadius: '35px',\n      padding: '5px 10px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '3px',\n      lineColor: 'rgb(113, 203, 45)'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderRadius: '10px',\n      fontSize: '20px',\n      padding: '0px 5px'\n    },\n\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '2px',\n      lineColor: 'rgb(113, 203, 45)'\n    }\n  },\n\n  normalTopic: {\n    contentStyle: {\n      borderRadius: '10px',\n      fontSize: '13px',\n      padding: '0'\n    },\n\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '2px',\n      lineColor: 'white'\n    }\n  }\n};\n","import { ThemeType } from '@blink-mind/core';\n\nexport const theme1: ThemeType = {\n  name: 'theme1',\n  randomColor: false,\n  background: 'rgb(250,245,205)',\n  highlightColor: '#50C9CE',\n  marginH: 50,\n  marginV: 5,\n\n  contentStyle: {\n    lineHeight: '1.5'\n  },\n\n  linkStyle: {\n    lineRadius: 5,\n    lineType: 'curve'\n  },\n  rootTopic: {\n    contentStyle: {\n      background: 'rgb(221, 170, 68)',\n      color: '#fff',\n      fontSize: '34px',\n      borderRadius: '5px',\n      padding: '16px 18px 16px 18px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '2px',\n      lineColor: 'rgb(221, 170, 68)'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      background: '#e8eaec',\n      color: '#333',\n      borderWidth: '2px',\n      borderStyle: 'solid',\n      borderColor: 'rgb(221, 170, 68)',\n      borderRadius: '5px',\n      fontSize: '17px',\n      padding: '0px 5px'\n    },\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '2px',\n      lineColor: 'rgb(221, 170, 68)'\n    }\n  },\n\n  normalTopic: {\n    contentStyle: {\n      background: '#fff',\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderColor: '#e8eaec',\n      borderRadius: '20px',\n      color: 'rgb(187, 136, 34)',\n      fontSize: '13px',\n      padding: '0'\n    },\n    subLinkStyle: {\n      lineType: 'round',\n      lineRadius: 5,\n      lineWidth: '1px',\n      lineColor: 'rgb(187, 136, 34)'\n    }\n  }\n};\n","import { ThemeType } from '@blink-mind/core';\n\nexport const theme2: ThemeType = {\n  name: 'theme2',\n  randomColor: false,\n  background: '#F3E1E1',\n  highlightColor: '#F5A623',\n  marginH: 45,\n  marginV: 10,\n  contentStyle: {\n    lineHeight: '1.5'\n  },\n  linkStyle: {\n    lineRadius: 5,\n    lineType: 'curve'\n  },\n  rootTopic: {\n    contentStyle: {\n      background: '#50C18A',\n      color: '#fff',\n      fontSize: '34px',\n      borderRadius: '5px',\n      padding: '16px 18px 16px 18px'\n    },\n\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '2px',\n      lineColor: '#43a9ff'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      background: '#ffffff',\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderColor: 'rgb(221, 170, 68)',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '18px',\n      padding: '5px'\n    },\n\n    subLinkStyle: {\n      lineType: 'round',\n      lineRadius: 5,\n      lineWidth: '2px',\n      lineColor: '#43a9ff'\n    }\n  },\n\n  normalTopic: {\n    contentStyle: {\n      background: '#fff',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '13px',\n      padding: '0',\n      boxShadow: '1px 1px 1px #ccc'\n    },\n\n    subLinkStyle: {\n      lineType: 'round',\n      lineRadius: 5,\n      lineWidth: '1px',\n      lineColor: '#43a9ff'\n    }\n  }\n};\n","import { ThemeType } from '@blink-mind/core';\n\nexport const theme3: ThemeType = {\n  name: 'theme3',\n  randomColor: false,\n  background: '#A9DEF9',\n  highlightColor: '#9013FE',\n  marginH: 50,\n  marginV: 20,\n  contentStyle: {\n    lineHeight: '1.5'\n  },\n\n  linkStyle: {\n    lineRadius: 5,\n    lineType: 'curve'\n  },\n\n  rootTopic: {\n    contentStyle: {\n      background: '#FF99C8',\n      color: '#fff',\n      fontSize: '34px',\n      borderRadius: '5px',\n      padding: '16px 18px 16px 18px'\n    },\n\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '2px',\n      lineColor: '#43a9ff'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      background: '#FCF6BD',\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderColor: '#E4C1F9',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '18px',\n      padding: '5px'\n    },\n\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '2px',\n      lineColor: '#43a9ff'\n    }\n  },\n\n  normalTopic: {\n    contentStyle: {\n      background: '#E4FDE1',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '13px',\n      padding: '0px',\n      boxShadow: '1px 1px 1px #ccc'\n    },\n\n    subLinkStyle: {\n      lineType: 'round',\n      lineRadius: 5,\n      lineWidth: '1px',\n      lineColor: '#43a9ff'\n    }\n  }\n};\n","import { ThemeType } from '@blink-mind/core';\n\nexport const theme4: ThemeType = {\n  name: 'theme3',\n  randomColor: false,\n  background: '#CCFBFE',\n  highlightColor: '#D0021B',\n  marginH: 50,\n  marginV: 20,\n\n  contentStyle: {\n    lineHeight: '1.5'\n  },\n\n  linkStyle: {\n    lineRadius: 5,\n    lineType: 'curve'\n  },\n\n  rootTopic: {\n    contentStyle: {\n      background: '#CD8987',\n      color: '#fff',\n      fontSize: '34px',\n      borderRadius: '5px',\n      padding: '16px 18px 16px 18px'\n    },\n\n    subLinkStyle: {\n      lineType: 'curve',\n      lineWidth: '2px',\n      lineColor: '#43a9ff'\n    }\n  },\n  primaryTopic: {\n    contentStyle: {\n      background: '#CDACA1',\n      borderWidth: '1px',\n      borderStyle: 'solid',\n      borderColor: '#E4C1F9',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '18px',\n      padding: '5px'\n    },\n\n    subLinkStyle: {\n      lineType: 'line',\n      lineWidth: '2px',\n      lineColor: '#43a9ff'\n    }\n  },\n\n  normalTopic: {\n    contentStyle: {\n      background: '#CDCACC',\n      borderRadius: '5px',\n      color: 'rgb(103,103,103)',\n      fontSize: '13px',\n      padding: '0',\n      boxShadow: '1px 1px 1px #ccc'\n    },\n\n    subLinkStyle: {\n      lineType: 'line',\n      lineRadius: 5,\n      lineWidth: '1px',\n      lineColor: '#43a9ff'\n    }\n  }\n};\n","import { defaultTheme, OpType, SheetModel, ThemeType } from '@blink-mind/core';\nimport {\n  darkTheme1,\n  theme1,\n  theme2,\n  theme3,\n  theme4,\n  themeRandomColorRound,\n  themeRandomColorSquare\n} from './themes';\n\nexport type ThemeMap = Map<string, ThemeType>;\n\nexport function ThemeSelectorPlugin() {\n  const themeMap = new Map<string, ThemeType>([\n    ['default', defaultTheme],\n    ['dark-theme1', darkTheme1],\n    ['random-color-square', themeRandomColorSquare],\n    ['random-color-round', themeRandomColorRound],\n    ['theme1', theme1],\n    ['theme2', theme2],\n    ['theme3', theme3],\n    ['theme4', theme4]\n  ]);\n  return {\n    getAllThemes(props) {\n      return themeMap;\n    },\n\n    getTheme(props) {\n      const { controller, themeKey } = props;\n      return controller.run('getAllThemes', props).get(themeKey);\n    },\n\n    setTheme(ctx) {\n      const { controller, themeKey } = ctx;\n      const allThemes: ThemeMap = controller.run('getAllThemes', ctx);\n      if (!allThemes.has(themeKey)) {\n        throw new Error(`the theme key ${themeKey} is not exist!`);\n      }\n      controller.run('operation', {\n        ...ctx,\n        opType: OpType.SET_THEME,\n        theme: allThemes.get(themeKey)\n      });\n    },\n    createNewSheetModel(ctx, next) {\n      const { controller, themeKey = 'default' } = ctx;\n      const theme = controller.run('getTheme', { ...ctx, themeKey });\n      let model: SheetModel = next();\n      model = model.setIn(['config', 'theme'], theme);\n      return model;\n    }\n  };\n}\n","type SerializeImageResult = {\n  url: string;\n  width: number;\n  height: number;\n};\nexport function serializeImage(\n  url,\n  type = 'image/png'\n): Promise<SerializeImageResult> {\n  return new Promise((resolve, reject) => {\n    const image = new Image();\n    image.src = url;\n\n    image.onerror = function(error) {\n      reject(error);\n    };\n\n    image.onload = function() {\n      try {\n        const canvas = document.createElement('canvas');\n        canvas.width = image.width;\n        canvas.height = image.height;\n\n        const context = canvas.getContext('2d');\n        context.drawImage(image, 0, 0, canvas.width, canvas.height);\n        resolve({\n          url: canvas.toDataURL(type, 1),\n          width: canvas.width,\n          height: canvas.height\n        });\n      } catch (e) {\n        reject(e);\n      }\n    };\n  });\n}\n","export const EXT_DATA_KEY_IMAGES = 'EXT_DATA_KEY_IMAGES';\n\nexport const OP_TYPE_ADD_IMAGE = 'OP_TYPE_ADD_IMAGE';\nexport const OP_TYPE_ADD_TOPIC_IMAGE = 'OP_TYPE_ADD_TOPIC_IMAGE';\nexport const OP_TYPE_DELETE_TOPIC_IMAGE = 'OP_TYPE_DELETE_TOPIC_IMAGE';\nexport const OP_TYPE_SET_TOPIC_IMAGE = 'OP_TYPE_SET_TOPIC_IMAGE';\nexport const OP_TYPE_MOVE_TOPIC_IMAGE = 'OP_TYPE_MOVE_TOPIC_IMAGE';\n","import { FocusMode, OpType } from '@blink-mind/core';\nimport {\n  BaseProps,\n  COLORS,\n  getI18nText,\n  I18nKey,\n  iconClassName,\n  IconName,\n  OutsideClickHandler\n} from '@blink-mind/renderer-react';\nimport { useState } from 'react';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { TopicImageData } from '../ext-data-images';\nimport {\n  OP_TYPE_DELETE_TOPIC_IMAGE,\n  OP_TYPE_MOVE_TOPIC_IMAGE,\n  OP_TYPE_SET_TOPIC_IMAGE\n} from '../utils';\n\nconst Root = styled.div`\n  position: relative;\n  margin: 5px;\n  padding-right: 35px;\n`;\n\nconst ImgContainer = styled(OutsideClickHandler)`\n  position: relative;\n`;\n\nconst ResizeIcon = styled.div`\n  position: absolute;\n  right: 28px;\n  bottom: -7px;\n  width: 10px;\n  height: 10px;\n  cursor: nwse-resize;\n  background: ${props => props.theme.highlightColor};\n`;\n\nconst ResizeImg = styled.img`\n  display: block;\n  position: absolute;\n  left: 0;\n  top: 0;\n  opacity: 0.6;\n`;\n\nconst Img = styled.img`\n  display: block;\n  outline-offset: 2px;\n  resize: both;\n  outline: ${props =>\n    props.toolbarVisible && `solid 1px ${props.theme.highlightColor}`};\n`;\n\nconst EditButtons = styled.div`\n  position: absolute;\n  right: 0;\n  bottom: 5px;\n`;\n\nconst EditButton = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 5px;\n  //border-radius: 50%;\n  width: 24px;\n  height: 24px;\n  text-align: center;\n  vertical-align: middle;\n  border: gray 1px solid;\n  background: rgba(125, 188, 255, 0.6);\n  &:hover {\n    cursor: pointer;\n    color: ${COLORS.LIGHT.ITEM_BG_ACTIVE};\n  }\n`;\n\nconst ResizePopoverContent = styled.div`\n  width: 200px;\n  height: 200px;\n  background: fuchsia;\n`;\n\ninterface Props extends BaseProps {\n  image: TopicImageData;\n  index: number;\n  totalCount: number;\n}\nexport function ImageWidget(props: Props) {\n  const { image, index, totalCount, ...rest } = props;\n  const { controller, model, topicKey } = rest;\n  const { key: imageKey, imageRecord, width, height } = image;\n  const { url, width: originWidth, height: originHeight } = imageRecord;\n  const [toolbarVisible, setToolbarVisible] = useState(false);\n  const [tempSize, setTempSize] = useState({ width, height });\n  const [status, setStatus] = useState('normal');\n  const isOriginSize = width === originWidth && height === originHeight;\n  const canMoveUp = index > 0;\n  const canMoveDown = index < totalCount - 1;\n\n  const onClickDelete = () => {\n    controller.run('operation', {\n      ...rest,\n      opType: OP_TYPE_DELETE_TOPIC_IMAGE,\n      imageKey\n    });\n  };\n  const moveImage = moveDir => {\n    controller.run('operation', {\n      ...rest,\n      opType: OP_TYPE_MOVE_TOPIC_IMAGE,\n      imageKey,\n      moveDir\n    });\n  };\n\n  const onClickMoveUp = () => {\n    moveImage('up');\n  };\n\n  const onClickMoveDown = () => {\n    moveImage('down');\n  };\n\n  const onClickResetSize = () => {\n    controller.run('operation', {\n      ...props,\n      opType: OP_TYPE_SET_TOPIC_IMAGE,\n      imageKey,\n      imageData: { width: originWidth, height: originHeight }\n    });\n  };\n\n  let imageEle, rootEle;\n  let resizeSize;\n  const imageRef = ref => {\n    imageEle = ref;\n  };\n  const rootRef = ref => {\n    rootEle = ref;\n  };\n\n  const onImageClick = e => {\n    if (model.focusKey !== topicKey) {\n      controller.run('operation', {\n        ...props,\n        opType: OpType.FOCUS_TOPIC,\n        focusMode: FocusMode.EDITING_CONTENT\n      });\n    }\n    setToolbarVisible(true);\n  };\n\n  const onImageOutsideClick = () => {\n    setToolbarVisible(false);\n  };\n\n  const resizeMouseMove = e => {\n    const delta = e.screenX - initMouseX;\n    resizeSize = {\n      width: width + delta,\n      height: height + (delta * height) / width\n    };\n    setTempSize(resizeSize);\n  };\n  const resizeMouseUp = e => {\n    document.body.style.cursor = null;\n    document.removeEventListener('mousemove', resizeMouseMove);\n    document.removeEventListener('mouseup', resizeMouseUp);\n    setStatus('normal');\n    controller.run('operation', {\n      ...props,\n      opType: OP_TYPE_SET_TOPIC_IMAGE,\n      imageKey,\n      imageData: { width: resizeSize.width, height: resizeSize.height }\n    });\n    controller.run('setHandlingMouseMove', false);\n  };\n  let initMouseX;\n  const prepareResize = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    controller.run('setHandlingMouseMove', true);\n    document.body.style.cursor = 'nwse-resize';\n    initMouseX = e.screenX;\n    setStatus('resize');\n    document.addEventListener('mousemove', resizeMouseMove);\n    document.addEventListener('mouseup', resizeMouseUp);\n  };\n\n  const imgProps = {\n    src: url,\n    width,\n    height,\n    ref: imageRef,\n    toolbarVisible,\n    onClick: onImageClick\n  };\n\n  const rootProps = {\n    ref: rootRef\n  };\n\n  const renderResizeImg = () => {\n    if (status !== 'resize') return null;\n    // console.log('renderResizeImg', tempSize);\n    const resizeImgProps = {\n      src: url,\n      width: tempSize.width,\n      height: tempSize.height\n    };\n    return <ResizeImg {...resizeImgProps} />;\n  };\n\n  const renderEditButtons = () => {\n    const resizePopoverProps = {\n      hasBackdrop: true\n    };\n    return (\n      <>\n        <ResizeIcon onMouseDown={prepareResize} />\n        <EditButtons>\n          {canMoveUp && (\n            <EditButton\n              title={getI18nText(props, I18nKey.MOVE_UP)}\n              className={iconClassName(IconName.MOVE_UP)}\n              onClick={onClickMoveUp}\n            />\n          )}\n          {canMoveDown && (\n            <EditButton\n              title={getI18nText(props, I18nKey.MOVE_DOWN)}\n              className={iconClassName(IconName.MOVE_DOWN)}\n              onClick={onClickMoveDown}\n            />\n          )}\n          {!isOriginSize && (\n            <EditButton\n              title={getI18nText(props, I18nKey.SET_TO_ORIGINAL_SIZE)}\n              className={iconClassName('size-original')}\n              onClick={onClickResetSize}\n            />\n          )}\n\n          <EditButton\n            title={getI18nText(props, I18nKey.DELETE)}\n            className={iconClassName(IconName.TRASH)}\n            onClick={onClickDelete}\n          />\n        </EditButtons>\n      </>\n    );\n  };\n\n  const imgContainerProps = {\n    useCapture: false,\n    onOutsideClick: onImageOutsideClick\n  };\n\n  return (\n    <Root {...rootProps}>\n      <ImgContainer {...imgContainerProps}>\n        <Img {...imgProps} />\n        {toolbarVisible && renderEditButtons()}\n      </ImgContainer>\n\n      {renderResizeImg()}\n    </Root>\n  );\n}\n","import * as React from 'react';\nimport styled from 'styled-components';\nimport { ImageWidget } from './image-widget';\n\nconst Root = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n`;\n\nexport function TopicImagesWidget(props) {\n  const { controller } = props;\n  const images = controller.run('getTopicImages', props);\n  let index = 0;\n  const child = images.map(image => {\n    const imageProps = {\n      ...props,\n      image,\n      index,\n      totalCount: images.length\n    };\n    index++;\n\n    return <ImageWidget key={image.key} {...imageProps} />;\n  });\n  return <Root>{child}</Root>;\n}\n","import { KeyType } from '@blink-mind/core';\nimport { List, Map, Record } from 'immutable';\ntype ImageRecordType = {\n  key: KeyType;\n  url: string;\n  width: number;\n  height: number;\n};\n\nconst defaultImageRecord: ImageRecordType = {\n  key: null,\n  url: null,\n  width: null,\n  height: null\n};\n\nexport class ImageRecord extends Record(defaultImageRecord) {\n  get key(): KeyType {\n    return this.get('key');\n  }\n\n  get url(): string {\n    return this.get('url');\n  }\n\n  get width(): number {\n    return this.get('width');\n  }\n\n  get height(): number {\n    return this.get('height');\n  }\n}\n\ntype TopicImageRecordType = {\n  key: KeyType;\n  width: number;\n  height: number;\n};\n\nconst defaultTopicImageRecord: TopicImageRecordType = {\n  key: null,\n  width: null,\n  height: null\n};\n\nexport class TopicImageRecord extends Record(defaultTopicImageRecord) {\n  get key() {\n    return this.get('key');\n  }\n\n  get width() {\n    return this.get('width');\n  }\n\n  get height() {\n    return this.get('height');\n  }\n}\n\ntype ExtDataImagesRecordType = {\n  images: Map<KeyType, ImageRecord>;\n  topics: Map<KeyType, List<TopicImageRecord>>;\n};\n\nconst defaultExtDataImagesRecord: ExtDataImagesRecordType = {\n  images: Map(),\n  topics: Map()\n};\n\n// images 和 topics 分开管理，\nexport class ExtDataImages extends Record(defaultExtDataImagesRecord) {\n  get images(): Map<KeyType, ImageRecord> {\n    return this.get('images');\n  }\n  get topics(): Map<KeyType, List<TopicImageRecord>> {\n    return this.get('topics');\n  }\n}\n\nexport type TopicImageData = {\n  key: KeyType;\n  imageRecord: ImageRecord;\n  width: number;\n  height: number;\n};\n","import { BaseProps, getI18nText, I18nKey } from '@blink-mind/renderer-react';\nimport { Button, FileInput } from '@blueprintjs/core';\nimport React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { ImageRecord } from '../ext-data-images';\nimport { OP_TYPE_ADD_IMAGE, serializeImage } from '../utils';\nconst md5 = require('blueimp-md5');\n\nconst Root = styled.div``;\nconst ErrorTip = styled.div`\n  color: red;\n  height: 24px;\n`;\n\nconst Tips = styled.div`\n  margin-top: 20px;\n`;\n\nconst Tip = styled.div`\n  padding: 5px 0;\n`;\n\nexport function InsertImageDialog(props: BaseProps) {\n  const { controller, setDiagramState } = props;\n  const [inputText, setInputText] = useState(\n    getI18nText(props, I18nKey.CHOOSE_FILE)\n  );\n  const onInputChange = e => {\n    if (e.target.files && e.target.files.length > 0) {\n      const file: File = e.target.files[0];\n      if (\n        !['image/png', 'image/jpg', 'image/jpeg', 'image/gif'].includes(\n          file.type\n        )\n      ) {\n        setInputText(\n          <ErrorTip>\n            {getI18nText(props, I18nKey.SELECT_IMAGE_ERR_TIP)}\n          </ErrorTip>\n        );\n      } else {\n        const fr = new FileReader();\n        fr.onload = () => {\n          const url = fr.result;\n          const img = new Image();\n          img.onload = () => {\n            //@ts-ignore\n            const image = new ImageRecord({\n              key: md5(url),\n              url,\n              width: img.width,\n              height: img.height\n            });\n            setDiagramState({ dialogType: null });\n            controller.run('operation', {\n              ...props,\n              opType: OP_TYPE_ADD_IMAGE,\n              image\n            });\n          };\n          //@ts-ignore\n          img.src = url;\n        };\n        fr.readAsDataURL(file);\n        const src = URL.createObjectURL(file);\n        serializeImage(src, file.type).then(res => {\n          // TODO md5\n        });\n      }\n    }\n  };\n\n  const fileInputProps = {\n    onInputChange,\n    text: inputText,\n    fill: true,\n    buttonText: getI18nText(props, I18nKey.BROWSE)\n  };\n\n  return (\n    <Root>\n      <div>\n        <FileInput {...fileInputProps} />\n      </div>\n      <Tips>\n        <Tip>{getI18nText(props, I18nKey.SELECT_IMAGE_TIP1)}</Tip>\n        <Tip>{getI18nText(props, I18nKey.SELECT_IMAGE_TIP2)}</Tip>\n      </Tips>\n    </Root>\n  );\n}\n","import {\n  BaseDocModelModifierArg,\n  BaseSheetModelModifierArg\n} from '@blink-mind/core';\nimport { swap } from '@blink-mind/renderer-react';\nimport { List } from 'immutable';\nimport {\n  ExtDataImages,\n  ImageRecord,\n  TopicImageRecord\n} from './ext-data-images';\nimport { EXT_DATA_KEY_IMAGES } from './utils';\n\nexport function addImage({\n  docModel,\n  topicKey,\n  image\n}: BaseDocModelModifierArg & {\n  image: ImageRecord;\n}) {\n  let extData = docModel.getExtDataItem(EXT_DATA_KEY_IMAGES, ExtDataImages);\n  const topicImage = new TopicImageRecord({\n    key: image.key,\n    width: image.width,\n    height: image.height\n  });\n  extData = extData\n    .update('images', images => images.set(image.key, image))\n    .update('topics', topics => {\n      if (!topics.has(topicKey)) {\n        return topics.set(topicKey, List([topicImage]));\n      } else {\n        const imgData = topics.get(topicKey).find(v => v.key === image.key);\n\n        if (imgData != null) return topics;\n        return topics.update(topicKey, list => list.push(topicImage));\n      }\n    });\n  docModel = docModel.setIn(['extData', EXT_DATA_KEY_IMAGES], extData);\n  return docModel;\n}\n\nexport function deleteTopicImage({ docModel, topicKey, imageKey }) {\n  let extData = docModel.getExtDataItem(EXT_DATA_KEY_IMAGES, ExtDataImages);\n  extData = extData.updateIn(['topics', topicKey], list =>\n    list.delete(list.findIndex(v => v.key === imageKey))\n  );\n  if (getUsedImageKeyTopicCount(extData, imageKey) === 0) {\n    extData = extData.update('images', images => images.delete(imageKey));\n  }\n  docModel = docModel.setIn(['extData', EXT_DATA_KEY_IMAGES], extData);\n  return docModel;\n}\n\nexport function addTopicImage({ docModel, topicKey, imageKey }) {\n  let extData = docModel.getExtDataItem(EXT_DATA_KEY_IMAGES, ExtDataImages);\n  const image = extData.images.get(imageKey);\n  if (image == null) {\n    throw new Error(`imageKey ${imageKey} not exist`);\n  }\n  let topicData = extData.topics.get(topicKey) || List();\n  if (topicData.find(v => v.key === imageKey) == null) {\n    topicData = topicData.push(\n      new TopicImageRecord({\n        key: imageKey,\n        width: image.width,\n        height: image.height\n      })\n    );\n    extData = extData.update('topics', topics =>\n      topics.set(topicKey, topicData)\n    );\n    docModel = docModel.setIn(['extData', EXT_DATA_KEY_IMAGES], extData);\n  }\n  return docModel;\n}\n\nexport function setTopicImage({ docModel, topicKey, imageKey, imageData }) {\n  let extData = docModel.getExtDataItem(EXT_DATA_KEY_IMAGES, ExtDataImages);\n  let topicData = extData.topics.get(topicKey);\n  if (topicData == null) {\n    throw new Error(`topicKey ${topicKey} does not has imageData`);\n  }\n  if (topicData.find(v => v.key === imageKey) == null) {\n    throw new Error(\n      `topicKey ${topicKey} does not has imageData of key ${imageKey}`\n    );\n  }\n  const index = topicData.findIndex(v => v.key === imageKey);\n  topicData = topicData.update(index, topicImage =>\n    topicImage.merge(imageData)\n  );\n  extData = extData.update('topics', topics => topics.set(topicKey, topicData));\n  docModel = docModel.setIn(['extData', EXT_DATA_KEY_IMAGES], extData);\n  return docModel;\n}\n\nexport function moveTopicImage({ docModel, topicKey, imageKey, moveDir }) {\n  let extData = docModel.getExtDataItem(EXT_DATA_KEY_IMAGES, ExtDataImages);\n  let topicData = extData.topics.get(topicKey);\n  const index = topicData.findIndex(v => v.key === imageKey);\n  if (moveDir === 'up') {\n    topicData = swap(topicData, index, index - 1);\n  } else {\n    topicData = swap(topicData, index, index + 1);\n  }\n  extData = extData.update('topics', topics => topics.set(topicKey, topicData));\n  docModel = docModel.setIn(['extData', EXT_DATA_KEY_IMAGES], extData);\n  return docModel;\n}\n\nexport function getUsedImageKeyTopicCount(\n  extData: ExtDataImages,\n  imageKey: KeyType\n) {\n  let count = 0;\n  extData.topics.forEach(v => {\n    if (v.find(v => v.key === imageKey)) count++;\n  });\n  return count;\n}\n","import {\n  getI18nText,\n  I18nKey,\n  Icon,\n  IconName\n} from '@blink-mind/renderer-react';\nimport { MenuItem } from '@blueprintjs/core';\nimport debug from 'debug';\nimport { List } from 'immutable';\nimport React from 'react';\nimport { InsertImageDialog, TopicImagesWidget } from './components';\nimport {\n  ExtDataImages,\n  ImageRecord,\n  TopicImageData,\n  TopicImageRecord\n} from './ext-data-images';\nimport {\n  addImage,\n  addTopicImage,\n  deleteTopicImage,\n  moveTopicImage,\n  setTopicImage\n} from './op-function';\nimport {\n  EXT_DATA_KEY_IMAGES,\n  OP_TYPE_ADD_IMAGE,\n  OP_TYPE_ADD_TOPIC_IMAGE,\n  OP_TYPE_DELETE_TOPIC_IMAGE,\n  OP_TYPE_MOVE_TOPIC_IMAGE,\n  OP_TYPE_SET_TOPIC_IMAGE,\n  serializeImage\n} from './utils';\n\nconst log = debug('plugin:insert-image');\n\nconst md5 = require('blueimp-md5');\nexport function InsertImagesPlugin() {\n  return {\n    handleTopicPaste(ctx, next) {\n      const { ev, ...rest } = ctx;\n      log('handleTopicPaste', ev);\n      const { controller } = rest;\n      if (ev.clipboardData && ev.clipboardData.items.length > 0) {\n        const data = ev.clipboardData;\n\n        if (data.items.length === 1) {\n          const item = data.items[0];\n          if (item.type === 'image/png') {\n            const blob = item.getAsFile();\n            if (blob) {\n              const src = URL.createObjectURL(blob);\n              serializeImage(src).then(res => {\n                // TODO md5\n                const image = new ImageRecord({\n                  key: md5(res.url),\n                  ...res\n                });\n                controller.run('operation', {\n                  ...rest,\n                  opType: OP_TYPE_ADD_IMAGE,\n                  image\n                });\n              });\n            }\n          }\n        }\n      }\n    },\n\n    customizeDialog(ctx, next) {\n      const { diagramState, setDiagramState } = ctx;\n      const onClose = () => {\n        setDiagramState({ dialogType: null });\n      };\n      if (diagramState.dialogType === 'INSERT_IMAGE') {\n        return {\n          dialogProps: {\n            title: getI18nText(ctx, I18nKey.INSERT_IMAGE),\n            onClose\n          },\n          dialogContent: <InsertImageDialog {...ctx} />\n        };\n      }\n      return next();\n    },\n\n    customizeTopicContextMenu(ctx, next) {\n      const { controller, setDiagramState } = ctx;\n      const res = next();\n      const onClickInsertImage = () => {\n        setDiagramState({\n          dialogType: 'INSERT_IMAGE'\n        });\n      };\n\n      res.push(\n        <MenuItem\n          key=\"insert-image\"\n          icon={Icon(IconName.IMAGE)}\n          text={getI18nText(ctx, I18nKey.INSERT_IMAGE)}\n          // labelElement={<KeyboardHotKeyWidget hotkeys={['Tab']} />}\n          onClick={onClickInsertImage}\n        />\n      );\n      return res;\n    },\n\n    getOpMap(ctx, next) {\n      const opMap = next();\n      opMap.set(OP_TYPE_ADD_IMAGE, addImage);\n      opMap.set(OP_TYPE_ADD_TOPIC_IMAGE, addTopicImage);\n      opMap.set(OP_TYPE_DELETE_TOPIC_IMAGE, deleteTopicImage);\n      opMap.set(OP_TYPE_SET_TOPIC_IMAGE, setTopicImage);\n      opMap.set(OP_TYPE_MOVE_TOPIC_IMAGE, moveTopicImage);\n      return opMap;\n    },\n\n    renderTopicNodeRows(ctx, next) {\n      const { controller } = ctx;\n      const res = next();\n      res.push(controller.run('renderTopicExtImage', ctx));\n      return res;\n    },\n\n    renderTopicExtImage(ctx) {\n      return <TopicImagesWidget key=\"images\" {...ctx} />;\n    },\n\n    getTopicImages(ctx): TopicImageData[] {\n      const { docModel, topicKey } = ctx;\n      const extData = docModel.getExtDataItem(\n        EXT_DATA_KEY_IMAGES,\n        ExtDataImages\n      );\n      if (!extData.topics.has(topicKey)) return [];\n      return extData.topics\n        .get(topicKey)\n        .toArray()\n        .map(v => {\n          return {\n            key: v.key,\n            imageRecord: extData.images.get(v.key),\n            width: v.width,\n            height: v.height\n          };\n        });\n    },\n\n    topicExtDataToJson(ctx, next) {\n      const { docModel, topicKey } = ctx;\n      const res = next();\n      const extData = docModel.getExtDataItem(\n        EXT_DATA_KEY_IMAGES,\n        ExtDataImages\n      );\n      if (extData.topics.has(topicKey)) {\n        res[EXT_DATA_KEY_IMAGES] = extData.topics\n          .get(topicKey)\n          .toArray()\n          .map(r => {\n            const image: ImageRecord = extData.images.get(r.key);\n            return {\n              key: r.key,\n              url: image.url,\n              originalWidth: image.width,\n              originalHeight: image.height,\n              width: r.width,\n              height: r.height\n            };\n          });\n      }\n      return res;\n    },\n\n    processTopicExtData(ctx, next) {\n      let extData = next();\n      let { topic } = ctx;\n      if (topic.extData[EXT_DATA_KEY_IMAGES]) {\n        if (!extData.has(EXT_DATA_KEY_IMAGES)) {\n          let extDataImages = new ExtDataImages();\n          extData = extData.set(EXT_DATA_KEY_IMAGES, extDataImages);\n        }\n        let list = List();\n        for (let image of topic.extData[EXT_DATA_KEY_IMAGES]) {\n          extData = extData.updateIn(\n            [EXT_DATA_KEY_IMAGES, 'images'],\n            images => {\n              return images.has(image.key)\n                ? images\n                : images.set(\n                    image.key,\n                    new ImageRecord({\n                      key: image.key,\n                      url: image.url,\n                      width: image.originWidth,\n                      height: image.originHeight\n                    })\n                  );\n            }\n          );\n          list = list.push(\n            new TopicImageRecord({\n              key: image.key,\n              width: image.width,\n              height: image.height\n            })\n          );\n        }\n        extData = extData.updateIn([EXT_DATA_KEY_IMAGES, 'topics'], topics =>\n          topics.set(topic.key, list)\n        );\n      }\n      return extData;\n    },\n\n    customizeAllowUndo(ctx, next) {\n      const { opType } = ctx;\n      if (opType === OP_TYPE_ADD_IMAGE) return true;\n      return next();\n    },\n\n    deserializeExtDataItem(ctx, next) {\n      const { extDataKey, extDataItem } = ctx;\n      if (extDataKey === EXT_DATA_KEY_IMAGES) {\n        let extData = new ExtDataImages();\n        for (const key in extDataItem.images) {\n          const item = extDataItem.images[key];\n          const record = new ImageRecord(item);\n          extData = extData.update('images', images => images.set(key, record));\n        }\n        for (const key in extDataItem.topics) {\n          const item = extDataItem.topics[key];\n          const record: List<TopicImageRecord> = List(\n            item.map(v => {\n              return new TopicImageRecord(v);\n            })\n          );\n          extData = extData.update('topics', topics => topics.set(key, record));\n        }\n        return extData;\n      }\n      return next();\n    },\n\n    getTotalTopicImageCount(ctx) {\n      const { docModel } = ctx;\n      const extData = docModel.getExtDataItem(\n        EXT_DATA_KEY_IMAGES,\n        ExtDataImages\n      );\n      return extData.images.size;\n    }\n  };\n}\n","import {\n  SettingItemButton,\n  SettingItemInput,\n  SettingItemInputProps,\n  SettingRow\n} from '@blink-mind/renderer-react';\nimport { Checkbox } from '@blueprintjs/core';\nimport React, { useState } from 'react';\n\nconst _debugNameSpaces = [\n  'bmd:*',\n  // 'plugin:toolbar',\n  'plugin:operation'\n  // 'plugin:drag-and-drop'\n];\n\nif (!localStorage.allDebugNS)\n  localStorage.allDebugNS = _debugNameSpaces.join(',');\n\nexport function DebugNamespaceWidget(props) {\n  const [debugStr, setDebugStr] = useState(localStorage.debug || '');\n  const [allDebugNS, setAllDebugNS] = useState(\n    localStorage.allDebugNS.split(',').sort()\n  );\n  const [nsName, setNsName] = useState('');\n\n  const setDebugNS = nsArray => {};\n\n  const nameProps: SettingItemInputProps = {\n    title: 'namespace:',\n    value: nsName,\n    onChange: e => {\n      //@ts-ignore\n      setNsName(e.target.value);\n    },\n    style: {\n      width: 100\n    }\n  };\n  const nsNameInput = <SettingItemInput {...nameProps} />;\n  const addNsBtnProps = {\n    title: 'Add Or Delete Namespace',\n    onClick(e) {\n      let _allDebugNS;\n      if (allDebugNS.includes(nsName)) {\n        _allDebugNS = allDebugNS.filter(i => i !== nsName);\n      } else {\n        _allDebugNS = [...allDebugNS, nsName];\n      }\n\n      setAllDebugNS(_allDebugNS);\n      localStorage.allDebugNS = _allDebugNS.join(',');\n    }\n  };\n  const addNsBtn = <SettingItemButton {...addNsBtnProps} />;\n\n  return (\n    <div>\n      <div>\n        {allDebugNS.map(item => {\n          const cprops = {\n            key: item,\n            label: item,\n            checked: debugStr.split(',').includes(item),\n            onChange: e => {\n              let checkedItems = debugStr.split(',').filter(i => i !== '');\n              if (checkedItems.includes(item)) {\n                checkedItems = checkedItems.filter(i => i !== item);\n              } else {\n                checkedItems.push(item);\n              }\n              const newDebugStr = checkedItems.join(',');\n              setDebugStr(newDebugStr);\n              localStorage.debug = newDebugStr;\n            }\n          };\n          return <Checkbox {...cprops} />;\n        })}\n      </div>\n      <SettingRow>\n        {nsNameInput}\n        {addNsBtn}\n      </SettingRow>\n    </div>\n  );\n}\n","import React from 'react';\nimport { DebugNamespaceWidget } from './debug-namespace-widget';\nexport function DebugPanel(props) {\n  return (\n    <div>\n      <DebugNamespaceWidget />\n    </div>\n  );\n}\n","import { Tab } from '@blueprintjs/core';\nimport React from 'react';\nimport { DebugPanel } from './debug-panel';\n\nexport function DebugPlugin() {\n  const tabId = 'debug';\n  return {\n    renderRightTopPanelTabs(props, next) {\n      const res = next();\n      const tProps = {\n        id: tabId,\n        key: tabId,\n        title: 'Debug',\n        panel: <DebugPanel {...props} />\n      };\n      const tab = <Tab {...tProps} />;\n      res.push(tab);\n      return res;\n    }\n  };\n}\n","import { ViewModeMindMap } from '@blink-mind/core';\nimport {\n  BaseProps,\n  getI18nText,\n  I18nKey,\n  Icon,\n  IconName,\n  RefKey,\n  topicWidgetRootRefKey\n} from '@blink-mind/renderer-react';\nimport { MenuItem } from '@blueprintjs/core';\nimport { saveAs } from 'file-saver';\nimport { toBlob, toSvgDataURL } from 'html-to-image';\nimport * as React from 'react';\n\nexport function ContextMenuExportTopic(props: BaseProps) {\n  const { controller, model, topicKey, getRef } = props;\n  const isMindMap = model.config.viewMode === ViewModeMindMap;\n  const outlinerEle = document.getElementById(`bm-outliner-${model.id}`);\n  const exportTo = (type: 'png' | 'jpg' | 'svg') => () => {\n    const options = isMindMap\n      ? {\n          backgroundColor: model.config.theme.background\n        }\n      : {\n          backgroundColor: window.getComputedStyle(outlinerEle).backgroundColor\n        };\n    const title = controller.run('getTopicTitle', { ...props, maxLength: 40 });\n    const topicWidgetEle =\n      isMindMap && topicKey === model.editorRootTopicKey\n        ? getRef(RefKey.NODE_LAYER + model.id)\n        : getRef(topicWidgetRootRefKey(topicKey));\n    switch (type) {\n      case 'png':\n      case 'jpg':\n        toBlob(topicWidgetEle, options).then(blob => {\n          saveAs(blob, `${title}.${type}`);\n        });\n        break;\n      case 'svg':\n        toSvgDataURL(topicWidgetEle, options).then(dataUrl => {\n          saveAs(dataUrl, `${title}.svg`);\n        });\n        break;\n    }\n  };\n\n  return (\n    <MenuItem\n      icon={Icon(IconName.EXPORT)}\n      text={getI18nText(props, I18nKey.EXPORT)}\n    >\n      <MenuItem text=\"PNG\" onClick={exportTo('png')} />\n      <MenuItem text=\"JPG\" onClick={exportTo('jpg')} />\n      <MenuItem text=\"SVG\" onClick={exportTo('svg')} />\n    </MenuItem>\n  );\n}\n","export const EXT_KEY_EXPORT_TOPIC = 'EXT_KEY_EXPORT_TOPIC';\n","import * as React from 'react';\nimport { ContextMenuExportTopic } from './context-menu-export-topic';\nimport { EXT_KEY_EXPORT_TOPIC } from './utils';\n\nexport function ExportTopicPlugin() {\n  return {\n    customizeTopicContextMenu(ctx, next) {\n      const res = next();\n      res.push(<ContextMenuExportTopic key={EXT_KEY_EXPORT_TOPIC} {...ctx} />);\n      return res;\n    }\n  };\n}\n","export function SimpleCaptureErrorPlugin() {\n  return {\n    captureError(ctx) {\n      const { error } = ctx;\n      /* tslint:disable */\n      console.error(error);\n    }\n  };\n}\n"],"names":["React.createElement","Map","Root","cx","Alert","React.PureComponent","TagWidget","React","md5"],"mappings":"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"}