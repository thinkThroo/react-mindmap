{"version":3,"file":"main.js","sources":["../../../packages/renderer-react/src/components/common/base-widget.tsx","../../../packages/renderer-react/src/components/common/drag-scroll-widget.tsx","../../../packages/renderer-react/src/components/common/save-ref.tsx","../../../packages/renderer-react/src/utils/icon.tsx","../../../packages/renderer-react/src/utils/keys.ts","../../../packages/renderer-react/src/utils/events.ts","../../../packages/renderer-react/src/utils/file.ts","../../../packages/renderer-react/src/utils/css.ts","../../../packages/renderer-react/src/utils/i18n.ts","../../../packages/renderer-react/src/utils/color.ts","../../../packages/renderer-react/src/utils/immutable.ts","../../../packages/renderer-react/src/utils/constants.ts","../../../packages/renderer-react/src/utils/temp-value-keys.ts","../../../packages/renderer-react/src/utils/helper.ts","../../../packages/renderer-react/src/utils/content-editor-util.ts","../../../packages/renderer-react/src/utils/index.ts","../../../packages/renderer-react/src/components/common/styled.tsx","../../../packages/renderer-react/src/components/common/styled-setting.tsx","../../../packages/renderer-react/src/components/common/styled-bp.tsx","../../../packages/renderer-react/src/components/common/setting-item.tsx","../../../packages/renderer-react/src/components/common/toolbar-item.tsx","../../../packages/renderer-react/src/components/common/rename-dialog.tsx","../../../packages/renderer-react/src/components/common/outside-click-handler.tsx","../../../packages/renderer-react/src/components/common/alert.tsx","../../../packages/renderer-react/src/components/common/keyborad-hotkey-widget.tsx","../../../packages/renderer-react/src/components/widgets/toolbar/toolbar.tsx","../../../packages/renderer-react/src/components/widgets/toolbar/toolbar-item-layout.tsx","../../../packages/renderer-react/src/components/widgets/toolbar/toolbar-item-add-sheet.tsx","../../../packages/renderer-react/src/components/widgets/toolbar/toolbar-item-more.tsx","../../../packages/renderer-react/src/plugins/create-model.ts","../../../packages/renderer-react/src/plugins/event.ts","../../../packages/renderer-react/src/plugins/get-value.ts","../../../packages/renderer-react/src/types/index.ts","../../../packages/renderer-react/src/plugins/hotkey.ts","../../../packages/renderer-react/src/plugins/i18n.ts","../../../packages/renderer-react/src/plugins/layout.tsx","../../../packages/renderer-react/src/plugins/operation.ts","../../../packages/renderer-react/src/plugins/optimization.ts","../../../packages/renderer-react/src/plugins/platform.ts","../../../packages/renderer-react/src/components/widgets/mind-drag-scroll-widget.tsx","../../../packages/renderer-react/src/components/widgets/sheet/mind-map-sheet.tsx","../../../packages/renderer-react/src/components/widgets/sheet/sheet-title.tsx","../../../packages/renderer-react/src/components/widgets/right-top-panel/right-top-panel-widget.tsx","../../../packages/renderer-react/src/components/widgets/style-editor/border-style-editor.tsx","../../../packages/renderer-react/src/components/widgets/style-editor/clear-all-custom-style.tsx","../../../packages/renderer-react/src/components/widgets/style-editor/link-style-editor.tsx","../../../packages/renderer-react/src/components/widgets/style-editor/style-editor.tsx","../../../packages/renderer-react/src/utils/blueprint.ts","../../../packages/renderer-react/src/components/widgets/style-editor/padding-style-editor.tsx","../../../packages/renderer-react/src/components/widgets/style-editor/text-style-editor.tsx","../../../packages/renderer-react/src/components/widgets/theme-editor/topic-theme-editor.tsx","../../../packages/renderer-react/src/components/widgets/theme-editor/theme-editor.tsx","../../../packages/renderer-react/src/components/widgets/view-port-util/view-port-viewer.tsx","../../../packages/renderer-react/src/plugins/react/theme.tsx","../../../packages/renderer-react/src/components/widgets/diagram-root.tsx","../../../packages/renderer-react/src/components/widgets/dialog-widget.tsx","../../../packages/renderer-react/src/components/widgets/editor-root-breadcrumbs.tsx","../../../packages/renderer-react/src/components/widgets/root-sublinks.tsx","../../../packages/renderer-react/src/components/widgets/root-widget.tsx","../../../packages/renderer-react/src/components/widgets/topic-collapse-icon.tsx","../../../packages/renderer-react/src/hooks/click-outside-hook.tsx","../../../packages/renderer-react/src/hooks/use-event-listener.js","../../../packages/renderer-react/src/components/widgets/topic-block-content.tsx","../../../packages/renderer-react/src/components/widgets/topic-content-editor-popup.tsx","../../../packages/renderer-react/src/components/widgets/topic-context-menu.tsx","../../../packages/renderer-react/src/components/widgets/topic-desc.tsx","../../../packages/renderer-react/src/components/widgets/topic-drop-effect.tsx","../../../packages/renderer-react/src/components/widgets/topic-highlight.tsx","../../../packages/renderer-react/src/components/widgets/topic-node-widget.tsx","../../../packages/renderer-react/src/components/widgets/topic-popup-menu-item.tsx","../../../packages/renderer-react/src/components/widgets/topic-sub-links.tsx","../../../packages/renderer-react/src/components/widgets/topic-widget.tsx","../../../packages/renderer-react/src/plugins/react/context-menu.tsx","../../../packages/renderer-react/src/plugins/react/dialog.tsx","../../../packages/renderer-react/src/plugins/react/drag-and-drop.tsx","../../../packages/renderer-react/src/plugins/react/link-line.tsx","../../../packages/renderer-react/src/plugins/react/paste.tsx","../../../packages/renderer-react/src/plugins/react/drawer.tsx","../../../packages/renderer-react/src/plugins/react/rendering.tsx","../../../packages/renderer-react/src/plugins/react/right-top-panel-plugin.tsx","../../../packages/renderer-react/src/plugins/react/sheet.ts","../../../packages/renderer-react/src/plugins/react/toolbar.tsx","../../../packages/renderer-react/src/plugins/react/utils.tsx","../../../packages/renderer-react/src/plugins/react/index.ts","../../../packages/renderer-react/src/plugins/style.ts","../../../packages/renderer-react/src/plugins/theme.ts","../../../node_modules/is-url/index.js","../../../packages/renderer-react/src/plugins/topic-content-editor/react-contenteditable.tsx","../../../packages/renderer-react/src/plugins/topic-content-editor/topic-content-editor.tsx","../../../packages/renderer-react/src/plugins/topic-content-editor/topic-content-editor-plugin.tsx","../../../packages/renderer-react/src/plugins/undo.ts","../../../packages/renderer-react/src/plugins/index.ts","../../../packages/renderer-react/src/components/diagram.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport {\n  Controller,\n  DocModel,\n  KeyType,\n  SheetModel,\n  Topic,\n  TopicStyle\n} from '@blink-mind/core';\n\nexport interface BaseProps {\n  docModel: DocModel;\n  model: SheetModel;\n  key?: string;\n  topicKey?: KeyType;\n  topic?: Topic;\n  readOnly?: boolean;\n  topicStyle?: TopicStyle;\n  controller?: Controller;\n  dir?: string;\n  saveRef?: Function;\n  getRef?: Function;\n  setViewBoxScrollDelta?: Function;\n  setViewBoxScroll?: Function;\n  zoomFactor?: number;\n  zIndex?: number;\n  diagramState: any;\n  setDiagramState: (any) => void;\n}\n\nexport class BaseWidget<\n  P extends BaseProps = BaseProps,\n  S = any\n> extends React.Component<P, S> {\n  constructor(props: P) {\n    super(props);\n  }\n\n  operation(opType: string, arg: any) {\n    this.props.controller.run('operation', {\n      opType,\n      ...arg\n    });\n  }\n\n  run(name: string, arg: any) {\n    this.props.controller.run(name, arg);\n  }\n\n  get topic() {\n    return this.props.model.getTopic(this.props.topicKey);\n  }\n}\n","import * as React from 'react';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport styled from 'styled-components';\n\nimport debug from 'debug';\nconst log = debug('node:drag-scroll-widget');\n\nconst DragScrollView = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: scroll;\n`;\n\nconst DragScrollContent = styled.div`\n  position: relative;\n  width: max-content;\n`;\n\nconst useWindowListener = false;\n\ninterface DragScrollWidgetProps {\n  mouseKey?: 'left' | 'right';\n  needKeyPressed?: boolean;\n  canDragFunc?: () => Boolean;\n  enableMouseWheel: boolean;\n  children: (\n    setViewBoxScroll: (left: number, top: number) => void,\n    setViewBoxScrollDelta: (left: number, top: number) => void\n  ) => React.ReactNode;\n}\n\nexport class DragScrollWidget extends React.Component<\n  DragScrollWidgetProps,\n  any\n> {\n  constructor(props: DragScrollWidgetProps) {\n    super(props);\n    this.state = {\n      widgetStyle: {\n        width: '10000px',\n        height: '10000px'\n      }\n    };\n  }\n\n  static defaultProps = {\n    mouseKey: 'left',\n    needKeyPressed: false\n  };\n\n  contentResizeCallback = (\n    entries: ResizeObserverEntry[],\n    observer: ResizeObserver\n  ) => {\n    // log('contentResizeCallback', entries[0].contentRect, this.oldContentRect);\n    // if (entries[0].contentRect.width === 0 ) return;\n    log('contentResizeCallback');\n    if (this.oldContentRect) {\n      const widgetStyle = {\n        width: this.content.clientWidth + this.viewBox.clientWidth * 2,\n        height: this.content.clientHeight + this.viewBox.clientHeight * 2\n      };\n      this.bigView.style.width = widgetStyle.width + 'px';\n      this.bigView.style.height = widgetStyle.height + 'px';\n    }\n    this.oldContentRect = entries[0].contentRect;\n  };\n\n  contentResizeObserver = new ResizeObserver(this.contentResizeCallback);\n  // oldScroll: { left: number; top: number };\n  oldContentRect: any;\n  content: HTMLElement;\n  contentRef = ref => {\n    log('contentRef');\n    if (ref) {\n      this.content = ref;\n      this.oldContentRect = this.content.getBoundingClientRect();\n      this.contentResizeObserver.observe(this.content);\n    }\n  };\n\n  viewBox: HTMLElement;\n  viewBoxRef = ref => {\n    if (ref) {\n      this.viewBox = ref;\n      if (!this.props.enableMouseWheel) {\n        log('addEventListener onwheel');\n        this.viewBox.addEventListener(\n          'wheel',\n          function(e) {\n            log('onwheel');\n            (e.ctrlKey || e.metaKey) && e.preventDefault();\n          },\n          {\n            passive: false\n          }\n        );\n      }\n      this.setViewBoxScroll(\n        this.viewBox.clientWidth,\n        this.viewBox.clientHeight\n      );\n    }\n  };\n\n  bigView: HTMLElement;\n  bigViewRef = ref => {\n    if (ref) {\n      this.bigView = ref;\n    }\n  };\n\n  setWidgetStyle = () => {\n    log('setWidgetStyle');\n    if (this.content && this.viewBox && this.bigView) {\n      this.bigView.style.width =\n        (this.content.clientWidth + this.viewBox.clientWidth) * 2 + 'px';\n      this.bigView.style.height =\n        (this.content.clientHeight + this.viewBox.clientHeight) * 2 + 'px';\n\n      this.content.style.left = this.viewBox.clientWidth + 'px';\n      this.content.style.top = this.viewBox.clientHeight + 'px';\n    }\n  };\n\n  setViewBoxScroll = (left: number, top: number) => {\n    log(`setViewBoxScroll ${left} ${top}`);\n    if (this.viewBox) {\n      this.viewBox.scrollLeft = left;\n      this.viewBox.scrollTop = top;\n    }\n  };\n\n  setViewBoxScrollDelta = (deltaLeft: number, deltaTop: number) => {\n    log(\n      `setViewBoxScrollDelta ${deltaLeft} ${deltaTop} ${this.viewBox\n        .scrollLeft + deltaLeft} ${this.viewBox.scrollTop + deltaTop}`\n    );\n    if (this.viewBox) {\n      this.viewBox.scrollLeft += deltaLeft;\n      this.viewBox.scrollTop += deltaTop;\n    }\n  };\n\n  onMouseDown = e => {\n    log('onMouseDown');\n    // log(e.nativeEvent.target);\n\n    // mouseKey 表示鼠标按下那个键才可以进行拖动，左键或者右键\n    // needKeyPressed 为了支持是否需要按下ctrl键，才可以进行拖动\n    // canDragFunc是一个函数，它是为了支持使用者以传入函数的方式，这个函数的返回值表示当前的内容是否可以被拖拽而移动\n    const { mouseKey, needKeyPressed, canDragFunc } = this.props;\n    if (canDragFunc && !canDragFunc()) return;\n    if (\n      (e.button === 0 && mouseKey === 'left') ||\n      (e.button === 2 && mouseKey === 'right')\n    ) {\n      if (needKeyPressed) {\n        if (!e.ctrlKey) return;\n      }\n      this._lastCoordX = this.viewBox.scrollLeft + e.nativeEvent.clientX;\n      this._lastCoordY = this.viewBox.scrollTop + e.nativeEvent.clientY;\n\n      const ele = useWindowListener ? window : this.viewBox;\n      ele.addEventListener('mousemove', this.onMouseMove);\n      ele.addEventListener('mouseup', this.onMouseUp);\n    }\n  };\n\n  onMouseUp = e => {\n    log('onMouseUp');\n    const ele = useWindowListener ? window : this.viewBox;\n    ele.removeEventListener('mousemove', this.onMouseMove);\n    ele.removeEventListener('mouseup', this.onMouseUp);\n  };\n\n  // _lastCoordX和_lastCorrdY 是为了在拖动过程中 计算 viewBox的scrollLeft和scrollTop值用到\n  // _lastCoordX和_lastCorrdY 记录下拖动开始时刻viewBox的scroll值和鼠标位置值\n  _lastCoordX: number;\n  _lastCoordY: number;\n\n  onMouseMove = (e: MouseEvent) => {\n    this.viewBox.scrollLeft = this._lastCoordX - e.clientX;\n    this.viewBox.scrollTop = this._lastCoordY - e.clientY;\n    // log(`onMouseMove ${this.viewBox.scrollLeft} ${this.viewBox.scrollTop}`);\n  };\n\n  handleContextMenu = e => {\n    e.preventDefault();\n  };\n\n  componentDidMount(): void {\n    this.setWidgetStyle();\n    document.addEventListener('contextmenu', this.handleContextMenu);\n  }\n\n  componentWillUnmount(): void {\n    document.removeEventListener('contextmenu', this.handleContextMenu);\n  }\n\n  setZoomFactor(zoomFactor) {\n    this.bigView.style.transform = `scale(${zoomFactor})`;\n    this.bigView.style.transformOrigin = '50% 50%';\n  }\n\n  render() {\n    // log('render');\n    const style = {\n      ...this.state.widgetStyle\n      // zoom:this.props.zoomFactor,\n      // transform: `scale(${this.props.zoomFactor})`,\n      // transformOrigin: '50% 50%'\n    };\n    return (\n      <DragScrollView ref={this.viewBoxRef} onMouseDown={this.onMouseDown}>\n        <div style={style} ref={this.bigViewRef}>\n          <DragScrollContent\n            ref={this.contentRef}\n            style={this.state.contentStyle}\n          >\n            {this.props.children(\n              this.setViewBoxScroll,\n              this.setViewBoxScrollDelta\n            )}\n          </DragScrollContent>\n        </div>\n      </DragScrollView>\n    );\n  }\n}\n","import debug from 'debug';\nimport * as React from 'react';\n\nconst log = debug('node:save-ref');\n\ninterface SaveRefProps {\n  children: (\n    saveRef: Function,\n    getRef: Function,\n    deleteRef: Function,\n    registerRefListener: Function\n  ) => React.ReactNode;\n}\n\ntype RefListener = (name: string, ref: HTMLElement) => void;\n\n\nexport class SaveRef extends React.Component<SaveRefProps> {\n  getRef = name => {\n    // log(this);\n    return this[name];\n  };\n\n  saveRef = name => {\n    return node => {\n      if (node) {\n        this[name] = node;\n        this.fireListener(name, node);\n      } else {\n        delete this[name];\n      }\n    };\n  };\n\n  deleteRef = name => {\n    log('deleteRef:', name);\n    delete this[name];\n  };\n\n  observers: Map<string, [RefListener]> = new Map();\n\n  fireListener = (name: string, ref: HTMLElement) => {\n    if (this.observers.has(name)) {\n      const listeners = this.observers.get(name);\n      for (const listener of listeners) {\n        listener(name, ref);\n      }\n    }\n  };\n\n  registerRefListener = (name, listener: RefListener) => {\n    if (!this.observers.has(name)) {\n      this.observers.set(name, [listener]);\n    } else {\n      this.observers.get(name).push(listener);\n    }\n  };\n\n  render() {\n    return this.props.children(\n      this.saveRef,\n      this.getRef,\n      this.deleteRef,\n      this.registerRefListener.bind(this)\n    );\n  }\n}\n","import * as React from 'react';\nexport const IconName = {\n  MORE: 'more',\n  SHOW_MENU: 'show-menu',\n  CLOSE: 'close',\n  COLOR_PICKER: 'color-picker',\n  NOTES: 'notes',\n  PLUS: 'plus',\n  MINUS: 'minus',\n  COLLAPSE_ALL: 'collapse',\n  EXPAND_ALL: 'expand',\n  CENTER: 'center',\n  TRASH: 'trash',\n  SEARCH: 'search',\n  THEME: 'theme',\n  EXPORT: 'export',\n  OPEN_FILE: 'openfile',\n  OPEN: 'open',\n  NEW_FILE: 'newfile',\n  SAVE: 'save',\n  LAYOUT_LEFT_AND_RIGHT: 'layout-left-and-right',\n  LAYOUT_LEFT: 'layout-left',\n  LAYOUT_RIGHT: 'layout-right',\n  UNDO: 'undo',\n  REDO: 'redo',\n  MOVE_UP: 'move-up',\n  MOVE_DOWN: 'move-down',\n  COPY: 'copy',\n  RESIZE: 'resize',\n  HYPERLINK: 'hyperlink',\n  PASTE: 'paste',\n  PASTE_AS_TEXT: 'paste-as-text',\n  IMAGE: 'image'\n};\n\nexport function iconClassName(name) {\n  return `icon iconfont bm-${name}`;\n}\n\nexport function Icon(iconName) {\n  return <span className={iconClassName(iconName)} />;\n}\n","export function contentRefKey(key) {\n  return `content-${key}`;\n}\n\nexport function contentEditorRefKey(key) {\n  return `content-editor-${key}`;\n}\n\nexport function descEditorRefKey(key) {\n  return `desc-editor-${key}`;\n}\n\nexport function topicWidgetRefKey(key) {\n  return `topic-widget-${key}`;\n}\nexport function topicWidgetRootRefKey(key) {\n  return `topic-widget-root-${key}`;\n}\n\nexport function topicNodeRefKey(key) {\n  return `topic-node-${key}`;\n}\n\nexport function linksRefKey(key) {\n  return `links-${key}`;\n}\n\nexport function linksSvgRefKey(key) {\n  return `links-svg-${key}`;\n}\n\nexport function collapseRefKey(key) {\n  return `collapse-${key}`;\n}\n\nexport function dropAreaRefKey(key, dir) {\n  return `dropArea-${dir}-${key}`;\n}\n\nexport const RefKey = {\n  SHEET_ROOT_KEY: 'SHEET-ROOT-',\n  DRAG_SCROLL_WIDGET_KEY: 'DRAG-SCROLL-WIDGET-',\n  SVG_HIGHLIGHT_KEY: 'SVG-HIGHLIGHT-',\n  FOCUS_HIGHLIGHT_KEY: 'FOCUS-HIGHLIGHT-',\n  DROP_EFFECT_KEY: 'DROP-EFFECT-',\n  SVG_DROP_EFFECT_KEY: 'SVG-DROP-EFFECT-',\n  NODE_LAYER: 'NODE-LAYER-'\n};\nexport const EventKey = {\n  CENTER_ROOT_TOPIC: 'CENTER_ROOT_TOPIC'\n};\n\nexport const PropKey = {\n  DIAGRAM_CUSTOMIZE_BASE_Z_INDEX: 'DIAGRAM_CUSTOMIZE_BASE_Z_INDEX',\n  TOPIC_CONTEXT_MENU_ENABLED: 'TOPIC_CONTEXT_MENU_ENABLED',\n  TOPIC_TITLE: 'TOPIC_TITLE',\n  DRAG_DROP_STATE: 'DRAG_DROP_STATE',\n  RIGHT_TOP_PANEL_STATE: 'RIGHT_TOP_PANEL_STATE',\n  OPERATION_ENABLED: 'OPERATION_ENABLED'\n};\n\nexport const I18nKey = {\n  MIND_MAP: 'MIND_MAP',\n  OUTLINER: 'OUTLINER',\n  COPY: 'COPY',\n  PASTE: 'PASTE',\n  DUPLICATE: 'DUPLICATE',\n  DELETE: 'DELETE',\n\n  CONFIRM: 'CONFIRM',\n  CANCEL: 'CANCEL',\n  REMOVE: 'REMOVE',\n  RENAME: 'RENAME',\n  DEFAULT: 'DEFAULT',\n  SEARCH: 'SEARCH',\n  BROWSE: 'BROWSE',\n  CHOOSE_FILE: 'CHOOSE_FILE',\n\n  LAYOUT: 'LAYOUT',\n  LEFT_AND_RIGHT: 'LEFT_AND_RIGHT',\n  ONLY_LEFT: 'ONLY_LEFT',\n  ONLY_RIGHT: 'ONLY_RIGHT',\n\n  ADD_SHEET: 'ADD_SHEET',\n  SHEET: 'SHEET',\n\n  EDIT: 'EDIT',\n  PASTE_AS_PLAIN_TEXT: 'PASTE_AS_PLAIN_TEXT',\n  PASTE_WITH_STYLE: 'PASTE_WITH_STYLE',\n  ADD_SIBLING: 'ADD_SIBLING',\n  ADD_CHILD: 'ADD_CHILD',\n  EDIT_NOTES: 'EDIT_NOTES',\n  REMOVE_NOTES: 'REMOVE_NOTES',\n  CONVERT_TO_PLAIN_TEXT: 'CONVERT_TO_PLAIN_TEXT',\n  SET_AS_EDITOR_ROOT: 'SET_AS_EDITOR_ROOT',\n  EXPORT: 'EXPORT',\n  EXPORT_TOPIC: 'EXPORT_TOPIC',\n  EDIT_TOPOLOGY_DIAGRAM: 'EDIT_TOPOLOGY_DIAGRAM',\n  SET_TOPIC_REFERENCES: 'SET_TOPIC_REFERENCES',\n  INSERT_IMAGE: 'INSERT_IMAGE',\n  //========================================\n  TOPIC_STYLE: 'TOPIC_STYLE',\n  STYLE: 'STYLE',\n  TEXT_EDITOR: 'TEXT_EDITOR',\n  LINK: 'LINK',\n  LINK_TO_PARENT: 'LINK_TO_PARENT',\n  SUB_LINKS: 'SUB_LINKS',\n  COPY_STYLE: 'COPY_STYLE',\n  PASTE_STYLE: 'PASTE_STYLE',\n  CLEAR_TOPIC_STYLE: 'CLEAR_TOPIC_STYLE',\n  CLEAR_ALL_CUSTOM_STYLE: 'CLEAR_ALL_CUSTOM_STYLE',\n  LINE_TYPE: 'LINE_TYPE',\n  //=======================================\n  THEME: 'THEME',\n  GLOBAL: 'GLOBAL',\n  HIGHLIGHT: 'HIGHLIGHT',\n  RANDOM_COLOR: 'RANDOM_COLOR',\n  NORMAL_TOPIC: 'NORMAL_TOPIC',\n  PRIMARY_TOPIC: 'PRIMARY_TOPIC',\n  ROOT_TOPIC: 'ROOT_TOPIC',\n  EXPORT_THEME: 'EXPORT_THEME',\n  IMPORT_THEME: 'IMPORT_THEME',\n  //=======================================\n  TAGS: 'TAGS',\n  TAGS_MANAGER: 'TAGS_MANAGER',\n  TAG_NAME: 'TAG_NAME',\n  ADD_TAG: 'ADD_TAG',\n  UPDATE_TAG: 'UPDATE_TAG',\n  ALREADY_ADDED: 'ALREADY_ADDED',\n  CAN_BE_ADDED: 'CAN_BE_ADDED',\n  TOPICS_THAT_USE_THIS_TAG: 'TOPICS_THAT_USE_THIS_TAG',\n  //=======================================\n  BACKGROUND: 'BACKGROUND',\n  COLOR: 'COLOR',\n  BORDER: 'BORDER',\n  WIDTH: 'WIDTH',\n  RADIUS: 'RADIUS',\n  FONT_FAMILY: 'FONT_FAMILY',\n  FONT_STYLE: 'FONT_STYLE',\n  NORMAL: 'NORMAL',\n  ITALIC: 'ITALIC',\n  OBLIQUE: 'OBLIQUE',\n  FONT_WEIGHT: 'FONT_WEIGHT',\n  FONT_SIZE: 'FONT_SIZE',\n  LINE_HEIGHT: 'LINE_HEIGHT',\n  PADDING: 'PADDING',\n  TOP: 'TOP',\n  BOTTOM: 'BOTTOM',\n  LEFT: 'LEFT',\n  RIGHT: 'RIGHT',\n  NONE: 'NONE',\n  SOLID: 'SOLID',\n  DOTTED: 'DOTTED',\n  DASHED: 'DASHED',\n  DOUBLE: 'DOUBLE',\n\n  ROUND: 'ROUND',\n  CURVE: 'CURVE',\n  LINE: 'LINE',\n\n  COLLAPSE_ALL: 'COLLAPSE_ALL',\n  EXPAND_ALL: 'EXPAND_ALL',\n  CENTER_ROOT_TOPIC: 'CENTER_ROOT_TOPIC',\n  ZOOM: 'ZOOM',\n  ZOOM_IN: 'ZOOM_IN',\n  ZOOM_OUT: 'ZOOM_OUT',\n  RESET: 'RESET',\n  RESET_ZOOM: 'RESET_ZOOM',\n\n  NOTE_PLACEHOLDER: 'NOTE_PLACEHOLDER',\n\n  TOPOLOGY_DIAGRAM_EDITOR: 'TOPOLOGY_DIAGRAM_EDITOR',\n  BASIC: 'BASIC',\n  FLOW_GRAPH: 'FLOW_GRAPH',\n  ACTIVITY_DIAGRAM: 'ACTIVITY_DIAGRAM',\n  SEQUENCE_DIAGRAM: 'SEQUENCE_DIAGRAM',\n  CLASS_DIAGRAM: 'CLASS_DIAGRAM',\n\n  REFERENCE_TOPICS: 'REFERENCE_TOPICS',\n  REFERENCED_TOPICS: 'REFERENCED_TOPICS',\n  GOTO_ORIGINAL_TOPIC: 'GOTO_ORIGINAL_TOPIC',\n\n  INDENT: 'INDENT',\n  OUTDENT: 'OUTDENT',\n  PASTE_AND_SPLIT_BY_LINE_BREAK: 'PASTE_AND_SPLIT_BY_LINE_BREAK',\n\n  SELECT_REF_TOPICS_TIP: 'SELECT_REF_TOPICS_TIP',\n  TAG_NAME_OVER_MAX_TIP: 'TAG_NAME_OVER_MAX_TIP',\n  DELETE_TAG_TIP: 'DELETE_TAG_TIP',\n  DELETE_TOPOLOGY_TIP: 'DELETE_TOPOLOGY_TIP',\n  DELETE_REFERENCE_TIP: 'DELETE_REFERENCE_TIP',\n  FILE_FORMAT_ERROR: 'FILE_FORMAT_ERROR',\n\n  SELECT_IMAGE_TIP1: 'SELECT_IMAGE_TIP1',\n  SELECT_IMAGE_TIP2: 'SELECT_IMAGE_TIP2',\n  SELECT_IMAGE_ERR_TIP: 'SELECT_IMAGE_ERR_TIP',\n\n  HYPERLINK: 'HYPERLINK',\n  INSERT_HYPERLINK: 'INSERT_HYPERLINK',\n\n  SET_TO_ORIGINAL_SIZE: 'SET_TO_ORIGINAL_SIZE',\n  MOVE_UP: 'MOVE_UP',\n  MOVE_DOWN: 'MOVE_DOWN'\n};\n\nexport const TempValueKey = {\n  EDITOR_CONTENT: 'EDITOR_CONTENT'\n};\n","export const stopPropagation = e => {\n  e.stopPropagation();\n};\n","export function browserDownloadFile(url: string, filename: string) {\n  const link = document.createElement('a');\n  link.href = url;\n  link.download = filename;\n  link.click();\n}\n\nexport function browserDownloadText(text: string, filename: string) {\n  const url = `data:text/plain,${encodeURIComponent(text)}`;\n  browserDownloadFile(url, filename);\n}\n\nexport function browserOpenFile(accept: string): Promise<any> {\n  const input = document.createElement('input');\n  input.type = 'file';\n  input.accept = accept;\n\n  return new Promise<string>((resolve, reject) => {\n    input.addEventListener('change', evt => {\n      //@ts-ignore\n      const file = evt.target.files[0];\n      const fr = new FileReader();\n\n      fr.onload = (evt: ProgressEvent) => {\n        //@ts-ignore\n        const txt = evt.target.result;\n        resolve(txt);\n      };\n\n      fr.onerror = (evt: ProgressEvent) => {\n        //@ts-ignore\n        reject(evt.target.error);\n      };\n      fr.readAsText(file);\n    });\n    input.click();\n  });\n}\n","export function paddingCss(arg: {\n  top: number;\n  right: number;\n  bottom: number;\n  left: number;\n}) {\n  const { top = 0, right = 0, bottom = 0, left = 0 } = arg;\n  return `${top}px ${right}px ${bottom}px ${left}px`;\n}\n\nexport function getComputedStyle(element: Element, property: string) {\n  return window.getComputedStyle(element, null).getPropertyValue(property);\n}\n","// import { I18nKey } from './keys';\n\nexport function getI18nText(ctx, key: string | string[]) {\n  try {\n    if (Array.isArray(key)) {\n      return key.map(k =>\n        ctx.controller.run('getI18nText', { ...ctx, key: k })\n      );\n    }\n    return ctx.controller.run('getI18nText', {\n      ...ctx,\n      key: key.toUpperCase()\n    });\n  } catch (e) {\n    throw e;\n  }\n}\n\n// export function getCssI18nText(ctx, cssName) {\n//   const cssNames = {\n//     none: I18nKey.NONE,\n//     solid: I18nKey.SOLID,\n//     dotted: I18nKey.DOTTED,\n//     dashed: I18nKey.DASHED,\n//     double: I18nKey.DOUBLE,\n//\n//     round: I18nKey.ROUND,\n//     curve: I18nKey.CURVE,\n//\n//   };\n//\n//   return getI18nText(ctx, cssNames[cssName]);\n// }\n","import { Colors } from '@blueprintjs/core';\nimport * as colorString from 'color-string';\n\nexport const COLORS = {\n  HIGHLIGHT: '#48aff0',\n  DARK: {\n    ZINDEX_BG: '#383838',\n    TOOLBAR_BG: '#494646',\n    ITEM_BG: '#726E6F',\n    ITEM_BG_ACTIVE: '#58595A',\n    ITEM: '#C6C2C3',\n    ITEM_ACTIVE: '#FFFFFF',\n    // CONTAINER_BG: '#2f3235'\n    CONTAINER_BG: '#444'\n  },\n\n  LIGHT: {\n    TOOLBAR_BG: '#D6D6D6',\n    ITEM: Colors.GRAY3,\n    ITEM_BG: Colors.LIGHT_GRAY1,\n    ITEM_ACTIVE: Colors.BLACK,\n    ITEM_BG_ACTIVE: Colors.LIGHT_GRAY1,\n    CONTAINER_BG: Colors.LIGHT_GRAY5\n  }\n};\n\nexport function setColorAlpha(color: string, alpha: number) {\n  const [r, g, b, a] = colorString.get.rgb(color);\n  return colorString.to.rgb([r, g, b, alpha]);\n}\n\nexport function setColorAlphaPercent(color: string, percent: number) {\n  const [r, g, b, a] = colorString.get.rgb(color);\n  return colorString.to.rgb([r, g, b, a * percent]);\n}\n","import { List } from 'immutable';\nexport function swap<T>(list: List<T>, idx1: number, idx2: number) {\n  const size = list.size;\n  if (idx1 >= 0 && idx1 < size && idx2 >= 0 && idx2 < size && idx1 !== idx2) {\n    const v1 = list.get(idx1);\n    const v2 = list.get(idx2);\n    return list\n      .delete(idx1)\n      .insert(idx1, v2)\n      .delete(idx2)\n      .insert(idx2, v1);\n  }\n  return list;\n}\n","export const isOSX = navigator.userAgent.includes('Mac');\n","import { SheetModel } from '@blink-mind/core';\n\nexport function tvZoomFactorKey(model: SheetModel) {\n  return `ZoomFactor-${model.id}-${model.config.viewMode}`;\n}\n","import { Controller } from '@blink-mind/core';\n\nexport function op(controller: Controller, args) {\n  controller.run('operation', args);\n}\n","export function selectTo(\n  div: HTMLElement,\n  sel: Selection,\n  dir: 'start' | 'end'\n) {\n  sel = sel || window.getSelection();\n  const anchorNode = sel.anchorNode;\n  if (div.contains(anchorNode)) {\n    const anchorOffset = sel.anchorOffset;\n    const range = new Range();\n    if (dir === 'end') {\n      range.setStart(anchorNode, anchorOffset);\n      range.setEndAfter(div.lastChild);\n    } else {\n      range.setStartBefore(div.firstChild);\n      range.setEnd(anchorNode, anchorOffset);\n    }\n    sel.removeAllRanges();\n    sel.addRange(range);\n  }\n}\n\nexport function selectToEnd(div: HTMLElement, sel: Selection) {\n  selectTo(div, sel, 'end');\n}\n\nexport function selectToStart(div: HTMLElement, sel: Selection) {\n  selectTo(div, sel, 'start');\n}\n","import { KeyType } from '@blink-mind/core';\n\nexport function getLinkKey(fromKey: KeyType, toKey: KeyType) {\n  return `link-${fromKey}-${toKey}`;\n}\n\nexport type Point = {\n  x: number;\n  y: number;\n};\n\nexport function centerY(rect: ClientRect) {\n  return (rect.top + rect.bottom) / 2;\n}\n\nexport function centerX(rect: ClientRect) {\n  return (rect.left + rect.right) / 2;\n}\n\nexport function centerPointX(p1, p2) {\n  return (p1.x + p2.x) / 2;\n}\n\nexport function centerPointY(p1, p2) {\n  return (p1.y + p2.y) / 2;\n}\n\nexport function center(rect) {\n  return [(rect.left + rect.right) / 2, (rect.top + rect.bottom) / 2];\n}\nexport function getRelativeRect(\n  el: HTMLElement,\n  rel: HTMLElement,\n  scale: number = 1\n) {\n  const rect = el.getBoundingClientRect();\n  const relRect = rel.getBoundingClientRect();\n\n  const relCenter = center(relRect);\n  const elCenter = center(rect);\n  elCenter[0] = (elCenter[0] - relCenter[0]) / scale;\n  elCenter[1] = (elCenter[1] - relCenter[1]) / scale;\n  const width = rect.width / scale;\n  const height = rect.height / scale;\n  return {\n    left: elCenter[0] - width / 2,\n    right: elCenter[0] + width / 2,\n    top: elCenter[1] - height / 2,\n    bottom: elCenter[1] + height / 2,\n    width,\n    height\n  };\n}\n\nexport function getRelativeVector(el: HTMLElement, rel: HTMLElement) {\n  const rect = el.getBoundingClientRect();\n  const relRect = rel.getBoundingClientRect();\n  const relCenter = center(relRect);\n  const elCenter = center(rect);\n  return [elCenter[0] - relCenter[0], elCenter[1] - relCenter[1]];\n}\n\nexport * from './icon';\nexport * from './keys';\nexport * from './events';\nexport * from './file';\nexport * from './css';\nexport * from './i18n';\nexport * from './color';\nexport * from './immutable';\nexport * from './constants';\nexport * from './temp-value-keys';\nexport * from './helper';\nexport * from './content-editor-util';\n","import { Card, Checkbox } from '@blueprintjs/core';\nimport styled from 'styled-components';\nimport { COLORS } from '../../utils';\n\nexport const Flex = styled.div`\n  display: flex;\n  flex-direction: ${props =>\n    props.flexDirection ? props.flexDirection : 'row'};\n  align-items: ${props => props.alignItems};\n  justify-content: ${props => props.justifyContent};\n`;\n\nexport const InlineBlockSpan = styled.span`\n  display: inline-block;\n`;\n\nexport const Margin = styled.div`\n  margin: ${props => props.margin};\n`;\n\nexport const ShowMenuIcon = styled.div`\n  font-size: 20px !important;\n`;\n\nexport const IconBg = styled.div`\n  padding: 5px;\n  cursor: pointer;\n`;\n\nexport const Btn = styled.div`\n  cursor: pointer;\n  &:hover {\n    color: ${COLORS.LIGHT.ITEM_BG_ACTIVE};\n  }\n`;\n\nexport const StyledCheckbox = styled(Checkbox)`\n  margin-bottom: 0px !important;\n`;\n\nexport const CloseIcon = styled.div`\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  z-index: 1;\n  //padding: 5px;\n`;\n\nexport const Title = styled.div`\n  height: 16px;\n`;\n\nexport const TopicBlockIcon = styled.span`\n  margin: 0px 10px;\n  &:hover {\n    color: palevioletred;\n  }\n`;\n\nexport const ZIndex = styled.div`\n  z-index: ${props => props.zIndex};\n  .bp3-dark & {\n    background-color: ${COLORS.DARK.ZINDEX_BG};\n  }\n`;\n\nexport const PanelTabRoot = styled.div`\n  font-size: 12px;\n  min-width: 380px;\n  max-width: 482px;\n  max-height: 480px;\n  overflow: auto;\n`;\n\nexport const ToolbarItemPopoverTarget = styled.div`\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n`;\n\nexport const VListContainer = styled.div`\n  max-height: ${props => props.maxHeight || '300px'};\n  overflow-y: auto;\n  overflow-x: hidden;\n`;\n","import { Colors } from '@blueprintjs/core';\nimport styled from 'styled-components';\nimport { COLORS } from '../../utils';\n\nexport const SettingTitle = styled.div`\n  margin-top: 10px;\n  margin-bottom: 5px;\n  font-weight: bold;\n`;\n\nexport const SettingItem = styled.span`\n  margin: 0 10px 0 2px;\n`;\n\nexport const SettingBoxContainer = styled.div`\n  padding: 10px;\n  margin: 0 0 10px 0;\n  //border: rgba(16, 22, 26, 0.15) solid 1px;\n  border-radius: 5px;\n\n  background: ${COLORS.LIGHT.CONTAINER_BG};\n\n  .bp3-dark & {\n    background: ${COLORS.DARK.CONTAINER_BG};\n  }\n`;\n\nexport const SettingLabel = styled(SettingItem)``;\n\nexport const SettingRow = styled.div`\n  display: flex;\n  align-items: center;\n  //justify-content: center;\n  margin: 5px 0;\n`;\n\nexport const SettingRowTitle = styled.div`\n  margin: 0 5px 0 0;\n  width: 88px;\n`;\n\nexport const ColorBar = styled.div`\n  height: 3px;\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  margin-bottom: 2px;\n  background: ${props => props.color};\n`;\n\nexport const WithBorder = styled.div`\n  border: 1px solid grey;\n  cursor: pointer;\n  font-weight: bold;\n`;\n","import { Colors } from '@blueprintjs/core';\nimport { createGlobalStyle } from 'styled-components';\nimport { COLORS } from '../../utils';\n\nexport const GlobalStyle = createGlobalStyle`\n  .bp3-dark {\n    color : ${Colors.GRAY5} !important;\n    .bp3-card {\n      background-color: ${COLORS.DARK.TOOLBAR_BG} !important;\n    }\n    \n    .bp3-menu-item {\n      &:active &:hover {\n        background-color: ${COLORS.DARK.ITEM_BG_ACTIVE} !important;\n      }\n    }\n    \n    .bp3-button, .bp3-menu, .bp3-input, .bp3-menu-item, .bp3-tab, .bp3-drawer {\n      color : ${COLORS.DARK.ITEM};\n      background-color: ${COLORS.DARK.ITEM_BG} ;\n    }\n  }\n`;\n","import {\n  Button,\n  Divider,\n  InputGroup,\n  MenuItem,\n  NumericInput,\n  Popover\n} from '@blueprintjs/core';\nimport { ItemPredicate, Select } from '@blueprintjs/select';\nimport { ItemRenderer } from '@blueprintjs/select/src/common/itemRenderer';\nimport * as React from 'react';\nimport { SketchPicker } from 'react-color';\nimport styled from 'styled-components';\nimport { getI18nText, iconClassName, IconName } from '../../utils';\nimport { Flex } from './styled';\nimport { ColorBar, SettingItem, WithBorder } from './styled-setting';\nconst Label = styled.div`\n  margin: ${props => (props.width == null ? '0 5px 0 0' : null)};\n  width: ${props => props.width};\n`;\n\nexport function SettingGroup(props) {\n  return <div className=\"bm-setting-group bp3-divider\">{props.children}</div>;\n}\n\nexport function SettingItemFlex(props) {\n  const { layout = 'h', children } = props;\n  const flexProps = {\n    flexDirection: layout === 'h' ? 'row' : 'column',\n    alignItems: 'center'\n  };\n  return (\n    <SettingItem>\n      <Flex {...flexProps}>{children}</Flex>\n    </SettingItem>\n  );\n}\n\nexport interface SettingItemColorPickerProps {\n  title?: string;\n  layout?: string;\n  color: string;\n  handleColorChange: (color: string) => void;\n}\n\nexport function SettingItemColorPicker(props: SettingItemColorPickerProps) {\n  const { title, layout = 'h', color, handleColorChange } = props;\n  return (\n    <SettingItemFlex layout={layout}>\n      {title != null && <Label>{title}</Label>}\n      <Popover>\n        <WithBorder>\n          <div className={iconClassName(IconName.COLOR_PICKER)} />\n          <ColorBar color={color} />\n        </WithBorder>\n        <div>\n          <SketchPicker\n            color={color}\n            onChangeComplete={color => {\n              const { r, g, b, a } = color.rgb;\n              handleColorChange(`rgba(${r},${g},${b},${a})`);\n            }}\n          />\n        </div>\n      </Popover>\n    </SettingItemFlex>\n  );\n}\n\nexport interface SettingItemButtonProps {\n  title: string;\n  onClick: (e) => void;\n  disabled?: boolean;\n}\n\nexport function SettingItemButton(props: SettingItemButtonProps) {\n  const { title, ...restProps } = props;\n  return (\n    <SettingItem>\n      <Button {...restProps}>{title}</Button>\n    </SettingItem>\n  );\n}\n\nexport interface SettingItemNumericInputProps {\n  layout?: string;\n  title: string;\n  labelWidth?: string;\n  value: number;\n  min: number;\n  max: number;\n  onValueChange: (valueAsNumber: number, valueAsString: string) => void;\n}\n\nexport function SettingItemNumericInput(props: SettingItemNumericInputProps) {\n  const { layout = 'h', labelWidth, title, ...restProps } = props;\n  return (\n    <SettingItemFlex layout={layout}>\n      <Label width={labelWidth}>{title}</Label>\n      <NumericInput {...restProps} />\n    </SettingItemFlex>\n  );\n}\n\nexport interface SettingItemInputProps {\n  layout?: string;\n  title: string;\n  labelWidth?: string;\n  style?: Object;\n  value: string;\n  onChange: React.FormEventHandler<HTMLElement>;\n}\n\nexport function SettingItemInput(props) {\n  const { layout = 'h', labelWidth, title, ...restProps } = props;\n  return (\n    <SettingItemFlex layout={layout}>\n      <Label width={labelWidth}>{title} </Label>\n      <InputGroup {...restProps} />\n    </SettingItemFlex>\n  );\n}\n\nexport function SettingItemSelect<T>(props: {\n  layout?: string;\n  filterable?: boolean;\n  title?: string;\n  labelWidth?: string;\n  text: string | React.ReactElement;\n  items: T[];\n  itemRenderer: ItemRenderer<T>;\n  itemPredicate?: ItemPredicate<T>;\n  onItemSelect: (item: T, event?: React.SyntheticEvent<HTMLElement>) => void;\n}) {\n  const {\n    layout = 'h',\n    filterable = false,\n    title,\n    labelWidth,\n    text,\n    ...rest\n  } = props;\n  const PxSelect = Select.ofType<T>();\n  const pxProps = {\n    filterable,\n    ...rest\n  };\n  return (\n    <SettingItemFlex layout={layout}>\n      {title && <Label width={labelWidth}>{title}</Label>}\n      <PxSelect {...pxProps}>\n        <Button text={text} />\n      </PxSelect>\n    </SettingItemFlex>\n  );\n}\n\nexport const renderItem = unit => (v, { handleClick }) => {\n  return <MenuItem text={`${v}${unit}`} key={v} onClick={handleClick} />;\n};\n\nexport const renderItemI18n = ctx => (v, { handleClick }) => {\n  return <MenuItem text={getI18nText(ctx, v)} key={v} onClick={handleClick} />;\n};\n\nexport const PxSelect = Select.ofType();\n\nexport const borderWidthItems = [...Array(7).keys()];\n","import cx from 'classnames';\nimport * as React from 'react';\nimport { PropKey } from '../../utils';\nimport { iconClassName } from '../../utils';\nimport { BaseProps } from './base-widget';\n\ninterface ToolbarItemProps extends BaseProps {\n  onClick?: (e) => void;\n  disabled?: boolean;\n  children?: any;\n  iconName: string;\n  iconCxName?: string;\n  className?: string;\n  label?: string;\n}\nexport function ToolbarItem(props: ToolbarItemProps) {\n  const {\n    controller,\n    children,\n    onClick,\n    className,\n    iconName,\n    iconCxName\n  } = props;\n  let { disabled } = props;\n  disabled = disabled || !controller.getValue(PropKey.OPERATION_ENABLED, props);\n  const handleClick = e => {\n    if (!disabled && onClick) onClick(e);\n  };\n  const nProps = {\n    onClick: handleClick,\n    className: cx(\n      'bm-toolbar-item',\n      { 'bm-toolbar-item-disabled': disabled },\n      className\n    )\n  };\n\n  return (\n    <div {...nProps}>\n      <div className={cx(iconClassName(iconName), iconCxName)} />\n      {children}\n    </div>\n  );\n}\n\ninterface ToolbarGroupItemProps {\n  items: ToolbarItemProps[];\n}\n\nexport function ToolbarGroupItem(props: ToolbarGroupItemProps) {\n  const { items } = props;\n  return (\n    <div className=\"bm-toolbar-group\">\n      {items.map(item => {\n        const iProps = {\n          ...item\n        };\n        return <ToolbarItem {...iProps} />;\n      })}\n    </div>\n  );\n}\n","import { AnchorButton, Button, Classes, Dialog } from '@blueprintjs/core';\nimport { useState } from 'react';\nimport * as React from 'react';\nimport { getI18nText, I18nKey } from '../../utils';\nexport function RenameDialog(props) {\n  const { handleConfirm, handleClose, isOpen } = props;\n  const [title, setTitle] = useState(props.title);\n  const onChange = e => {\n    setTitle(e.target.value);\n  };\n  return (\n    <Dialog\n      title={getI18nText(props, I18nKey.RENAME)}\n      onClose={handleClose}\n      isOpen={isOpen}\n    >\n      <div className={Classes.DIALOG_BODY}>\n        <input\n          className=\"bp3-input .modifier\"\n          type=\"text\"\n          value={title}\n          onChange={onChange}\n          placeholder=\"Text input\"\n          dir=\"auto\"\n        />\n      </div>\n      <div className={Classes.DIALOG_FOOTER}>\n        <div className={Classes.DIALOG_FOOTER_ACTIONS}>\n          <Button onClick={handleClose}>\n            {getI18nText(props, I18nKey.CANCEL)}\n          </Button>\n          <AnchorButton onClick={handleConfirm(title)}>\n            {getI18nText(props, I18nKey.CONFIRM)}\n          </AnchorButton>\n        </div>\n      </div>\n    </Dialog>\n  );\n}\n","import { forbidExtraProps } from 'airbnb-prop-types';\nimport { addEventListener } from 'consolidated-events';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n\nimport { ValueOf } from '../../types';\n\nconst objectValues = require('object.values');\nconst contains = require('document.contains');\n\nconst DISPLAY = {\n  BLOCK: 'block',\n  FLEX: 'flex',\n  INLINE: 'inline',\n  INLINE_BLOCK: 'inline-block',\n  CONTENTS: 'contents'\n};\n\n// const propTypes = forbidExtraProps({\n//   children: PropTypes.node.isRequired,\n//   onOutsideClick: PropTypes.func.isRequired,\n//   disabled: PropTypes.bool,\n//   useCapture: PropTypes.bool,\n//   display: PropTypes.oneOf(objectValues(DISPLAY))\n// });\n\nconst defaultProps = {\n  disabled: false,\n\n  // `useCapture` is set to true by default so that a `stopPropagation` in the\n  // children will not prevent all outside click handlers from firing - maja\n  useCapture: true,\n  display: DISPLAY.BLOCK\n};\n\ninterface Props {\n  onOutsideClick: (event?: React.SyntheticEvent<HTMLElement>) => void;\n  disabled: boolean;\n  useCapture: boolean;\n  display: ValueOf<typeof DISPLAY>;\n  className?: string;\n}\n\nexport class OutsideClickHandler extends React.Component<Props> {\n  static defaultProps = defaultProps;\n  constructor(props) {\n    super(props);\n\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.setChildNodeRef = this.setChildNodeRef.bind(this);\n  }\n\n  childNode;\n  removeMouseUp;\n  removeMouseDown;\n\n  componentDidMount() {\n    const { disabled, useCapture } = this.props;\n\n    if (!disabled) this.addMouseDownEventListener(useCapture);\n  }\n\n  componentDidUpdate({ disabled: prevDisabled }) {\n    const { disabled, useCapture } = this.props;\n    if (prevDisabled !== disabled) {\n      if (disabled) {\n        this.removeEventListeners();\n      } else {\n        this.addMouseDownEventListener(useCapture);\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.removeEventListeners();\n  }\n\n  // Use mousedown/mouseup to enforce that clicks remain outside the root's\n  // descendant tree, even when dragged. This should also get triggered on\n  // touch devices.\n  onMouseDown(e) {\n    const { useCapture } = this.props;\n\n    const isDescendantOfRoot =\n      this.childNode && contains(this.childNode, e.target);\n    if (!isDescendantOfRoot) {\n      if (this.removeMouseUp) {\n        this.removeMouseUp();\n        this.removeMouseUp = null;\n      }\n      this.removeMouseUp = addEventListener(\n        document,\n        'mouseup',\n        this.onMouseUp,\n        { capture: useCapture }\n      );\n    }\n  }\n\n  // Use mousedown/mouseup to enforce that clicks remain outside the root's\n  // descendant tree, even when dragged. This should also get triggered on\n  // touch devices.\n  onMouseUp(e) {\n    const { onOutsideClick } = this.props;\n\n    const isDescendantOfRoot =\n      this.childNode && contains(this.childNode, e.target);\n    if (this.removeMouseUp) {\n      this.removeMouseUp();\n      this.removeMouseUp = null;\n    }\n\n    if (!isDescendantOfRoot) {\n      onOutsideClick(e);\n    }\n  }\n\n  setChildNodeRef(ref) {\n    this.childNode = ref;\n  }\n\n  addMouseDownEventListener(useCapture) {\n    this.removeMouseDown = addEventListener(\n      document,\n      'mousedown',\n      this.onMouseDown,\n      { capture: useCapture }\n    );\n  }\n\n  removeEventListeners() {\n    if (this.removeMouseDown) this.removeMouseDown();\n    if (this.removeMouseUp) this.removeMouseUp();\n  }\n\n  render() {\n    const { children, display } = this.props;\n\n    return (\n      <div\n        ref={this.setChildNodeRef}\n        style={\n          display !== DISPLAY.BLOCK && objectValues(DISPLAY).includes(display)\n            ? { display }\n            : undefined\n        }\n      >\n        {children}\n      </div>\n    );\n  }\n}\n","import { Alert as BpAlert } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { getI18nText, I18nKey } from '../../utils';\n\nexport function Alert(props) {\n  const { content, onClose: _onClose, onCancel, ...rest } = props;\n  const onClose = _onClose || onCancel;\n  const alertProps = {\n    cancelButtonText: getI18nText(props, I18nKey.CANCEL),\n    confirmButtonText: getI18nText(props, I18nKey.CONFIRM),\n    canEscapeKeyCancel: true,\n    ...rest,\n    onClose,\n    onCancel\n  };\n  return (\n    <BpAlert {...alertProps}>\n      <p>{content}</p>\n    </BpAlert>\n  );\n}\n","import React from 'react';\nimport { isOSX } from '../../utils';\n\ninterface Props {\n  hotkeys: string[];\n}\nconst HotKeyChar = {\n  Mod: isOSX ? '⌘' : 'Ctrl',\n  Shift: isOSX ? '⇧' : 'Shift',\n  Alt: isOSX ? '⌥' : 'Alt'\n};\nexport function KeyboardHotKeyWidget(props: Props) {\n  const { hotkeys } = props;\n  if (hotkeys == null) return null;\n  const res = [];\n  for (let i = 0; i < hotkeys.length; i++) {\n    const hotkey = hotkeys[i];\n    res.push(<kbd key={i}>{HotKeyChar[hotkey] || hotkey}</kbd>);\n  }\n  return <div>{res}</div>;\n}\n","import * as React from 'react';\nimport { BaseProps } from '../../common';\n\nexport function Toolbar(props: BaseProps) {\n  const { controller } = props;\n  return (\n    <div className=\"bm-toolbar\">\n      {controller.run('renderToolbarItems', props)}\n    </div>\n  );\n}\n","import { DiagramLayoutType, OpType } from '@blink-mind/core';\nimport { Menu, MenuItem, Popover } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { getI18nText, I18nKey, Icon, IconName } from '../../../utils';\nimport { ToolbarItem, ToolbarItemPopoverTarget } from '../../common';\n\nexport function ToolbarItemLayout(props) {\n  const layoutDirs = [\n    [\n      DiagramLayoutType.LEFT_AND_RIGHT,\n      getI18nText(props, I18nKey.LEFT_AND_RIGHT),\n      'layout-left-and-right'\n    ],\n    [\n      DiagramLayoutType.LEFT_TO_RIGHT,\n      getI18nText(props, I18nKey.ONLY_RIGHT),\n      'layout-right'\n    ],\n    [\n      DiagramLayoutType.RIGHT_TO_LEFT,\n      getI18nText(props, I18nKey.ONLY_LEFT),\n      'layout-left'\n    ]\n  ];\n\n  const onClickSetLayout = layoutDir => e => {\n    const { controller } = props;\n    controller.run('operation', {\n      ...props,\n      opType: OpType.SET_LAYOUT_DIR,\n      layoutDir\n    });\n  };\n\n  const nProps = {\n    ...props,\n    iconName: IconName.LAYOUT_LEFT_AND_RIGHT,\n    iconCxName: 'layout',\n    label: getI18nText(props, I18nKey.LAYOUT)\n  };\n\n  return (\n    <ToolbarItem {...nProps}>\n      <Popover enforceFocus={false}>\n        <ToolbarItemPopoverTarget />\n        <Menu>\n          {layoutDirs.map(dir => (\n            <MenuItem\n              key={dir[1]}\n              icon={Icon(dir[2])}\n              text={dir[1]}\n              onClick={onClickSetLayout(dir[0])}\n            />\n          ))}\n        </Menu>\n      </Popover>\n    </ToolbarItem>\n  );\n}\n","import { OpType } from '@blink-mind/core';\nimport { MenuItem } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { getI18nText, I18nKey } from '../../../utils';\n\nexport function ToolbarItemAddSheet(props) {\n  const { controller } = props;\n  const onClick = () => {\n    const sheetModel = controller.run('createNewSheetModel', props);\n    controller.run('operation', {\n      ...props,\n      opType: OpType.ADD_SHEET,\n      sheetModel\n    });\n  };\n\n  return (\n    <MenuItem text={getI18nText(props, I18nKey.ADD_SHEET)} onClick={onClick} />\n  );\n}\n","import { Menu, Popover } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { ElementItemConfigs } from '../../../types';\nimport { IconName } from '../../../utils';\nimport { ToolbarItem, ToolbarItemPopoverTarget } from '../../common';\n\nexport function ToolbarItemMore(props) {\n  const { controller } = props;\n  const itemConfigs: ElementItemConfigs = controller.run(\n    'customizeToolbarItemMore',\n    props\n  );\n  itemConfigs.sort((a, b) => a.order - b.order);\n  return (\n    <ToolbarItem iconName={IconName.MORE} iconCxName=\"more\" {...props}>\n      <Popover enforceFocus={false}>\n        <ToolbarItemPopoverTarget />\n        <Menu>\n          {itemConfigs.map(item =>\n            React.createElement(item.element, {\n              ...props,\n              key: item.order.toString()\n            })\n          )}\n        </Menu>\n      </Popover>\n    </ToolbarItem>\n  );\n}\n","import { DocModel, SheetModel } from '@blink-mind/core';\nimport { List } from 'immutable';\nimport { getI18nText, I18nKey } from '../utils';\n\nexport function CreateModelPlugin() {\n  return {\n    createNewDocModel(ctx) {\n      const { controller } = ctx;\n      const docModel = new DocModel({\n        sheetModels: List([controller.run('createNewSheetModel', ctx)]),\n        currentSheetIndex: 0\n      });\n      controller.docModel = docModel;\n      return docModel;\n    },\n\n    // TODO\n    createNewSheetModel(ctx) {\n      const { docModel } = ctx;\n      const idx = docModel ? docModel.sheetModels.size + 1 : 1;\n      const title = getI18nText(ctx, I18nKey.SHEET) + idx;\n      return SheetModel.createEmpty({ title });\n    }\n  };\n}\n","import { FocusMode, OpType } from '@blink-mind/core';\n\nimport debug from 'debug';\n\nconst log = debug('plugin:event');\n\nexport function EventPlugin() {\n  const eventListeners = {};\n  let _isHandlingMouseMove = false;\n  return {\n    isHandlingMouseMove(ctx) {\n      return _isHandlingMouseMove;\n    },\n\n    setHandlingMouseMove(v) {\n      _isHandlingMouseMove = v;\n    },\n\n    handleTopicClick(props) {\n      log('handleTopicClick');\n      const { controller, model, topicKey } = props;\n      log(model.zoomFactor);\n      //TODO\n      if (model.editingDescKey !== null) return;\n      if (model.editingContentKey === topicKey) return;\n      if (\n        model.focusKey === topicKey &&\n        (model.focusMode === FocusMode.EDITING_CONTENT ||\n          model.focusMode === FocusMode.NORMAL)\n      )\n        return;\n      controller.run('operation', {\n        ...props,\n        opType: OpType.FOCUS_TOPIC,\n        focusMode: FocusMode.NORMAL\n      });\n    },\n\n    handleTopicDoubleClick(props) {\n      const { controller, model } = props;\n      if (model.editingDescKey !== null) return;\n      controller.run('operation', {\n        ...props,\n        opType: OpType.FOCUS_TOPIC,\n        focusMode: FocusMode.EDITING_CONTENT\n      });\n    },\n\n    handleTopicContextMenu(props) {\n      const { controller } = props;\n      controller.run('operation', {\n        ...props,\n        opType: OpType.FOCUS_TOPIC,\n        focusMode: FocusMode.SHOW_POPUP\n      });\n    },\n\n    handleDialogClose(props) {},\n\n    addEventListener(props) {\n      const { key, listener, once, controller } = props;\n      if (!eventListeners[key]) eventListeners[key] = [];\n      if (once) {\n        only.origin = listener;\n        eventListeners[key].push(only);\n      } else {\n        eventListeners[key].push(listener);\n      }\n\n      function only() {\n        listener();\n        controller.run('removeEventListener', {\n          key,\n          listener\n        });\n      }\n    },\n\n    removeEventListener(props) {\n      const { key, listener } = props;\n      if (eventListeners[key]) {\n        eventListeners[key] = eventListeners[key].filter(fn => {\n          return fn !== listener && fn.origin !== listener;\n        });\n      }\n    },\n\n    fireEvent(props) {\n      const { key } = props;\n      if (eventListeners[key]) {\n        eventListeners[key].forEach(fn => fn());\n      }\n    }\n  };\n}\n","import { DragDropState, RightTopPanelState } from '../types';\nimport { PropKey } from '../utils';\n\nexport function GetValuePlugin() {\n  return {\n    getValue(props, next) {\n      const { propKey, controller, diagramState } = props;\n      switch (propKey) {\n        case PropKey.DIAGRAM_CUSTOMIZE_BASE_Z_INDEX:\n          return 3;\n        case PropKey.TOPIC_CONTEXT_MENU_ENABLED:\n          return controller.run('isOperationEnabled', props);\n        case PropKey.OPERATION_ENABLED:\n          return controller.run('isOperationEnabled', props);\n        case PropKey.TOPIC_TITLE:\n          return controller.run('getTopicTitle', props);\n        case PropKey.DRAG_DROP_STATE:\n          return diagramState.dragDrop as DragDropState;\n        case PropKey.RIGHT_TOP_PANEL_STATE:\n          return diagramState.rightTopPanel as RightTopPanelState;\n      }\n      return next();\n    }\n  };\n}\n","import { IHotkeyProps } from '@blueprintjs/core';\nimport * as React from 'react';\n\nexport type ValueOf<T> = T[keyof T];\n\nexport interface ElementItemConfig {\n  order: number;\n  element: React.ElementType;\n}\nexport type ElementItemConfigs = ElementItemConfig[];\n\nexport type HotKeyMap = Map<string, IHotkeyProps>;\n\nexport interface HotKeysConfig {\n  topicHotKeys: HotKeyMap;\n  viewModeTopicHotKeys: Map<string, HotKeyMap>;\n  globalHotKeys: HotKeyMap;\n}\n\nexport const HotKeyName = {\n  ADD_CHILD: 'ADD_CHILD',\n  ADD_SIBLING: 'ADD_SIBLING',\n  DELETE_TOPIC: 'DELETE_TOPIC',\n  SWAP_UP: 'SWAP_UP',\n  SWAP_DOWN: 'SWAP_DOWN',\n  EDIT_CONTENT: 'EDIT_CONTENT',\n  EDIT_NOTES: 'EDIT_NOTES',\n  DELETE_NOTES: 'DELETE_NOTES',\n  SET_EDITOR_ROOT: 'SET_EDITOR_ROOT',\n  PASTE: 'PASTE'\n};\n\nexport const MoveTopicDir = {\n  CENTER: 0,\n  LEFT_CENTER: 1\n};\n\nexport interface RightTopPanelState {\n  isOpen: boolean;\n  selectedTabId: string;\n}\n\nexport interface DragDropState {\n  targetKey: KeyType;\n  targetDir: 'in' | 'prev' | 'next';\n}\n\nexport interface ITopicDescEditor {\n  getContent(): any;\n}\n","import { BlockType, OpType } from '@blink-mind/core';\n\nimport { ViewModeMindMap } from '@blink-mind/core';\nimport { IHotkeyProps } from '@blueprintjs/core';\nimport { HotKeyName, HotKeysConfig } from '../types';\n\nfunction op(opType: string, props) {\n  const { topicKey, controller } = props;\n  if (topicKey === undefined) {\n    props = { ...props, topicKey: controller.model.focusKey };\n  }\n  controller.run('operation', { ...props, opType });\n}\n\nexport function HotKeyPlugin() {\n  return {\n    customizeHotKeys(ctx): HotKeysConfig {\n      const { controller } = ctx;\n      const model = controller.model;\n      const handleHotKeyDown = (opType, opArg?) => e => {\n        // log('HotKeyPlugin', opType);\n        op(opType, { ...ctx, ...opArg });\n        e.stopImmediatePropagation();\n        e.preventDefault();\n      };\n      const topicHotKeys = new Map<string, IHotkeyProps>([\n        [\n          HotKeyName.SWAP_UP,\n          {\n            label: 'swap up',\n            combo: 'mod + up',\n            allowInInput: true,\n            preventDefault: true,\n            stopPropagation: true,\n            onKeyDown: handleHotKeyDown(OpType.SWAP_UP)\n          }\n        ],\n        [\n          HotKeyName.SWAP_DOWN,\n          {\n            label: 'swap down',\n            combo: 'mod + down',\n            allowInInput: true,\n            preventDefault: true,\n            stopPropagation: true,\n            onKeyDown: handleHotKeyDown(OpType.SWAP_DOWN)\n          }\n        ],\n        [\n          HotKeyName.DELETE_TOPIC,\n          {\n            label: 'delete topic',\n            combo: 'del',\n            allowInInput: true,\n            preventDefault: true,\n            stopPropagation: true,\n            onKeyDown: handleHotKeyDown(OpType.DELETE_TOPIC)\n          }\n        ],\n\n        [\n          HotKeyName.EDIT_NOTES,\n          {\n            label: 'edit notes',\n            combo: 'alt + d',\n            allowInInput: true,\n            onKeyDown: handleHotKeyDown(OpType.START_EDITING_DESC)\n          }\n        ],\n        [\n          HotKeyName.SET_EDITOR_ROOT,\n          {\n            label: 'set editor root',\n            combo: 'alt + f',\n            allowInInput: true,\n            onKeyDown: handleHotKeyDown(OpType.SET_EDITOR_ROOT)\n          }\n        ]\n      ]);\n      const topic = model.currentFocusTopic;\n      if (topic && topic.getBlock(BlockType.DESC).block)\n        topicHotKeys.set(HotKeyName.DELETE_NOTES, {\n          label: 'delete notes',\n          combo: 'alt + shift + d',\n          allowInInput: true,\n          onKeyDown: handleHotKeyDown(OpType.DELETE_TOPIC_BLOCK, {\n            blockType: BlockType.DESC\n          })\n        });\n      const globalHotKeys = new Map<string, IHotkeyProps>();\n      const viewModeTopicHotKeys = new Map();\n      const viewModeMindMapTopicHotKeys = new Map<string, IHotkeyProps>([\n        [\n          HotKeyName.ADD_SIBLING,\n          {\n            label: 'add sibling',\n            combo: 'enter',\n            onKeyDown: handleHotKeyDown(OpType.ADD_SIBLING)\n          }\n        ],\n        [\n          HotKeyName.EDIT_CONTENT,\n          {\n            label: 'edit content',\n            combo: 'space',\n            onKeyDown: handleHotKeyDown(OpType.START_EDITING_CONTENT)\n          }\n        ],\n        [\n          HotKeyName.ADD_CHILD,\n          {\n            label: 'add child',\n            combo: 'tab',\n            allowInInput: true,\n            preventDefault: true,\n            stopPropagation: true,\n            onKeyDown: handleHotKeyDown(OpType.ADD_CHILD)\n          }\n        ]\n      ]);\n      viewModeTopicHotKeys.set(ViewModeMindMap, viewModeMindMapTopicHotKeys);\n      return {\n        topicHotKeys,\n        globalHotKeys,\n        viewModeTopicHotKeys\n      };\n    }\n  };\n}\n","import { I18nKey } from '../utils';\n\nexport function I18nPlugin() {\n  const i18nTextMap = new Map([\n    [I18nKey.MIND_MAP, 'Mind Map'],\n    [I18nKey.OUTLINER, 'Outliner'],\n    [I18nKey.COPY, 'Copy'],\n    [I18nKey.PASTE, 'Paste'],\n    [I18nKey.DUPLICATE, 'Duplicate'],\n    [I18nKey.DELETE, 'Delete'],\n\n    [I18nKey.CONFIRM, 'Confirm'],\n    [I18nKey.CANCEL, 'Cancel'],\n    [I18nKey.REMOVE, 'Remove'],\n    [I18nKey.RENAME, 'Rename'],\n    [I18nKey.DEFAULT, 'Default'],\n    [I18nKey.SEARCH, 'Search'],\n    [I18nKey.BROWSE, 'Browse'],\n\n    [I18nKey.LAYOUT, 'Layout'],\n    [I18nKey.LEFT_AND_RIGHT, 'Left And Right'],\n    [I18nKey.ONLY_LEFT, 'Only Left'],\n    [I18nKey.ONLY_RIGHT, 'Only Right'],\n\n    [I18nKey.ADD_SHEET, 'Add Sheet'],\n    [I18nKey.SHEET, 'Sheet'],\n\n    [I18nKey.EDIT, 'Edit'],\n    [I18nKey.ADD_CHILD, 'Add Child'],\n    [I18nKey.ADD_SIBLING, 'Add Sibling'],\n    [I18nKey.EDIT_NOTES, 'Edit Notes'],\n    [I18nKey.REMOVE_NOTES, 'Remove Notes'],\n    [I18nKey.CONVERT_TO_PLAIN_TEXT, 'Convert to Plain Text'],\n    [I18nKey.SET_AS_EDITOR_ROOT, 'Set as Editor Root'],\n    [I18nKey.EXPORT, 'Export'],\n    [I18nKey.EDIT_TOPOLOGY_DIAGRAM, 'Edit Topology Diagram'],\n    [I18nKey.SET_TOPIC_REFERENCES, 'Set Topic References'],\n    [I18nKey.INSERT_IMAGE, 'Insert image'],\n\n    [I18nKey.TOPIC_STYLE, 'TopicStyle'],\n    [I18nKey.STYLE, 'Style'],\n    [I18nKey.TEXT_EDITOR, 'Text Editor'],\n    [I18nKey.LINK, 'Link'],\n    [I18nKey.LINK_TO_PARENT, 'LinkToParent'],\n    [I18nKey.SUB_LINKS, 'SubLinks'],\n    [I18nKey.COPY_STYLE, 'Copy Style'],\n    [I18nKey.PASTE_STYLE, 'Paste Style'],\n    [I18nKey.CLEAR_TOPIC_STYLE, 'Clear Topic Style'],\n    [I18nKey.CLEAR_ALL_CUSTOM_STYLE, 'Clear All Custom Style'],\n    [I18nKey.LINE_TYPE, 'LineType'],\n\n    [I18nKey.THEME, 'Theme'],\n    [I18nKey.GLOBAL, 'Global'],\n    [I18nKey.HIGHLIGHT, 'Highlight'],\n    [I18nKey.RANDOM_COLOR, 'Random Color'],\n    [I18nKey.NORMAL_TOPIC, 'NormalTopic'],\n    [I18nKey.PRIMARY_TOPIC, 'PrimaryTopic'],\n    [I18nKey.ROOT_TOPIC, 'RootTopic'],\n    [I18nKey.EXPORT_THEME, 'Export Theme'],\n    [I18nKey.IMPORT_THEME, 'Import Theme'],\n\n    [I18nKey.TAGS, 'Tags'],\n    [I18nKey.TAGS_MANAGER, 'Tags Manager'],\n    [I18nKey.TAG_NAME, 'Tag Name'],\n    [I18nKey.ADD_TAG, 'Add Tag'],\n    [I18nKey.UPDATE_TAG, 'Update Tag'],\n    [I18nKey.ALREADY_ADDED, 'Already Added'],\n    [I18nKey.CAN_BE_ADDED, 'Can be Added'],\n    [I18nKey.TOPICS_THAT_USE_THIS_TAG, 'Topics that Use this Tag'],\n\n    [I18nKey.BACKGROUND, 'Background'],\n    [I18nKey.COLOR, 'Color'],\n    [I18nKey.BORDER, 'Border'],\n    [I18nKey.WIDTH, 'Width'],\n    [I18nKey.RADIUS, 'Radius'],\n    [I18nKey.FONT_FAMILY, 'FontFamily'],\n    [I18nKey.FONT_STYLE, 'FontStyle'],\n    [I18nKey.NORMAL, 'Normal'],\n    [I18nKey.ITALIC, 'Italic'],\n    [I18nKey.OBLIQUE, 'Oblique'],\n    [I18nKey.FONT_WEIGHT, 'FontWeight'],\n    [I18nKey.FONT_SIZE, 'FontSize'],\n    [I18nKey.LINE_HEIGHT, 'LineHeight'],\n    [I18nKey.PADDING, 'Padding'],\n    [I18nKey.TOP, 'Top'],\n    [I18nKey.BOTTOM, 'Bottom'],\n    [I18nKey.LEFT, 'Left'],\n    [I18nKey.RIGHT, 'Right'],\n    [I18nKey.NONE, 'None'],\n    [I18nKey.SOLID, 'Solid'],\n    [I18nKey.DOTTED, 'Dotted'],\n    [I18nKey.DASHED, 'Dashed'],\n    [I18nKey.DOUBLE, 'Double'],\n\n    [I18nKey.ROUND, 'Round'],\n    [I18nKey.CURVE, 'Curve'],\n    [I18nKey.LINE, 'Line'],\n\n    [I18nKey.COLLAPSE_ALL, 'Collapse All'],\n    [I18nKey.EXPAND_ALL, 'Expand All'],\n    [I18nKey.CENTER_ROOT_TOPIC, 'Center Root Topic'],\n    [I18nKey.ZOOM, 'zoom'],\n    [I18nKey.ZOOM_IN, 'Zoom In'],\n    [I18nKey.ZOOM_OUT, 'Zoom Out'],\n    [I18nKey.RESET, 'Reset'],\n    [I18nKey.RESET_ZOOM, 'Reset Zoom'],\n\n    [I18nKey.NOTE_PLACEHOLDER, 'Write topic notes here'],\n\n    [I18nKey.TOPOLOGY_DIAGRAM_EDITOR, 'Topology Diagram Editor'],\n    [I18nKey.BASIC, 'Basic'],\n    [I18nKey.FLOW_GRAPH, 'Flow Graph'],\n    [I18nKey.ACTIVITY_DIAGRAM, 'Activity Diagram'],\n    [I18nKey.SEQUENCE_DIAGRAM, 'Sequence Diagram'],\n    [I18nKey.CLASS_DIAGRAM, 'Class Diagram'],\n\n    [I18nKey.REFERENCE_TOPICS, 'Reference Topics'],\n    [I18nKey.REFERENCED_TOPICS, 'Referenced Topics'],\n    [I18nKey.GOTO_ORIGINAL_TOPIC, 'Goto Original Topic'],\n\n    [I18nKey.INDENT, 'Indent'],\n    [I18nKey.OUTDENT, 'Outdent'],\n\n    [\n      I18nKey.SELECT_REF_TOPICS_TIP,\n      'Please select the topics you want to reference. After selection, click the confirm button.'\n    ],\n    [\n      I18nKey.TAG_NAME_OVER_MAX_TIP,\n      'The length of tag name over the maximum length: 50!'\n    ],\n    [\n      I18nKey.DELETE_TAG_TIP,\n      'All the relationship about this tag will be lost if you delete this tag! Are you confirm?'\n    ],\n    [\n      I18nKey.DELETE_TOPOLOGY_TIP,\n      'Are you confirm to delete this topology diagram?'\n    ],\n    [I18nKey.DELETE_REFERENCE_TIP, 'Are you confirm to remove this reference?'],\n    [I18nKey.FILE_FORMAT_ERROR, 'File Format Error!'],\n\n    [I18nKey.CHOOSE_FILE, 'Choose file'],\n    [I18nKey.SELECT_IMAGE_TIP1, 'Please choose png/jpg/gif format image'],\n    [\n      I18nKey.SELECT_IMAGE_TIP2,\n      'If you take a screenshot using some screenshot software (such as QQ, wechat, snipaste), you can paste the image directly in the editing state.'\n    ],\n    [I18nKey.SELECT_IMAGE_ERR_TIP, 'Only support png/jpg/gif format'],\n\n    [I18nKey.HYPERLINK, 'Hyperlink'],\n    [I18nKey.INSERT_HYPERLINK, 'Insert Hyperlink'],\n    [I18nKey.SET_TO_ORIGINAL_SIZE, 'Set to original size'],\n    [I18nKey.MOVE_UP, 'Move up'],\n    [I18nKey.MOVE_DOWN, 'Move down']\n  ]);\n\n  return {\n    getI18nTextMap() {\n      return i18nTextMap;\n    },\n    getI18nText(ctx) {\n      const { controller, key } = ctx;\n      const m = controller.run('getI18nTextMap', ctx);\n      if (!m.has(key)) {\n        throw new Error(`i18n key ${key} is not exist`);\n      }\n      return m.get(key);\n    }\n  };\n}\n","import {\n  DiagramLayoutType,\n  FocusMode,\n  getRelationship,\n  IControllerRunContext,\n  KeyType,\n  OpType,\n  SheetModel,\n  Topic,\n  TopicRelationship\n} from '@blink-mind/core';\nimport {\n  RootSubLinks,\n  TopicDropEffect,\n  TopicWidget\n} from '../components/widgets';\n\nimport { MoveTopicDir } from '../types';\nimport {\n  getRelativeRect,\n  getRelativeVector,\n  linksRefKey,\n  RefKey,\n  topicNodeRefKey,\n  topicWidgetRefKey,\n  tvZoomFactorKey\n} from '../utils';\n\nexport type GetPartTopicsArg = {\n  layout: DiagramLayoutType;\n  model: SheetModel;\n  topicKey: KeyType;\n};\n\nexport function LayoutPlugin() {\n  const _zoomFactor = 1;\n  return {\n    getPartTopics({ layout, model, topicKey }: GetPartTopicsArg) {\n      const topic = model.getTopic(topicKey);\n      const subTopicCount = topic.subKeys.size;\n      const topics = topic.subKeys.toArray();\n      switch (layout) {\n        case DiagramLayoutType.LEFT_TO_RIGHT:\n          return { R: topics };\n        case DiagramLayoutType.RIGHT_TO_LEFT:\n          return { L: topics };\n        case DiagramLayoutType.LEFT_AND_RIGHT:\n          return {\n            L: topics.slice(Math.ceil(subTopicCount / 2), subTopicCount),\n            R: topics.slice(0, Math.ceil(subTopicCount / 2))\n          };\n        case DiagramLayoutType.TOP_TO_BOTTOM:\n          return {\n            B: topics\n          };\n      }\n    },\n\n    createSubTopics(props) {\n      const { model, topicKey, controller, topics, saveRef } = props;\n      const topic = model.getTopic(topicKey);\n      if (topics.size === 0 || topic.collapse) return null;\n      const subTopics = [];\n      topics.forEach(tKey => {\n        const topicProps = {\n          ...props,\n          topicKey: tKey,\n          topic: model.getTopic(tKey),\n          key: tKey,\n          ref: saveRef(topicWidgetRefKey(tKey))\n        };\n        subTopics.push(controller.run('renderTopicWidget', topicProps));\n      });\n      return { subTopics };\n    },\n\n    layout(props) {\n      const { getRef, model } = props;\n      const links = getRef(\n        linksRefKey(model.editorRootTopicKey)\n      ) as RootSubLinks;\n      const dropEffect = getRef(\n        RefKey.DROP_EFFECT_KEY + model.id\n      ) as TopicDropEffect;\n      links && links.layout();\n      dropEffect && dropEffect.layout();\n\n      const editorRootTopic = model.getTopic(model.editorRootTopicKey);\n      layoutTopic(editorRootTopic);\n\n      function layoutTopic(topic: Topic) {\n        if (topic.key !== model.editorRootTopicKey) {\n          const topicWidget = getRef(\n            topicWidgetRefKey(topic.key)\n          ) as TopicWidget;\n          topicWidget && topicWidget.layoutLinks();\n        }\n        if (!topic.collapse) {\n          for (const subKey of topic.subKeys) {\n            layoutTopic(model.getTopic(subKey));\n          }\n        }\n      }\n    },\n\n    getRelativeRect(props) {\n      const { element, controller, getRef, model } = props;\n      const zoomFactor = controller.run('getZoomFactor', props);\n      const bigView = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY + model.id).bigView;\n      return getRelativeRect(element, bigView, zoomFactor);\n    },\n\n    getRelativeRectFromViewPort(props) {\n      const { element, controller, getRef, model } = props;\n      const zoomFactor = controller.run('getZoomFactor', props);\n      const viewBox = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY + model.id).viewBox;\n      return getRelativeRect(element, viewBox, zoomFactor);\n    },\n    getRelativeVectorFromViewPort(props) {\n      const { element, getRef, model } = props;\n      const viewBox = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY + model.id).viewBox;\n      return getRelativeVector(element, viewBox);\n    },\n\n    addZoomFactorChangeEventListener(props) {\n      const { controller, model } = props;\n      controller.run('addTempValueChangeListener', {\n        key: tvZoomFactorKey(model),\n        ...props\n      });\n    },\n\n    removeZoomFactorChangeEventListener(props) {\n      const { controller, model } = props;\n      controller.run('removeTempValueChangeListener', {\n        key: tvZoomFactorKey(model),\n        ...props\n      });\n    },\n\n    setZoomFactor(props) {\n      const { controller, model, zoomFactor } = props;\n      return controller.run('setTempValue', {\n        key: tvZoomFactorKey(model),\n        value: zoomFactor\n      });\n    },\n\n    getZoomFactor(props) {\n      const { controller, model } = props;\n      return (\n        controller.run('getTempValue', { key: tvZoomFactorKey(model) }) ||\n        _zoomFactor\n      );\n    },\n\n    setZoomFactorOnWheel(ctx) {\n      const { controller, ev } = ctx;\n      if (controller.run('isCommandOrControl', ctx)) {\n        let zoomFactor = controller.run('getZoomFactor', ctx);\n        zoomFactor = zoomFactor - (ev.nativeEvent.deltaY > 0 ? 0.1 : -0.1);\n        if (zoomFactor < 0.5) zoomFactor = 0.5;\n        if (zoomFactor > 4) zoomFactor = 4;\n        // console.log('zoomFactor=>', zoomFactor);\n        controller.run('setZoomFactor', { ...ctx, zoomFactor });\n      }\n    },\n\n    moveTopicToCenter(ctx: IControllerRunContext & { moveDir?: number }) {\n      const { controller, getRef, moveDir = MoveTopicDir.CENTER } = ctx;\n      const model = controller.model;\n      const topicKey = ctx.topicKey || model.focusKey;\n      if (\n        model.editorRootTopicKey !== topicKey &&\n        getRelationship(model, topicKey, model.editorRootTopicKey) !==\n          TopicRelationship.DESCENDANT\n      ) {\n        throw new Error(\n          `moveTopicToCenter error: topicKey ${topicKey} is not the DESCENDANT of editor root topic`\n        );\n      }\n      const topic = getRef(topicNodeRefKey(topicKey));\n      const dragScroll = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY + model.id);\n      const viewBox = dragScroll.viewBox;\n      if (!topic || !viewBox) {\n        throw new Error(`moveTopicToCenter error: topic or viewBox is null`);\n      }\n      const vector = getRelativeVector(topic, viewBox);\n      //TODO\n      if (moveDir === MoveTopicDir.CENTER)\n        dragScroll.setViewBoxScrollDelta(vector[0], vector[1]);\n      else if (moveDir === MoveTopicDir.LEFT_CENTER) {\n        const boxRect = viewBox.getBoundingClientRect();\n        const topicRect = topic.getBoundingClientRect();\n        const delta = (boxRect.width - topicRect.width) / 2;\n        dragScroll.setViewBoxScrollDelta(vector[0] + delta - 200, vector[1]);\n      }\n    },\n\n    focusTopicAndMoveToCenter(props) {\n      const { controller, topicKey, sheetId } = props;\n      const opArray: Array<any> = [\n        {\n          opType: OpType.FOCUS_TOPIC,\n          topicKey,\n          focusMode: FocusMode.NORMAL\n        },\n        {\n          opType: OpType.EXPAND_TO,\n          topicKey\n        }\n      ];\n      if (sheetId && sheetId !== controller.model.id) {\n        opArray.unshift({ opType: OpType.SET_CURRENT_SHEET, sheetId });\n      }\n      controller.run('operation', {\n        ...props,\n        opType: OpType.SET_FOCUS_MODE,\n        focusMode: FocusMode.NORMAL\n      });\n      controller.run('operation', {\n        ...props,\n        opArray,\n        allowUndo: false,\n        callback: docModel => () => {\n          controller.run('moveTopicToCenter', { ...props, docModel, topicKey });\n        }\n      });\n    }\n  };\n}\n","import { DocModelModifier, OpType } from '@blink-mind/core';\nimport debug from 'debug';\nconst log = debug('plugin:operation');\n\nexport function OperationPlugin() {\n  const {\n    addSheet,\n    setCurrentSheet,\n    duplicateSheet,\n    deleteSheet,\n    setSheetTitle,\n\n    addChild,\n    addSibling,\n    addMultiTopics,\n    addMultiChild,\n    addMultiChildWithExtData,\n    addMultiSibling,\n    toggleCollapse,\n    collapseAll,\n    expandAll,\n    expandTo,\n    focusTopic,\n    topicContentToPlainText,\n    setFocusMode,\n    deleteTopics,\n    setTopicBlockData,\n    setTopicBlockContentData,\n    deleteTopicBlock,\n    setStyle,\n    clearAllCustomStyle,\n    setTheme,\n    setConfig,\n    setLayoutDir,\n    setEditorRootTopicKey,\n    startEditingContent,\n    startEditingDesc,\n    dragAndDrop,\n    swapUp,\n    swapDown\n  } = DocModelModifier;\n  const OpMap = new Map([\n    [OpType.ADD_SHEET, addSheet],\n    [OpType.SET_CURRENT_SHEET, setCurrentSheet],\n    [OpType.DELETE_SHEET, deleteSheet],\n    [OpType.DUPLICATE_SHEET, duplicateSheet],\n    [OpType.SET_SHEET_TITLE, setSheetTitle],\n\n    [OpType.TOGGLE_COLLAPSE, toggleCollapse],\n    [OpType.COLLAPSE_ALL, collapseAll],\n    [OpType.EXPAND_ALL, expandAll],\n    [OpType.EXPAND_TO, expandTo],\n    [OpType.ADD_CHILD, addChild],\n    [OpType.ADD_SIBLING, addSibling],\n    [OpType.ADD_MULTI_TOPICS, addMultiTopics],\n    [OpType.ADD_MULTI_CHILD, addMultiChild],\n    [OpType.ADD_MULTI_CHILD_WITH_EXTDATA, addMultiChildWithExtData],\n    [OpType.ADD_MULTI_SIBLING, addMultiSibling],\n    [OpType.DELETE_TOPIC, deleteTopics],\n    [OpType.FOCUS_TOPIC, focusTopic],\n    [OpType.SET_FOCUS_MODE, setFocusMode],\n    [OpType.SET_STYLE, setStyle],\n    [OpType.CLEAR_ALL_CUSTOM_STYLE, clearAllCustomStyle],\n\n    [OpType.SET_CONFIG, setConfig],\n    [OpType.SET_THEME, setTheme],\n    [OpType.TOPIC_CONTENT_TO_PLAIN_TEXT, topicContentToPlainText],\n    [OpType.SET_TOPIC_BLOCK, setTopicBlockData],\n    [OpType.SET_TOPIC_BLOCK_CONTENT, setTopicBlockContentData],\n    [OpType.DELETE_TOPIC_BLOCK, deleteTopicBlock],\n    [OpType.START_EDITING_CONTENT, startEditingContent],\n    [OpType.START_EDITING_DESC, startEditingDesc],\n    [OpType.DRAG_AND_DROP, dragAndDrop],\n    [OpType.SET_EDITOR_ROOT, setEditorRootTopicKey],\n    [OpType.SET_LAYOUT_DIR, setLayoutDir],\n    [OpType.SWAP_UP, swapUp],\n    [OpType.SWAP_DOWN, swapDown]\n  ]);\n\n  let enabled = true;\n  let whiteListOperation = new Set<string>();\n\n  return {\n    isOperationEnabled(props) {\n      return enabled;\n    },\n\n    enableOperation() {\n      enabled = true;\n    },\n\n    disableOperation({ whiteList }) {\n      enabled = false;\n      if (whiteList) whiteListOperation = new Set(whiteList);\n      else whiteListOperation.clear();\n    },\n\n    /** plugin can extend Operation Map\n     * for example: A plugin can write a function\n     * getOpMap(ctx,next) {\n     *   let opMap = next();\n     *   opMap.set(\"OpTypeName\",opFunc);\n     *   return opMap;\n     * }\n     * @param ctx\n     */\n    getOpMap(ctx) {\n      return OpMap;\n    },\n\n    //TODO 有空重构这个函数\n    operation(ctx) {\n      if (ctx.controller.docModel) {\n        ctx = {\n          ...ctx,\n          docModel: ctx.controller.docModel,\n          model: ctx.controller.docModel.currentSheetModel\n        };\n      }\n      const { controller, opType, docModel, opArray, callback } = ctx;\n      if (opArray != null && !Array.isArray(opArray)) {\n        throw new Error('operation: the type of opArray must be array!');\n      }\n      if (opType != null && opArray != null) {\n        throw new Error('operation: opType and opArray conflict!');\n      }\n      const isOperationEnabled = controller.run('isOperationEnabled', ctx);\n      if (!isOperationEnabled) {\n        // warning(\n        //   true,\n        //   `You have disabled operation,but you run operation ${props} now!`\n        // );\n        if (whiteListOperation.size === 0) return;\n\n        if (opArray != null) {\n          const opNotInWhiteList = opArray.filter(\n            op => !whiteListOperation.has(op.opType)\n          );\n          if (opNotInWhiteList && opNotInWhiteList.length > 0) {\n            return;\n          }\n        } else if (!whiteListOperation.has(opType)) {\n          return;\n        }\n      }\n\n      log('operation:', opType || opArray.map(op => op.opType), ctx);\n\n      const opMap = controller.run('getOpMap', ctx);\n      controller.run('beforeOperation', ctx);\n\n      let newDocModel;\n\n      if (opArray != null) {\n        newDocModel = opArray.reduce((acc, cur) => {\n          const { opType } = cur;\n          if (!opMap.has(opType))\n            throw new Error(`opType:${opType} not exist!`);\n          const opFunc = opMap.get(opType);\n          const opFuncProps = { controller, ...cur, docModel: acc };\n          let res = controller.run('beforeOpFunction', opFuncProps);\n          res = opFunc({ ...opFuncProps, docModel: res });\n          res = controller.run('afterOpFunction', {\n            ...opFuncProps,\n            docModel: res\n          });\n          return res;\n        }, docModel);\n      } else {\n        if (!opMap.has(opType)) throw new Error(`opType:${opType} not exist!`);\n        const opFunc = opMap.get(opType);\n        newDocModel = controller.run('beforeOpFunction', ctx);\n        newDocModel = opFunc({ ...ctx, docModel: newDocModel });\n        newDocModel = controller.run('afterOpFunction', {\n          ...ctx,\n          docModel: newDocModel\n        });\n      }\n      // log(\n      //   'newDocModel:',\n      //   newDocModel,\n      //   newDocModel.currentSheetModel.focusKey,\n      //   //TODO currentFocusTopic可能为空\n      //   newDocModel.currentSheetModel.currentFocusTopic &&\n      //     newDocModel.currentSheetModel.currentFocusTopic.contentData\n      // );\n      if (controller.run('getAllowUndo', ctx) && newDocModel !== docModel) {\n        const { undoStack } = controller.run('getUndoRedoStack', ctx);\n        controller.run('setUndoStack', {\n          ...ctx,\n          undoStack: undoStack.push(docModel)\n        });\n      }\n      controller.change(newDocModel, callback ? callback(newDocModel) : null);\n      controller.run('afterOperation', ctx);\n      // log(controller.model);\n    },\n\n    deleteRefKey(ctx) {},\n\n    // 在整个Operation执行之前被调用\n    beforeOperation(props) {},\n    afterOperation(props) {},\n\n    // 在单个OpFunction执行之前被调用\n    beforeOpFunction(ctx) {\n      const { docModel } = ctx;\n      return docModel;\n    },\n\n    afterOpFunction(ctx) {\n      return ctx.docModel;\n    },\n\n    openNewDocModel(ctx) {\n      const { controller, newDocModel } = ctx;\n      controller.run('operation', {\n        ...ctx,\n        opType: OpType.EXPAND_TO,\n        model: newDocModel.currentSheetModel,\n        topicKey: newDocModel.currentSheetModel.focusKey,\n        docModel: newDocModel,\n        callback: docModel => () => {\n          controller.run('moveTopicToCenter', {\n            ...ctx,\n            docModel,\n            topicKey: docModel.currentSheetModel.focusKey\n          });\n        }\n      });\n    }\n  };\n}\n","import { BaseProps } from '../components/common';\n\nexport function OptmizationPlugin() {\n  return {\n    componentAreEqual(ctx: { prevProps: BaseProps; nextProps: BaseProps }) {\n      const { prevProps, nextProps } = ctx;\n      const { model: nmodel, docModel: ndocModel, topic: ntopic } = nextProps;\n      if (ndocModel.currentSheetModel !== nmodel) return true;\n      const { model, topic, topicKey } = prevProps;\n\n      if (nmodel.config.theme !== model.config.theme) return false;\n\n      if (nmodel.focusKey === topicKey || model.focusKey === topicKey)\n        return false;\n\n      if (ntopic === topic) return true;\n      return false;\n    },\n\n    sheetAreEqual(ctx) {\n      const { nextProps } = ctx;\n      const { model: nmodel, docModel: ndocModel } = nextProps;\n      if (ndocModel.currentSheetModel !== nmodel) return true;\n      return false;\n    }\n  };\n}\n","export function PlatformPlugin() {\n  let _isOSX;\n  return {\n    isOSX(ctx) {\n      if (_isOSX == null) {\n        _isOSX = navigator.userAgent.includes('Mac');\n      }\n      return _isOSX;\n    },\n\n    isCommandOrControl(ctx) {\n      const { controller, ev } = ctx;\n      const isOSX = controller.run('isOSX', ctx);\n      return (isOSX && ev.metaKey) || (!isOSX && ev.ctrlKey);\n    }\n  };\n}\n","import { Controller, DocModel, SheetModel } from '@blink-mind/core';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { EventKey, RefKey, topicNodeRefKey } from '../../utils';\nimport { DragScrollWidget } from '../common';\nconst NodeLayer = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: 5px;\n  background: ${props => props.theme.background};\n`;\n\nconst DIV = styled.div`\n  width: 100%;\n  height: 100%;\n`;\n\nexport interface MindDragScrollWidgetProps {\n  controller?: Controller;\n  model: SheetModel;\n  docModel: DocModel;\n  saveRef?: Function;\n  getRef?: Function;\n}\n\nexport class MindDragScrollWidget<\n  P extends MindDragScrollWidgetProps\n> extends React.PureComponent<MindDragScrollWidgetProps> {\n  constructor(props: MindDragScrollWidgetProps) {\n    super(props);\n  }\n\n  componentDidMount(): void {\n    const { getRef, docModel, model, controller } = this.props;\n    controller.run('addZoomFactorChangeEventListener', {\n      ...this.props,\n      listener: this.setZoomFactor\n    });\n    const rootTopic: HTMLElement = getRef(\n      topicNodeRefKey(model.editorRootTopicKey)\n    );\n    //TODO\n    const nodeLayer: HTMLElement = getRef(RefKey.NODE_LAYER + model.id);\n    const rootTopicRect = rootTopic.getBoundingClientRect();\n    const nodeLayerRect = nodeLayer.getBoundingClientRect();\n    this.dragScrollWidget.setViewBoxScrollDelta(\n      0,\n      rootTopicRect.top -\n        nodeLayerRect.top -\n        this.dragScrollWidget.viewBox.getBoundingClientRect().height / 2 +\n        rootTopicRect.height\n    );\n    //为了解决缩放之后切换到其他显示模式, 再次切换回去会错乱\n    this.setZoomFactor(controller.run('getZoomFactor', this.props));\n    this.layout();\n    setTimeout(() => {\n      docModel.currentSheetModel === model &&\n        controller.run('moveTopicToCenter', {\n          ...this.props,\n          topicKey: model.focusKey\n        });\n    });\n  }\n\n  componentWillUnmount(): void {\n    const { controller } = this.props;\n    controller.run('removeZoomFactorChangeEventListener', {\n      ...this.props,\n      listener: this.setZoomFactor\n    });\n  }\n\n  get dragScrollWidget(): DragScrollWidget {\n    const { getRef, model } = this.props;\n    return getRef(RefKey.DRAG_SCROLL_WIDGET_KEY + model.id);\n  }\n\n  componentDidUpdate(): void {\n    const { controller } = this.props;\n    controller.run('fireEvent', {\n      ...this.props,\n      key: EventKey.CENTER_ROOT_TOPIC\n    });\n    this.layout();\n  }\n\n  layout() {\n    const { controller } = this.props;\n    controller.run('layout', this.props);\n  }\n\n  setZoomFactor = zoomFactor => {\n    this.dragScrollWidget.setZoomFactor(zoomFactor);\n  };\n\n  onWheel = ev => {\n    const { controller } = this.props;\n    controller.run('setZoomFactorOnWheel', { ...this.props, ev });\n  };\n\n  render() {\n    const { saveRef, model, controller } = this.props;\n    const topicKey = model.editorRootTopicKey;\n    const topic = model.getTopic(topicKey);\n    return (\n      <DIV onWheel={this.onWheel}>\n        <DragScrollWidget\n          {...this.state}\n          enableMouseWheel={false}\n          ref={saveRef(RefKey.DRAG_SCROLL_WIDGET_KEY + model.id)}\n        >\n          {(\n            setViewBoxScroll: (left: number, top: number) => void,\n            setViewBoxScrollDelta: (left: number, top: number) => void\n          ) => {\n            const rootWidgetProps = {\n              ...this.props,\n              topicKey,\n              topic,\n              setViewBoxScroll,\n              setViewBoxScrollDelta\n            };\n            return (\n              <NodeLayer ref={saveRef(RefKey.NODE_LAYER + model.id)}>\n                {controller.run('renderRootWidget', rootWidgetProps)}\n              </NodeLayer>\n            );\n          }}\n        </DragScrollWidget>\n      </DIV>\n    );\n  }\n}\n","import React from 'react';\nimport { useState } from 'react';\nimport styled from 'styled-components';\nimport { RefKey } from '../../../utils';\nimport { BaseProps } from '../../common';\nimport { MindDragScrollWidget } from '../mind-drag-scroll-widget';\n\nconst log = require('debug')('node:mindmap-sheet');\n\nconst Container = styled.div`\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  flex-grow: 1;\n  background: ${props => props.theme.background};\n  position: relative;\n`;\nexport function MindMapSheet_(props: BaseProps) {\n  const { controller, saveRef, model } = props;\n  log('model', model);\n  const [diagramState, setDiagramState_] = useState(\n    controller.run('getInitialSheetState', props)\n  );\n  const setDiagramState = arg => {\n    setDiagramState_({ ...diagramState, ...arg });\n  };\n  const nProps = {\n    ...props,\n    diagramState,\n    setDiagramState\n  };\n  return (\n    <Container ref={saveRef(RefKey.SHEET_ROOT_KEY + model.id)}>\n      {/*{React.createElement(MindDragScrollWidget, nProps)}*/}\n      <MindDragScrollWidget {...nProps} />\n      {controller.run('renderSheetCustomize', nProps)}\n    </Container>\n  );\n}\n\nexport const MindMapSheet = React.memo(\n  MindMapSheet_,\n  (prevProps, nextProps) => {\n    const { controller } = prevProps;\n    return controller.run('sheetAreEqual', { prevProps, nextProps });\n  }\n);\n","import { OpType } from '@blink-mind/core';\nimport { ContextMenuTarget, Divider, Menu, MenuItem } from '@blueprintjs/core';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { getI18nText, I18nKey } from '../../../utils';\nimport { BaseProps, RenameDialog } from '../../common';\n\nconst Title = styled.span`\n  user-select: none;\n`;\n\ninterface Props extends BaseProps {}\n\ninterface State {\n  showRenameDialog: boolean;\n  title?: string;\n}\n\n@ContextMenuTarget\nexport class SheetTitle extends React.Component<Props, State> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showRenameDialog: false\n    };\n  }\n\n  onClickRename = () => {\n    this.setState({ showRenameDialog: true });\n  };\n\n  handleCancelRename = () => {\n    this.setState({ showRenameDialog: false });\n  };\n\n  handleConfirmRename = title => e => {\n    this.setState({\n      showRenameDialog: false\n    });\n    const props = this.props;\n    const { controller } = props;\n    controller.run('operation', {\n      ...props,\n      opType: OpType.SET_SHEET_TITLE,\n      title\n    });\n  };\n  onClickDelete = () => {\n    const props = this.props;\n    const { controller, docModel } = props;\n    controller.run('operation', {\n      ...props,\n      opType: OpType.DELETE_SHEET,\n      sheetModel: docModel.currentSheetModel\n    });\n  };\n\n  onClickDuplicate = () => {\n    const props = this.props;\n    const { controller, docModel } = props;\n    const title =\n      controller.run('getSheetTitle', props) + getI18nText(props, I18nKey.COPY);\n    controller.run('operation', {\n      ...props,\n      opType: OpType.DUPLICATE_SHEET,\n      sheetModel: docModel.currentSheetModel,\n      title\n    });\n  };\n\n  public renderContextMenu() {\n    const props = this.props;\n    const { docModel, model, controller } = props;\n    if (model == null) return;\n    if (docModel.currentSheetModel !== model) {\n      controller.run('operation', {\n        ...props,\n        opType: OpType.SET_CURRENT_SHEET,\n        sheetModel: model\n      });\n    }\n    return (\n      <Menu>\n        <MenuItem\n          onClick={this.onClickRename}\n          text={getI18nText(props, I18nKey.RENAME)}\n        />\n        <Divider />\n        <MenuItem\n          onClick={this.onClickDuplicate}\n          text={getI18nText(props, I18nKey.DUPLICATE)}\n        />\n        <MenuItem\n          onClick={this.onClickDelete}\n          text={getI18nText(props, I18nKey.DELETE)}\n        />\n      </Menu>\n    );\n  }\n\n  render() {\n    const props = this.props;\n    const { controller } = props;\n    const title = controller.run('getSheetTitle', props);\n    const renameDlgProps = {\n      ...props,\n      isOpen: this.state.showRenameDialog,\n      title,\n      handleConfirm: this.handleConfirmRename,\n      handleClose: this.handleCancelRename\n    };\n    return (\n      <div>\n        <Title>{title}</Title>\n        <RenameDialog {...renameDlgProps} />\n      </div>\n    );\n  }\n}\n","import { Tabs } from '@blueprintjs/core';\nimport cx from 'classnames';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { iconClassName, IconName } from '../../../utils';\nimport {\n  BaseProps,\n  CloseIcon,\n  IconBg,\n  ShowMenuIcon,\n  Title,\n  ZIndex\n} from '../../common';\n\nconst PanelRoot = styled(ZIndex)`\n  position: absolute;\n  background: white;\n  right: 30px;\n  top: 20px;\n  border-radius: 2px;\n  user-select: none;\n`;\n\nconst StyledTabs = styled(Tabs)`\n  padding: 0px 10px;\n`;\n\nexport function RightTopPanelWidget(props: BaseProps) {\n  const { controller, zIndex, diagramState, setDiagramState } = props;\n\n  const { rightTopPanel } = diagramState;\n\n  const { isOpen, selectedTabId } = rightTopPanel;\n\n  const setRightTopPanelState = obj => {\n    setDiagramState({\n      rightTopPanel: { ...rightTopPanel, ...obj }\n    });\n  };\n\n  if (!isOpen) {\n    return (\n      <PanelRoot zIndex={zIndex}>\n        <IconBg\n          onClick={() => {\n            setRightTopPanelState({ isOpen: true });\n          }}\n        >\n          <ShowMenuIcon className={iconClassName(IconName.SHOW_MENU)} />\n        </IconBg>\n      </PanelRoot>\n    );\n  }\n  const handleTabIdChange = tabId => {\n    setRightTopPanelState({\n      selectedTabId: tabId\n    });\n  };\n\n  return (\n    <PanelRoot zIndex={zIndex}>\n      <Title>\n        <CloseIcon\n          className={cx('bp3-button', iconClassName(IconName.CLOSE))}\n          onClick={() => {\n            setRightTopPanelState({ isOpen: false });\n          }}\n        />\n      </Title>\n      <StyledTabs\n        id=\"tabs\"\n        selectedTabId={selectedTabId}\n        onChange={handleTabIdChange}\n      >\n        {controller.run('renderRightTopPanelTabs', props)}\n      </StyledTabs>\n    </PanelRoot>\n  );\n}\n","import * as React from 'react';\nimport { getI18nText, I18nKey } from '../../../utils';\nimport {\n  renderItem,\n  renderItemI18n,\n  SettingGroup,\n  SettingItemColorPicker,\n  SettingItemSelect as SettingItemSelectC,\n  SettingRow,\n  SettingTitle\n} from '../../common';\nimport { ContentStyleEditorProps } from './types';\n\nconst SettingItemSelect = props => (\n  <SettingItemSelectC labelWidth={'45px'} {...props} />\n);\n\nconst borderWidthItems = [...Array(7).keys()];\nconst borderRadiusItems = [0, 5, 10, 15, 20, 25, 30, 35];\nconst borderStyleItems = ['none', 'solid', 'dotted', 'dashed', 'double'];\n\nexport function BorderStyleEditor(props: ContentStyleEditorProps) {\n  const { contentStyle, setContentStyle } = props;\n  const handleBorderWidthChange = value => {\n    // log('handleBorderWithChange:', value);\n    setContentStyle({ borderWidth: `${value}px` });\n  };\n\n  const handleBorderStyleChange = value => {\n    setContentStyle({ borderStyle: value });\n  };\n\n  const handleBorderRadiusChange = value => {\n    // log('handleBorderRadiusChange:', value);\n    setContentStyle({ borderRadius: `${value}px` });\n  };\n\n  const handleBorderColorChange = color => {\n    setContentStyle({ borderColor: color });\n  };\n  const labelWidth = 50;\n  return (\n    <SettingGroup>\n      <SettingTitle>{getI18nText(props, I18nKey.BORDER)}</SettingTitle>\n      <SettingRow>\n        <SettingItemSelect\n          title={`${getI18nText(props, I18nKey.WIDTH)}:`}\n          text={\n            contentStyle.borderWidth\n              ? contentStyle.borderWidth\n              : getI18nText(props, I18nKey.DEFAULT)\n          }\n          items={borderWidthItems}\n          itemRenderer={renderItem('px')}\n          onItemSelect={handleBorderWidthChange}\n        />\n        <SettingItemSelect\n          title={`${getI18nText(props, I18nKey.STYLE)}:`}\n          text={\n            contentStyle.borderStyle\n              ? getI18nText(props, contentStyle.borderStyle)\n              : getI18nText(props, I18nKey.NONE)\n          }\n          items={borderStyleItems}\n          itemRenderer={renderItemI18n(props)}\n          onItemSelect={handleBorderStyleChange}\n        />\n        <SettingItemSelect\n          title={`${getI18nText(props, I18nKey.RADIUS)}:`}\n          text={contentStyle.borderRadius}\n          items={borderRadiusItems}\n          itemRenderer={renderItem('px')}\n          onItemSelect={handleBorderRadiusChange}\n        />\n        <SettingItemColorPicker\n          color={contentStyle.borderColor}\n          handleColorChange={handleBorderColorChange}\n        />\n      </SettingRow>\n    </SettingGroup>\n  );\n}\n","import { OpType } from '@blink-mind/core';\nimport { Button } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { getI18nText, I18nKey } from '../../../utils';\nimport { SettingGroup, SettingItem } from '../../common';\n\nexport function ClearAllCustomStyle(props) {\n  const { controller } = props;\n  const handleClearAllCustomStyle = e => {\n    controller.run('operation', {\n      ...props,\n      opType: OpType.CLEAR_ALL_CUSTOM_STYLE\n    });\n  };\n\n  return (\n    <SettingGroup>\n      <SettingItem>\n        <Button onClick={handleClearAllCustomStyle}>\n          {getI18nText(props, I18nKey.CLEAR_ALL_CUSTOM_STYLE)}\n        </Button>\n      </SettingItem>\n    </SettingGroup>\n  );\n}\n","import { LinkStyle } from '@blink-mind/core';\nimport * as React from 'react';\nimport { getI18nText, I18nKey } from '../../../utils';\nimport {\n  BaseProps,\n  borderWidthItems,\n  renderItem,\n  renderItemI18n,\n  SettingGroup,\n  SettingItemColorPicker,\n  SettingItemSelect,\n  SettingRow,\n  SettingRowTitle,\n  SettingTitle\n} from '../../common';\n\nconst lineTypes = ['curve', 'round', 'line'];\n\nexport interface LinkStyleEditorProps extends BaseProps {\n  showLinkStyle?: boolean;\n  showSubLinkStyle?: boolean;\n  linkStyle: LinkStyle;\n  subLinkStyle: LinkStyle;\n  setLinkStyle: (LinkStyle) => void;\n  setSubLinkStyle: (LinkStyle) => void;\n}\n\nexport function LinkStyleEditor(props: LinkStyleEditorProps) {\n  const {\n    showLinkStyle = true,\n    showSubLinkStyle = true,\n    linkStyle = {},\n    subLinkStyle = {},\n    setLinkStyle,\n    setSubLinkStyle\n  } = props;\n\n  const handleLinkWidthChange = value => {\n    setLinkStyle({ lineWidth: `${value}px` });\n  };\n\n  const handleLinkTypeChange = value => {\n    setLinkStyle({ lineType: value });\n  };\n\n  const handleLinkColorChange = color => {\n    setLinkStyle({ lineColor: color });\n  };\n\n  const handleSubLinkWidthChange = value => {\n    setSubLinkStyle({ lineWidth: `${value}px` });\n  };\n\n  const handleSubLinkTypeChange = value => {\n    setSubLinkStyle({ lineType: value });\n  };\n\n  const handleSubLinkColorChange = color => {\n    setSubLinkStyle({ lineColor: color });\n  };\n  return (\n    <SettingGroup>\n      <SettingTitle>{getI18nText(props, I18nKey.LINK)}</SettingTitle>\n      {showLinkStyle && (\n        <SettingRow alignItems=\"center\">\n          <SettingRowTitle>\n            {getI18nText(props, I18nKey.LINK_TO_PARENT) + ':'}{' '}\n          </SettingRowTitle>\n          <SettingItemSelect\n            text={`${getI18nText(props, I18nKey.WIDTH)}: ${\n              linkStyle ? linkStyle.lineWidth : '0px'\n            }`}\n            items={borderWidthItems}\n            itemRenderer={renderItem('px')}\n            onItemSelect={handleLinkWidthChange}\n          />\n          <SettingItemSelect\n            text={`${getI18nText(props, I18nKey.LINE_TYPE)}: ${getI18nText(\n              props,\n              linkStyle.lineType\n            )}`}\n            items={lineTypes}\n            itemRenderer={renderItemI18n(props)}\n            onItemSelect={handleLinkTypeChange}\n          />\n          <SettingItemColorPicker\n            color={linkStyle.lineColor}\n            handleColorChange={handleLinkColorChange}\n          />\n        </SettingRow>\n      )}\n      {showSubLinkStyle && (\n        <SettingRow alignItems=\"center\">\n          <SettingRowTitle>\n            {getI18nText(props, I18nKey.SUB_LINKS) + ': '}\n          </SettingRowTitle>\n          <SettingItemSelect\n            text={`${getI18nText(props, I18nKey.WIDTH)}: ${\n              subLinkStyle ? subLinkStyle.lineWidth : '0px'\n            }`}\n            items={borderWidthItems}\n            itemRenderer={renderItem('px')}\n            onItemSelect={handleSubLinkWidthChange}\n          />\n          <SettingItemSelect\n            text={`${getI18nText(props, I18nKey.LINE_TYPE)}: ${getI18nText(\n              props,\n              subLinkStyle.lineType\n            )}`}\n            items={lineTypes}\n            itemRenderer={renderItemI18n(props)}\n            onItemSelect={handleSubLinkTypeChange}\n          />\n          <SettingItemColorPicker\n            color={subLinkStyle.lineColor}\n            handleColorChange={handleSubLinkColorChange}\n          />\n        </SettingRow>\n      )}\n    </SettingGroup>\n  );\n}\n","import { LinkStyle, OpType, TopicContentStyle } from '@blink-mind/core';\nimport debug from 'debug';\nimport * as React from 'react';\nimport { getI18nText, I18nKey } from '../../../utils';\nimport {\n  BaseProps,\n  PanelTabRoot,\n  SettingGroup,\n  SettingItemButton,\n  SettingItemColorPicker,\n  SettingTitle\n} from '../../common';\n\nimport { ViewModeMindMap } from '@blink-mind/core';\nimport { BorderStyleEditor } from './border-style-editor';\nimport { ClearAllCustomStyle } from './clear-all-custom-style';\nimport { LinkStyleEditor, LinkStyleEditorProps } from './link-style-editor';\nimport { ContentStyleEditorProps } from './types';\n\nconst log = debug('node:style-editor');\n\nlet copiedStyle;\n\nexport function StyleEditor(props: BaseProps) {\n  const { controller, model, topicKey } = props;\n  const topic = model.getTopic(topicKey);\n  const setContentStyle = style => {\n    controller.run('setTopicContentStyle', { ...props, style });\n  };\n\n  const handleBackgroundColorChange = color => {\n    setContentStyle({ background: color });\n  };\n\n  const handleClearStyle = () => {\n    if (topic.style) {\n      controller.run('operation', {\n        ...props,\n        opType: OpType.SET_STYLE,\n        style: null\n      });\n    }\n  };\n\n  const handleCopyStyle = () => {\n    copiedStyle = controller.run('getTopicStyle', props);\n    log(copiedStyle);\n  };\n\n  const handlePasteStyle = () => {\n    if (copiedStyle) {\n      controller.run('operation', {\n        ...props,\n        opType: OpType.SET_STYLE,\n        style: JSON.stringify(copiedStyle)\n      });\n    }\n  };\n\n  if (!model.focusKey) return null;\n  const contentStyle: TopicContentStyle = controller.run(\n    'getTopicContentStyle',\n    props\n  );\n\n  const linkStyle: LinkStyle = controller.run('getLinkStyle', props);\n  const subLinkStyle: LinkStyle = controller.run('getSubLinksStyle', props);\n  const setLinkStyle = linkStyle => {\n    controller.run('setLinkStyle', {\n      ...props,\n      linkStyle\n    });\n  };\n\n  const setSubLinkStyle = subLinkStyle => {\n    controller.run('setSubLinkStyle', {\n      ...props,\n      subLinkStyle\n    });\n  };\n\n  const linkStyleEditorProps: LinkStyleEditorProps = {\n    ...props,\n    linkStyle,\n    subLinkStyle,\n    setLinkStyle,\n    setSubLinkStyle\n  };\n\n  const contentStyleEditorPros: ContentStyleEditorProps = {\n    ...props,\n    contentStyle,\n    setContentStyle\n  };\n  const viewModeMindMap = model.config.viewMode === ViewModeMindMap;\n  return (\n    <PanelTabRoot>\n      {viewModeMindMap ? (\n        <BorderStyleEditor {...contentStyleEditorPros} />\n      ) : null}\n      {controller.run('renderTextStyleEditor', contentStyleEditorPros)}\n      {/*<TextStyleEditor {...contentStyleEditorPros} />*/}\n      {viewModeMindMap ? (\n        <SettingGroup>\n          <SettingTitle>{getI18nText(props, I18nKey.BACKGROUND)}</SettingTitle>\n          <SettingItemColorPicker\n            color={contentStyle.background}\n            handleColorChange={handleBackgroundColorChange}\n          />\n        </SettingGroup>\n      ) : null}\n      {viewModeMindMap ? <LinkStyleEditor {...linkStyleEditorProps} /> : null}\n      <SettingGroup>\n        <SettingItemButton\n          title={getI18nText(props, I18nKey.CLEAR_TOPIC_STYLE)}\n          onClick={handleClearStyle}\n        />\n        <SettingItemButton\n          title={getI18nText(props, I18nKey.COPY_STYLE)}\n          onClick={handleCopyStyle}\n        />\n        <SettingItemButton\n          title={getI18nText(props, I18nKey.PASTE_STYLE)}\n          onClick={handlePasteStyle}\n        />\n      </SettingGroup>\n      {ClearAllCustomStyle(props)}\n    </PanelTabRoot>\n  );\n}\n","import * as React from 'react';\n/** Event handler that exposes the target element's value as a boolean. */\nexport function handleBooleanChange(handler: (checked: boolean) => void) {\n  return (event: React.FormEvent<HTMLElement>) =>\n    handler((event.target as HTMLInputElement).checked);\n}\n\n/** Event handler that exposes the target element's value as a string. */\nexport function handleStringChange(handler: (value: string) => void) {\n  return (event: React.FormEvent<HTMLElement>) =>\n    handler((event.target as HTMLInputElement).value);\n}\n\n/** Event handler that exposes the target element's value as a number. */\nexport function handleNumberChange(handler: (value: number) => void) {\n  return handleStringChange(value => handler(+value));\n}\n","import * as React from 'react';\nimport { getI18nText, I18nKey, paddingCss } from '../../../utils';\nimport {\n  SettingGroup,\n  SettingItemNumericInput,\n  SettingRow,\n  SettingTitle\n} from '../../common';\nimport { ContentStyleEditorProps } from './types';\n\nconst expand = require('css-shorthand-expand');\n\nexport function PaddingStyleEditor(props: ContentStyleEditorProps) {\n  const { contentStyle, setContentStyle } = props;\n  const padding = expand('padding', contentStyle.padding || '0');\n  const commonProps = {\n    layout: 'v',\n    min: 0,\n    max: 99,\n    style: {\n      width: 38\n    }\n  };\n  const top = parseInt(padding['padding-top']);\n  const right = parseInt(padding['padding-right']);\n  const bottom = parseInt(padding['padding-bottom']);\n  const left = parseInt(padding['padding-left']);\n  const p = {\n    top,\n    right,\n    bottom,\n    left\n  };\n\n  const setPadding = dir => v => {\n    setContentStyle({ padding: paddingCss({ ...p, [dir]: v }) });\n  };\n  const topProps = {\n    ...commonProps,\n    title: getI18nText(props, I18nKey.TOP),\n    value: top,\n    onValueChange: setPadding('top')\n  };\n  const rightProps = {\n    ...commonProps,\n    title: getI18nText(props, I18nKey.RIGHT),\n    value: right,\n    onValueChange: setPadding('right')\n  };\n  const bottomProps = {\n    ...commonProps,\n    title: getI18nText(props, I18nKey.BOTTOM),\n    value: bottom,\n    onValueChange: setPadding('bottom')\n  };\n  const leftProps = {\n    ...commonProps,\n    title: getI18nText(props, I18nKey.LEFT),\n    value: left,\n    onValueChange: setPadding('left')\n  };\n  return (\n    <SettingGroup>\n      <SettingTitle>{getI18nText(props, I18nKey.PADDING)}</SettingTitle>\n      <SettingRow>\n        <SettingItemNumericInput {...topProps} />\n        <SettingItemNumericInput {...rightProps} />\n        <SettingItemNumericInput {...bottomProps} />\n        <SettingItemNumericInput {...leftProps} />\n      </SettingRow>\n    </SettingGroup>\n  );\n}\n","import * as React from 'react';\nimport { getI18nText, I18nKey } from '../../../utils';\nimport {\n  SettingGroup,\n  SettingItemColorPicker,\n  SettingItemInput,\n  SettingItemInputProps,\n  SettingItemNumericInput,\n  SettingItemSelect as SettingItemSelectC,\n  SettingRow,\n  SettingTitle\n} from '../../common';\n\nimport { MenuItem } from '@blueprintjs/core';\nimport { ContentStyleEditorProps } from './types';\n\nconst SettingItemSelect = props => (\n  <SettingItemSelectC labelWidth={'80px'} {...props} />\n);\n\nexport function TextStyleEditor(props: ContentStyleEditorProps) {\n  const { controller, contentStyle, setContentStyle } = props;\n  const handleFontSizeChange = value => {\n    // log('handleFontSizeChange:', value);\n    setContentStyle({ fontSize: value });\n  };\n\n  const handleLineHeightChange = e => {\n    // log('handleLineHeightChange:', e.target.value);\n    setContentStyle({ lineHeight: e.target.value });\n  };\n\n  const handleColorChange = color => {\n    setContentStyle({ color });\n  };\n  const fontF = contentStyle.fontFamily || getI18nText(props, I18nKey.DEFAULT);\n  const fontFamilyProps = {\n    filterable: true,\n    title: getI18nText(props, I18nKey.FONT_FAMILY) + ':',\n    text: <span style={{ fontFamily: fontF }}>{fontF}</span>,\n    items: controller.run('getFontList', props),\n    itemRenderer: item => {\n      const text = <span style={{ fontFamily: item }}>{item}</span>;\n      return (\n        <MenuItem\n          key={item}\n          text={text}\n          onClick={() => {\n            setContentStyle({ fontFamily: item });\n          }}\n        />\n      );\n    },\n    itemPredicate: (query, item, _index, exactMatch) => {\n      const normalizedTitle = item.toLowerCase();\n      const normalizedQuery = query.toLowerCase();\n\n      if (exactMatch) {\n        return normalizedTitle === normalizedQuery;\n      } else {\n        return normalizedTitle.indexOf(normalizedQuery) >= 0;\n      }\n    },\n    onItemSelect: item => {\n      setContentStyle({ fontFamily: item });\n    }\n  };\n  const fontStyle = contentStyle.fontStyle || 'Normal';\n  const fontStyleProps = {\n    title: getI18nText(props, I18nKey.FONT_STYLE) + ':',\n    text: fontStyle,\n    items: ['Normal', 'Italic', 'Oblique'],\n    itemRenderer: (v, { handleClick }) => {\n      return <MenuItem key={v} text={v} onClick={handleClick} />;\n    },\n    onItemSelect: item => {\n      setContentStyle({\n        fontStyle: item\n      });\n    }\n  };\n\n  const fontWeight = contentStyle.fontWeight || '400';\n  const fontWeightItemsMap = new Map([\n    ['100', 'Thin'],\n    ['200', 'ExtraLight'],\n    ['300', 'Light'],\n    ['400', 'Normal'],\n    ['500', 'Medium'],\n    ['600', 'DemiBold'],\n    ['700', 'Bold'],\n    ['800', 'UltraBold'],\n    ['900', 'Heavy']\n  ]);\n\n  const fontWeightProps = {\n    title: getI18nText(props, I18nKey.FONT_WEIGHT) + ':',\n    text: fontWeightItemsMap.get(fontWeight),\n    items: Array.from(fontWeightItemsMap.keys()),\n    itemRenderer: (v, { handleClick }) => {\n      return (\n        <MenuItem\n          key={v}\n          text={fontWeightItemsMap.get(v)}\n          onClick={handleClick}\n        />\n      );\n    },\n    onItemSelect: item => {\n      setContentStyle({\n        fontWeight: item\n      });\n    }\n  };\n\n  const fontSizeNumInputProps = {\n    title: `${getI18nText(props, I18nKey.FONT_SIZE)}:`,\n    labelWidth: '80px',\n    min: 12,\n    max: 100,\n    value: parseInt(contentStyle.fontSize),\n    style: {\n      width: 50\n    },\n    onValueChange: handleFontSizeChange\n  };\n  const lineHeightInputProps: SettingItemInputProps = {\n    title: `${getI18nText(props, I18nKey.LINE_HEIGHT)}:`,\n    style: {\n      width: '50px'\n    },\n    labelWidth: '80px',\n    value: contentStyle.lineHeight || '',\n    onChange: handleLineHeightChange\n  };\n  return (\n    <SettingGroup>\n      <SettingTitle>{getI18nText(props, I18nKey.TEXT_EDITOR)}</SettingTitle>\n      <SettingRow>\n        <SettingItemSelect {...fontFamilyProps} />\n        <SettingItemNumericInput {...fontSizeNumInputProps} />\n      </SettingRow>\n      <SettingRow>\n        <SettingItemSelect {...fontWeightProps} />\n        <SettingItemSelect {...fontStyleProps} />\n      </SettingRow>\n      <SettingRow>\n        <SettingItemInput {...lineHeightInputProps} />\n        <SettingItemColorPicker\n          color={contentStyle.color}\n          handleColorChange={handleColorChange}\n        />\n      </SettingRow>\n    </SettingGroup>\n  );\n}\n","import { LinkStyle, TopicContentStyle, TopicStyle } from '@blink-mind/core';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { getI18nText, I18nKey } from '../../../utils';\nimport {\n  BaseProps,\n  SettingGroup,\n  SettingItemColorPicker,\n  SettingTitle\n} from '../../common';\nimport { BorderStyleEditor } from '../style-editor/border-style-editor';\nimport { LinkStyleEditor } from '../style-editor/link-style-editor';\nimport { PaddingStyleEditor } from '../style-editor/padding-style-editor';\nimport { TextStyleEditor } from '../style-editor/text-style-editor';\nimport { ContentStyleEditorProps } from '../style-editor/types';\n\nconst TopicThemeEditorRoot = styled.div`\n  height: 250px;\n  overflow: auto;\n`;\n\nexport interface TopicThemeEditorProps extends BaseProps {\n  topicStyle: TopicStyle;\n  setTopicStyle: (style: TopicStyle) => void;\n}\n\nexport function TopicThemeEditor(props: TopicThemeEditorProps) {\n  const { topicStyle, setTopicStyle } = props;\n  const { contentStyle = {}, linkStyle = {}, subLinkStyle = {} } = topicStyle;\n\n  const setContentStyle = (contentStyle: TopicContentStyle) => {\n    setTopicStyle({ contentStyle });\n  };\n\n  const nProps: ContentStyleEditorProps = {\n    ...props,\n    contentStyle,\n    setContentStyle\n  };\n\n  const setLinkStyle = (linkStyle: LinkStyle) => {\n    setTopicStyle({ linkStyle });\n  };\n\n  const setSubLinkStyle = (subLinkStyle: LinkStyle) => {\n    setTopicStyle({ subLinkStyle });\n  };\n\n  const linkStyleEditorProps = {\n    ...props,\n    showLinkStyle: false,\n    linkStyle,\n    subLinkStyle,\n    setLinkStyle,\n    setSubLinkStyle\n  };\n  return (\n    <TopicThemeEditorRoot>\n      <BorderStyleEditor {...nProps} />\n      <PaddingStyleEditor {...nProps} />\n      <TextStyleEditor {...nProps} />\n      <SettingGroup>\n        <SettingTitle>{getI18nText(props, I18nKey.BACKGROUND)}</SettingTitle>\n        <SettingItemColorPicker\n          color={contentStyle.background}\n          handleColorChange={color => {\n            setContentStyle({ background: color });\n          }}\n        />\n      </SettingGroup>\n      <LinkStyleEditor {...linkStyleEditorProps} />\n    </TopicThemeEditorRoot>\n  );\n}\n","import { isThemeType, OpType, ThemeType, TopicStyle } from '@blink-mind/core';\nimport { Tab, Tabs } from '@blueprintjs/core';\nimport debug from 'debug';\nimport { cloneDeep, merge } from 'lodash';\nimport { useState } from 'react';\nimport * as React from 'react';\nimport {\n  browserDownloadText,\n  browserOpenFile,\n  getI18nText,\n  I18nKey\n} from '../../../utils';\nimport { handleBooleanChange } from '../../../utils/blueprint';\nimport { Alert } from '../../common';\nimport {\n  BaseProps,\n  PanelTabRoot,\n  SettingBoxContainer,\n  SettingGroup,\n  SettingItemButton,\n  SettingItemColorPicker,\n  SettingLabel,\n  SettingRow,\n  SettingTitle,\n  StyledCheckbox\n} from '../../common';\nimport { TopicThemeEditor, TopicThemeEditorProps } from './topic-theme-editor';\nconst log = debug('node:theme-editor');\n\nlet tabId = 'normal';\n\nexport function ThemeEditor(props: BaseProps) {\n  const [alertThemeError, setAlertThemeError] = useState(false);\n  const { model, controller } = props;\n\n  // 注意这里一定要用cloneDeep\n  const theme: ThemeType = cloneDeep(model.config.theme);\n\n  const {\n    rootTopic,\n    primaryTopic,\n    normalTopic\n  } = controller.run('getThemeOfTopic', { ...props, isClone: true });\n\n  const setTheme = theme => {\n    controller.run('operation', {\n      ...props,\n      opType: OpType.SET_THEME,\n      theme\n    });\n  };\n\n  const handleBackgroundColorChange = background => {\n    setTheme(merge(theme, { background }));\n  };\n\n  const handleHighlightColorChange = highlightColor => {\n    setTheme(merge(theme, { highlightColor }));\n  };\n\n  const handleRandomColorChange = handleBooleanChange(randomColor => {\n    setTheme(merge(theme, { randomColor }));\n  });\n\n  const setRootTopicStyle = (style: TopicStyle) => {\n    setTheme(merge(theme, { rootTopic: style }));\n  };\n\n  const setPrimaryTopicStyle = (style: TopicStyle) => {\n    setTheme(merge(theme, { primaryTopic: style }));\n  };\n\n  const setNormalTopicStyle = (style: TopicStyle) => {\n    setTheme(merge(theme, { normalTopic: style }));\n  };\n\n  const rootTopicEditorProps: TopicThemeEditorProps = {\n    ...props,\n    topicStyle: rootTopic,\n    setTopicStyle: setRootTopicStyle\n  };\n\n  const rootTopicEditor = <TopicThemeEditor {...rootTopicEditorProps} />;\n\n  const primaryTopicEditorProps: TopicThemeEditorProps = {\n    ...props,\n    topicStyle: primaryTopic,\n    setTopicStyle: setPrimaryTopicStyle\n  };\n\n  const primaryTopicEditor = <TopicThemeEditor {...primaryTopicEditorProps} />;\n\n  const normalTopicEditorProps: TopicThemeEditorProps = {\n    ...props,\n    topicStyle: normalTopic,\n    setTopicStyle: setNormalTopicStyle\n  };\n\n  const normalTopicEditor = <TopicThemeEditor {...normalTopicEditorProps} />;\n\n  const tabsProps = {\n    id: tabId,\n    handleTabIdChange: id => {\n      tabId = id;\n    }\n  };\n\n  const topicThemes = (\n    <SettingBoxContainer>\n      <Tabs {...tabsProps}>\n        <Tab\n          id=\"normal\"\n          title={getI18nText(props, I18nKey.NORMAL_TOPIC)}\n          panel={normalTopicEditor}\n        />\n        <Tab\n          id=\"primary\"\n          title={getI18nText(props, I18nKey.PRIMARY_TOPIC)}\n          panel={primaryTopicEditor}\n        />\n        <Tab\n          id=\"root\"\n          title={getI18nText(props, I18nKey.ROOT_TOPIC)}\n          panel={rootTopicEditor}\n        />\n      </Tabs>\n    </SettingBoxContainer>\n  );\n\n  const handleExportTheme = e => {\n    // setShowExportDialog(true);\n    const text = JSON.stringify(theme);\n    browserDownloadText(text, 'blink-mind-theme.json');\n  };\n  const handleImportTheme = e => {\n    browserOpenFile('.json,.txt').then(txt => {\n      const t: ThemeType = JSON.parse(txt);\n      if (!isThemeType(t)) {\n        setAlertThemeError(true);\n        return;\n      }\n      setTheme(t);\n    });\n  };\n  const alertProps = {\n    ...props,\n    isOpen: alertThemeError,\n    cancelButtonText: null,\n    content: getI18nText(props, I18nKey.FILE_FORMAT_ERROR),\n    onClose: e => {\n      setAlertThemeError(false);\n    }\n  };\n  const alert = <Alert {...alertProps} />;\n\n  return (\n    <PanelTabRoot>\n      <SettingGroup>\n        <SettingTitle>{getI18nText(props, I18nKey.GLOBAL)}</SettingTitle>\n        <SettingRow>\n          <SettingLabel>\n            {getI18nText(props, I18nKey.BACKGROUND) + ':'}\n          </SettingLabel>\n          <SettingItemColorPicker\n            color={theme.background}\n            handleColorChange={handleBackgroundColorChange}\n          />\n          <SettingLabel>\n            {getI18nText(props, I18nKey.HIGHLIGHT) + ':'}\n          </SettingLabel>\n          <SettingItemColorPicker\n            color={theme.highlightColor}\n            handleColorChange={handleHighlightColorChange}\n          />\n          <SettingLabel>\n            {getI18nText(props, I18nKey.RANDOM_COLOR) + ':'}\n          </SettingLabel>\n          <StyledCheckbox\n            checked={theme.randomColor}\n            onChange={handleRandomColorChange}\n          />\n        </SettingRow>\n      </SettingGroup>\n      {topicThemes}\n\n      <SettingGroup>\n        <SettingItemButton\n          title={getI18nText(props, I18nKey.EXPORT_THEME)}\n          onClick={handleExportTheme}\n        />\n        <SettingItemButton\n          title={getI18nText(props, I18nKey.IMPORT_THEME)}\n          onClick={handleImportTheme}\n        />\n      </SettingGroup>\n\n      {/*<Dialog*/}\n      {/*  onClose={()=>setShowExportDialog(false)}*/}\n      {/*  isOpen={showExportDialog}*/}\n      {/*  autoFocus*/}\n      {/*  enforceFocus*/}\n      {/*  usePortal*/}\n      {/*  title=\"Please input the export file name\"*/}\n      {/*>*/}\n      {/*  */}\n      {/*</Dialog>*/}\n      {alert}\n    </PanelTabRoot>\n  );\n}\n","import { OpType } from '@blink-mind/core';\nimport { ViewModeMindMap } from '@blink-mind/core';\nimport { Classes, Position, Tooltip } from '@blueprintjs/core';\nimport debug from 'debug';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { EventKey, getI18nText, I18nKey, Icon, IconName } from '../../../utils';\nimport { BaseWidget, ZIndex } from '../../common';\n\nconst log = debug('node:view-port-viewer');\n\nconst ViewerRoot = styled(ZIndex)`\n  position: absolute;\n  background: white;\n  right: 25px;\n  bottom: 25px;\n  border-radius: 2px;\n  display: flex;\n  flex-direction: row;\n`;\n\nconst Item = props => {\n  return (\n    <Tooltip\n      content={props.tooltip}\n      position={Position.TOP}\n      className={Classes.ICON}\n    >\n      <div className=\"bm-btn\" onClick={props.onClick} tabIndex={-1}>\n        {props.children}\n      </div>\n    </Tooltip>\n  );\n};\n\nexport class ViewPortViewer extends BaseWidget {\n  componentDidMount(): void {\n    const props = this.props;\n    const { controller } = props;\n    controller.run('addZoomFactorChangeEventListener', {\n      ...props,\n      listener: this.zoomFactorChange\n    });\n  }\n\n  componentWillUnmount(): void {\n    const props = this.props;\n    const { controller } = props;\n    controller.run('removeZoomFactorChangeEventListener', {\n      ...props,\n      listener: this.zoomFactorChange\n    });\n  }\n\n  zoomFactorChange = zoomFactor => {\n    log('zoomFactorChange', zoomFactor);\n    this.setState({ zoomFactor });\n  };\n\n  onClickResetZoom = e => {\n    const props = this.props;\n    const { controller } = props;\n    controller.run('setZoomFactor', {\n      ...props,\n      zoomFactor: 1\n    });\n  };\n\n  onClickAddZoom = e => {\n    const props = this.props;\n    const { controller } = props;\n    const zoomFactor = controller.run('getZoomFactor', props);\n    controller.run('setZoomFactor', {\n      ...props,\n      zoomFactor: zoomFactor + 0.1\n    });\n  };\n\n  onClickMinusZoom = e => {\n    const props = this.props;\n    const { controller } = props;\n    const zoomFactor = controller.run('getZoomFactor', props);\n    controller.run('setZoomFactor', {\n      ...props,\n      zoomFactor: zoomFactor - 0.1\n    });\n  };\n\n  onClickCollapseAll = e => {\n    const props = this.props;\n    const { controller } = props;\n    controller.run('addEventListener', {\n      ...props,\n      key: EventKey.CENTER_ROOT_TOPIC,\n      listener: this.centerRootTopic,\n      once: true\n    });\n    controller.run('operation', {\n      ...props,\n      opType: OpType.COLLAPSE_ALL\n    });\n  };\n\n  onClickExpandAll = e => {\n    const props = this.props;\n    const { controller } = props;\n    controller.run('addEventListener', {\n      ...props,\n      key: EventKey.CENTER_ROOT_TOPIC,\n      listener: this.centerRootTopic,\n      once: true\n    });\n    controller.run('operation', {\n      ...props,\n      opType: OpType.EXPAND_ALL\n    });\n  };\n\n  centerRootTopic = () => {\n    const { controller } = this.props;\n    const model = controller.model;\n    controller.run('moveTopicToCenter', {\n      ...this.props,\n      topicKey: model.editorRootTopicKey\n    });\n  };\n\n  render() {\n    log('render');\n    const props = this.props;\n    const { controller, zIndex, model } = props;\n    const zoomFactor = controller.run('getZoomFactor', props);\n    return (\n      <ViewerRoot zIndex={zIndex}>\n        <Item\n          onClick={this.onClickCollapseAll}\n          tooltip={getI18nText(props, I18nKey.COLLAPSE_ALL)}\n        >\n          {Icon(IconName.COLLAPSE_ALL)}\n        </Item>\n        <Item\n          onClick={this.onClickExpandAll}\n          tooltip={getI18nText(props, I18nKey.EXPAND_ALL)}\n        >\n          {Icon(IconName.EXPAND_ALL)}\n        </Item>\n        {model.config.viewMode === ViewModeMindMap ? (\n          <Item\n            onClick={this.centerRootTopic}\n            tooltip={getI18nText(props, I18nKey.CENTER_ROOT_TOPIC)}\n          >\n            {Icon(IconName.CENTER)}\n          </Item>\n        ) : null}\n\n        <Item\n          onClick={this.onClickMinusZoom}\n          tooltip={getI18nText(props, I18nKey.ZOOM_IN)}\n        >\n          {Icon(IconName.MINUS)}\n        </Item>\n        <Item\n          onClick={this.onClickResetZoom}\n          tooltip={getI18nText(props, I18nKey.RESET)}\n        >\n          <span className=\"iconfont\">{`${getI18nText(\n            props,\n            I18nKey.ZOOM\n          )}:${Math.floor(zoomFactor * 100)}%`}</span>\n        </Item>\n        <Item\n          onClick={this.onClickAddZoom}\n          tooltip={getI18nText(props, I18nKey.ZOOM_OUT)}\n        >\n          {Icon(IconName.PLUS)}\n        </Item>\n      </ViewerRoot>\n    );\n  }\n}\n","import * as React from 'react';\nimport { ThemeProvider } from 'styled-components';\n\n//TODO 是否需要themeProvider\nexport default function Theme({ theme, children }) {\n  return (\n    //@ts-ignore\n    <ThemeProvider theme={theme}>\n      <React.Fragment>{children}</React.Fragment>\n    </ThemeProvider>\n  );\n}\n","import { OpType } from '@blink-mind/core';\nimport { Icon } from '@blueprintjs/core';\nimport { IconNames } from '@blueprintjs/icons';\nimport { Tab, TabList, TabPanel, Tabs } from '@slim-ui/react-tabs';\nimport '@slim-ui/react-tabs/style/react-tabs.css';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport Theme from '../../plugins/react/theme';\nimport { SheetTitle } from './sheet';\n\nconst Root = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n`;\nconst TabsContainer = styled.div`\n  width: 100%;\n  //height: 100%;\n  //overflow: auto;\n  flex-grow: 1;\n  background: ${props => props.theme.background};\n  position: relative;\n`;\n\nexport function DiagramRoot(props) {\n  const { controller, docModel } = props;\n  const onClickAddSheet = () => {\n    controller.run('operation', {\n      ...props,\n      opType: OpType.ADD_SHEET,\n      sheetModel: controller.run('createNewSheetModel', props)\n    });\n  };\n  const onSelect = (index, lastIndex, e) => {\n    if (index !== lastIndex && index !== docModel.sheetModels.size) {\n      controller.run('operation', {\n        ...props,\n        opType: OpType.SET_CURRENT_SHEET,\n        sheetModel: docModel.sheetModels.get(index),\n        callback: docModel => () => {\n          controller.run('moveTopicToCenter', props);\n        }\n      });\n    }\n  };\n  const onCopy = ev => {\n    controller.run('handleCopy', { ...props, ev });\n  };\n  const model = docModel.currentSheetModel;\n\n  const sheetModels = docModel.sheetModels.toArray();\n  let i = 0;\n  const tabClassName = 'react-tabs__tab';\n  const tabProps = {\n    className: tabClassName,\n    tabIndex: '-1'\n  };\n  const tabs = sheetModels.map(model => {\n    const index = i++;\n    const nProps = { ...props, model, index };\n    return (\n      <Tab key={index} {...tabProps}>\n        <SheetTitle {...nProps} />\n      </Tab>\n    );\n  });\n  tabs.push(\n    <Tab key={i++} {...tabProps}>\n      <Icon onClick={onClickAddSheet} icon={IconNames.PLUS} />\n    </Tab>\n  );\n  i = 0;\n\n  // const tabPanelProps = {\n  //   className: 'tab-panel react-tabs__tab-panel'\n  // };\n  const tabPanelProps = {\n    className: 'tab-panel',\n    selectedClassName: 'tab-panel__selected'\n  };\n  const tabPanels = sheetModels.map(model => {\n    return (\n      <TabPanel key={i++} {...tabPanelProps}>\n        <Theme theme={model.config.theme}>\n          {controller.run('renderSheet', {\n            ...props,\n            model\n          })}\n        </Theme>\n      </TabPanel>\n    );\n  });\n  tabPanels.push(<TabPanel key={i++} {...tabPanelProps} />);\n  const tabsProps = {\n    className: 'bm-sheet-tabs react-tabs react-tabs__tabs',\n    selectedIndex: docModel.currentSheetIndex,\n    forceRenderTabPanel: true,\n    onSelect\n  };\n  const child = (\n    <TabsContainer>\n      <Tabs {...tabsProps}>\n        {tabPanels}\n        <TabList className=\"tab-list\">{tabs}</TabList>\n      </Tabs>\n    </TabsContainer>\n  );\n\n  return (\n    <Root onCopy={onCopy}>\n      {/*<GlobalStyle />*/}\n      {controller.run('renderToolbar', { ...props, model })}\n      {controller.run('renderDiagramCustomize', props)}\n      {child}\n    </Root>\n  );\n}\n","import { Classes, Dialog } from '@blueprintjs/core';\nimport { ReactElement } from 'react';\nimport * as React from 'react';\nimport { BaseProps } from '../common';\n\nexport interface DialogProps {\n  name?: string;\n  title?: any;\n  style?: any;\n  onClose?: (event?: React.SyntheticEvent<HTMLElement>) => void;\n}\n\ninterface Props extends BaseProps {\n  dialogContent: ReactElement;\n  dialogProps: DialogProps;\n}\n\nexport function DialogWidget(props: Props) {\n  const { dialogContent, dialogProps } = props;\n\n  const _dialogProps = {\n    isOpen: dialogContent != null,\n    autoFocus: true,\n    enforceFocus: true,\n    usePortal: true,\n    ...dialogProps\n  };\n  return (\n    <Dialog {..._dialogProps}>\n      <div className={Classes.DIALOG_BODY} style={{ minHeight: 0 }}>\n        {dialogContent}\n      </div>\n    </Dialog>\n  );\n}\n","import { OpType } from '@blink-mind/core';\nimport {\n  Breadcrumb,\n  Breadcrumbs,\n  PopoverPosition,\n  Tooltip\n} from '@blueprintjs/core';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { PropKey } from '../../utils';\nimport { BaseWidget, ZIndex } from '../common';\n\nconst EditorRootBreadcrumbsRoot = styled(ZIndex)`\n  position: absolute;\n  width: 20%;\n  padding: 0 5px;\n  background: white;\n  left: 20px;\n  top: 20px;\n  border-radius: 2px;\n`;\n\nconst TooltipContent = styled.div`\n  max-width: 600px;\n`;\n\nconst BreadcrumbTitle = styled.span``;\n\nexport class EditorRootBreadcrumbs extends BaseWidget {\n  constructor(props) {\n    super(props);\n  }\n\n  setEditorRootTopicKey = topicKey => () => {\n    const { model, controller } = this.props;\n    if (model.editorRootTopicKey !== topicKey) {\n      controller.run('operation', {\n        ...this.props,\n        opType: OpType.SET_EDITOR_ROOT,\n        topicKey\n      });\n    }\n  };\n\n  breadcrumbRenderer = props => {\n    const { text, ...breadProps } = props;\n    const needTooltip = text.length > 8;\n    const title = needTooltip ? text.substr(0, 8) + '...' : text;\n    //TODO\n\n    const content = <TooltipContent>{text}</TooltipContent>;\n    const tooltipProps = {\n      content,\n      position: PopoverPosition.BOTTOM_RIGHT\n    };\n    const breadcrumb = (\n      <Breadcrumb {...breadProps}>\n        <BreadcrumbTitle>{title}</BreadcrumbTitle>\n      </Breadcrumb>\n    );\n    return needTooltip ? (\n      <Tooltip {...tooltipProps}>{breadcrumb}</Tooltip>\n    ) : (\n      breadcrumb\n    );\n  };\n\n  render() {\n    const props = this.props;\n    const { model, controller, zIndex } = props;\n    const editingRootKey = model.editorRootTopicKey;\n    if (editingRootKey === model.rootTopicKey) return null;\n\n    const items = [];\n    let topic = model.getTopic(editingRootKey);\n    while (topic != null) {\n      const title = controller.getValue(PropKey.TOPIC_TITLE, {\n        ...props,\n        topicKey: topic.key\n      });\n      items.unshift({\n        text: title,\n        onClick: this.setEditorRootTopicKey(topic.key)\n      });\n      topic = model.getTopic(topic.parentKey);\n    }\n    const breadcrumbProps = {\n      items,\n      breadcrumbRenderer: this.breadcrumbRenderer\n    };\n    return (\n      <EditorRootBreadcrumbsRoot zIndex={zIndex}>\n        <Breadcrumbs {...breadcrumbProps} />\n      </EditorRootBreadcrumbsRoot>\n    );\n  }\n}\n","import * as React from 'react';\nimport styled from 'styled-components';\nimport {\n  centerPointX,\n  centerPointY,\n  centerX,\n  centerY,\n  getRelativeRect,\n  Point,\n  RefKey\n} from '../../utils';\nimport { BaseProps, BaseWidget } from '../common';\n\nimport debug from 'debug';\nimport { contentRefKey, linksSvgRefKey } from '../../utils';\nconst RootLinksSvg = styled.svg`\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n`;\n\nconst log = debug('node:root-sub-links');\n\ninterface Props extends BaseProps {}\n\ninterface State {\n  curves: any[];\n}\n\nexport class RootSubLinks extends BaseWidget<Props, State> {\n  state = {\n    curves: []\n  };\n\n  layout() {\n    const props = this.props;\n    const { model, getRef, topicKey, zoomFactor, controller } = props;\n    const topic = model.getTopic(topicKey);\n    const content = getRef(contentRefKey(topicKey));\n    const svg = getRef(linksSvgRefKey(topicKey));\n    const bigView = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY + model.id).bigView;\n    const contentRect = getRelativeRect(content, bigView, zoomFactor);\n    const svgRect = getRelativeRect(svg, bigView, zoomFactor);\n    let p1: Point, p2: Point;\n\n    p1 = {\n      x: centerX(contentRect) - svgRect.left,\n      y: centerY(contentRect) - svgRect.top\n    };\n    const curves = [];\n    topic.subKeys.forEach(key => {\n      const linkStyle = controller.run('getLinkStyle', {\n        ...props,\n        topicKey: key\n      });\n      const lineType = linkStyle.lineType;\n      const subTopicContent = getRef(contentRefKey(key));\n      const rect = getRelativeRect(subTopicContent, bigView, zoomFactor);\n      if (rect.left > contentRect.right) {\n        p2 = {\n          x: rect.left,\n          y: centerY(rect)\n        };\n      } else {\n        p2 = {\n          x: rect.right,\n          y: centerY(rect)\n        };\n      }\n      p2 = { x: p2.x - svgRect.left, y: p2.y - svgRect.top };\n      let curve;\n      if (lineType === 'curve') {\n        curve = `M ${p1.x} ${p1.y} C ${p1.x} ${centerPointY(\n          p1,\n          p2\n        )} ${centerPointX(p1, p2)} ${p2.y} ${p2.x} ${p2.y}`;\n      } else if (lineType === 'line') {\n        curve = `M ${p1.x} ${p1.y} L ${p2.x} ${p2.y}`;\n      } else if (lineType === 'round') {\n        const vDir = p2.y > p1.y ? 1 : -1;\n        const hDir = p2.x > p1.x ? 1 : -1;\n        const radius = linkStyle.lineRadius;\n        if (radius == null) {\n          throw new Error(\n            'link line type is round, but lineRadius is not provided!'\n          );\n        }\n        if (p2.y === p1.y) {\n          curve = `M ${p1.x} ${p1.y} H ${p2.x}`;\n        } else {\n          // 0 表示逆时针 1 表示顺时针\n          curve = `M ${p1.x} ${p1.y}  V ${p2.y -\n            vDir * radius} A ${radius} ${radius} 0 0 ${\n            vDir * hDir === 1 ? 0 : 1\n          } ${p1.x + radius * hDir} ${p2.y} H ${p2.x}`;\n        }\n      }\n      curves.push(\n        <path\n          key={`link-${key}`}\n          d={curve}\n          strokeWidth={linkStyle.lineWidth}\n          stroke={linkStyle.lineColor}\n          fill=\"none\"\n        />\n      );\n    });\n    this.setState({\n      curves\n    });\n  }\n\n  render() {\n    log('render');\n    const { topicKey, saveRef } = this.props;\n    return (\n      <RootLinksSvg ref={saveRef(linksSvgRefKey(topicKey))}>\n        <g>{this.state.curves}</g>\n      </RootLinksSvg>\n    );\n  }\n}\n","import { DiagramLayoutType, KeyType, TopicDirection } from '@blink-mind/core';\nimport debug from 'debug';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { topicNodeRefKey } from '../../utils';\nimport { BaseProps } from '../common';\n\nconst log = debug('RootNode');\n\nconst LayerPart = styled.div`\n  display: flex;\n  position: relative;\n\n  align-items: ${props =>\n    //@ts-ignore\n    props.topicDirection === TopicDirection.LEFT ? 'flex-end' : 'flex-start'};\n  flex-direction: column;\n\n  padding: ${props =>\n    //@ts-ignore\n    props.topicDirection === TopicDirection.LEFT\n      ? '15px 60px 15px 0px'\n      : '15px 0px 15px 60px'};\n`;\n\nconst Topic = styled.div`\n  display: flex;\n  position: relative;\n  align-items: center;\n  z-index: 3;\n`;\n\ninterface Props extends BaseProps {\n  setViewBoxScroll?: (left: number, top: number) => void;\n  setViewBoxScrollDelta?: (left: number, top: number) => void;\n}\n\nexport class RootWidget extends React.Component<Props> {\n  renderPartTopics(topics: KeyType[], dir: string) {\n    const { controller, saveRef } = this.props;\n    const res = controller.run('createSubTopics', {\n      ...this.props,\n      dir,\n      isRoot: true,\n      topics\n    });\n    if (!res) return null;\n    const { subTopics } = res;\n    const cxName = `bm-layer-${dir === TopicDirection.LEFT ? 'left' : 'right'}`;\n    return (\n      //@ts-ignore\n      <LayerPart topicDirection={dir} ref={saveRef(cxName)}>\n        {subTopics}\n      </LayerPart>\n    );\n  }\n\n  render() {\n    log('render');\n    const props = this.props;\n    const { model, topicKey, saveRef, controller } = props;\n    const topicStyle = controller.run('getTopicContentStyle', props);\n    const config = model.config;\n    const topicContent = controller.run('renderTopicNode', {\n      ...props,\n      topicStyle,\n      dir: TopicDirection.MAIN\n    });\n    const partTopics = controller.run('getPartTopics', {\n      layout: config.layoutDir,\n      model,\n      topicKey\n    });\n    const rootTopic = (\n      <Topic ref={saveRef(topicNodeRefKey(topicKey))}>{topicContent}</Topic>\n    );\n    const children = controller.run('renderRootWidgetOtherChildren', props);\n    switch (config.layoutDir) {\n      case DiagramLayoutType.LEFT_AND_RIGHT:\n        return (\n          <>\n            {this.renderPartTopics(partTopics.L, 'L')}\n            {rootTopic}\n            {this.renderPartTopics(partTopics.R, 'R')}\n            {children}\n          </>\n        );\n      case DiagramLayoutType.LEFT_TO_RIGHT:\n        return (\n          <>\n            {rootTopic}\n            {this.renderPartTopics(partTopics.R, 'R')}\n            {children}\n          </>\n        );\n      case DiagramLayoutType.RIGHT_TO_LEFT:\n        return (\n          <>\n            {this.renderPartTopics(partTopics.L, 'L')}\n            {rootTopic}\n            {children}\n          </>\n        );\n      case DiagramLayoutType.TOP_TO_BOTTOM:\n        return (\n          <>\n            {rootTopic}\n            {this.renderPartTopics(partTopics.B, 'B')}\n            {children}\n          </>\n        );\n    }\n    return null;\n  }\n}\n","import { TopicDirection } from '@blink-mind/core';\nimport React from 'react';\nimport styled, { css } from 'styled-components';\nimport { collapseRefKey, iconClassName } from '../../utils';\n\nconst Icon = styled.div`\n  position: absolute;\n  top: ${props =>\n    props.hasUnderline ? 'calc(100% - 8px)' : 'calc(50% - 8px)'};\n  ${({ dir }) => {\n    if (dir === TopicDirection.RIGHT)\n      return css`\n        right: -25px;\n      `;\n    if (dir === TopicDirection.LEFT)\n      return css`\n        left: -25px;\n      `;\n  }};\n  border-radius: 50%;\n  width: 16px;\n  height: 16px;\n  text-align: center;\n  box-shadow: 0 1px 2px rgba(0,0,0,0.3);\n  //@ts-ignore\n  //background: ${props => props.background};\n  background: #fff;\n  color: #888;\n  cursor: pointer;\n  padding: 0;\n  //font-size: 16px !important;\n  line-height: 16px;\n  border: 0;\n  z-index: 2;\n  \n  &:before {\n    transform: scale(0.8, 0.8);\n  }\n`;\n\nexport function TopicCollapseIcon(props) {\n  const { topic, topicKey, dir, saveRef, onClickCollapse, linkStyle } = props;\n  const hasUnderline = linkStyle.hasUnderline;\n  return topic.subKeys.size > 0 ? (\n    <Icon\n      ref={saveRef(collapseRefKey(topicKey))}\n      onClick={onClickCollapse}\n      // background={topicStyle.background}\n      dir={dir}\n      hasUnderline={hasUnderline}\n      className={iconClassName(topic.collapse ? 'plus' : 'minus')}\n    />\n  ) : null;\n}\n","import { useEffect, useRef, useState } from 'react';\n\nexport function useClickOutside(callback: EventListener) {\n  const container = useRef(null);\n  const [isTouchEvent, setTouchEvent] = useState(false);\n  const eventType = isTouchEvent ? 'touchend' : 'click';\n\n  function handleEvent(e: Event) {\n    if (e.type === 'click' && isTouchEvent) { return; } // prettier-ignore\n\n    if (container.current && e.target !== null) {\n      if (!container.current.contains(e.target as Node)) {\n        callback(e);\n      }\n    }\n  }\n\n  useEffect(() => {\n    document.addEventListener(eventType, handleEvent, true);\n\n    return () => {\n      document.removeEventListener(eventType, handleEvent, true);\n    };\n  });\n\n  useEffect(() => {\n    setTouchEvent('ontouchstart' in document.documentElement);\n  }, []);\n\n  return container;\n}\n","import { useRef, useEffect } from 'react';\n\nexport const useEventListener = (eventName, handler, element = global) => {\n  const savedHandler = useRef();\n\n  useEffect(() => {\n    savedHandler.current = handler;\n  }, [handler]);\n\n  useEffect(() => {\n    const isSupported = element && element.addEventListener;\n    if (!isSupported) return;\n\n    const eventListener = event => savedHandler.current(event);\n    element.addEventListener(eventName, eventListener);\n    return () => {\n      element.removeEventListener(eventName, eventListener);\n    };\n  }, [eventName, element]);\n};\n","import { FocusMode, OpType } from '@blink-mind/core';\nimport React from 'react';\nimport styled from 'styled-components';\nimport { Key } from 'ts-keycode-enum';\nimport { useClickOutside } from '../../hooks';\n\nconst EditingRoot = styled.div`\n  position: relative;\n  padding: 5px;\n`;\n\nconst cancelEvent = e => {\n  e.preventDefault();\n  e.stopPropagation();\n};\n\n// 包裹一层，处理drag事件\nexport function TopicBlockContent(props) {\n  const { controller, model, topic, topicKey } = props;\n  const readOnly = model.editingContentKey !== topicKey;\n  const ref = useClickOutside(() => {\n    if (!readOnly) {\n      // console.log('onClickOutSide');\n      controller.run('operation', {\n        ...props,\n        opType: OpType.SET_FOCUS_MODE,\n        focusMode: FocusMode.NORMAL\n      });\n    }\n  });\n  const handleKeyDown = e => {\n    switch (e.keyCode) {\n      case Key.Enter:\n        if (!e.shiftKey) {\n          controller.run('operation', {\n            ...props,\n            opType: OpType.FOCUS_TOPIC,\n            focusMode: FocusMode.NORMAL\n          });\n          e.nativeEvent.stopImmediatePropagation();\n          return true;\n        }\n        break;\n    }\n    return false;\n  };\n\n  const editor = controller.run('renderTopicContentEditor', {\n    ...props,\n    readOnly,\n    handleKeyDown\n  });\n  return (\n    <EditingRoot ref={ref} onDragEnter={cancelEvent} onDragOver={cancelEvent}>\n      {editor}\n    </EditingRoot>\n  );\n}\n","import debug from 'debug';\nimport * as React from 'react';\nimport styled from 'styled-components';\nconst log = debug('node:popup');\n\nconst Popup = styled.div`\n  padding: 5px;\n  //position: absolute;\n  //left: 0;\n  //top: 0;\n`;\n\ninterface Props {\n  handleVisibleChange: (boolean) => void;\n}\n\nexport class TopicContentEditorPopup extends React.Component<Props> {\n  componentDidMount() {\n    document.addEventListener('click', this._handleClick);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this._handleClick);\n  }\n\n  _handleClick = event => {\n    log('_handleClick', event, this.root);\n    const wasOutside = !this.root.contains(event.target);\n    wasOutside &&\n      this.props.handleVisibleChange &&\n      this.props.handleVisibleChange(false);\n  };\n\n  root: HTMLElement;\n\n  rootRef = ref => {\n    this.root = ref;\n  };\n\n  render() {\n    return <Popup ref={this.rootRef}>{this.props.children}</Popup>;\n  }\n}\n","import { Menu } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { BaseWidget } from '../common';\n\nexport class TopicContextMenu extends BaseWidget {\n  render() {\n    const { controller } = this.props;\n    return (\n      <Menu>{controller.run('customizeTopicContextMenu', this.props)}</Menu>\n    );\n  }\n}\n","import { BlockType, OpType } from '@blink-mind/core';\nimport * as React from 'react';\nimport { iconClassName, IconName } from '../../utils';\nimport { TopicBlockIcon } from '../common';\n\nconst log = require('debug')('node:topic-desc');\n\nexport function TopicDesc(props) {\n  const { controller, model, topicKey } = props;\n  const isEditing = model.editingDescKey === topicKey;\n  log('isEditing', isEditing);\n  const onClick = e => {\n    e.stopPropagation();\n    controller.run('operation', {\n      ...props,\n      opType: OpType.START_EDITING_DESC\n    });\n  };\n  return (\n    <TopicBlockIcon\n      onClick={onClick}\n      className={iconClassName(IconName.NOTES)}\n      tabIndex={-1}\n    />\n  );\n}\n","import debug from 'debug';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport {\n  contentRefKey,\n  dropAreaRefKey,\n  getRelativeRect,\n  RefKey\n} from '../../utils';\nimport { BaseProps, BaseWidget } from '../common';\nconst log = debug('node:topic-drop-effect');\n\nconst DropEffectSvg = styled.svg`\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n`;\n\ninterface State {\n  content: any;\n}\n\nexport class TopicDropEffect extends BaseWidget<BaseProps, State> {\n  state = {\n    content: null\n  };\n\n  layout() {\n    const props = this.props;\n    const { getRef, model, zoomFactor, diagramState } = props;\n    const dragDrop = diagramState.dragDrop;\n    if (dragDrop == null) {\n      this.setState({\n        content: null\n      });\n      return;\n    }\n    const { targetKey, targetDir } = dragDrop;\n    log('layout', targetDir);\n\n    if (targetKey == null) {\n      this.setState({\n        content: null\n      });\n      return;\n    }\n    let refKey;\n    if (targetDir === 'in') {\n      refKey = contentRefKey(targetKey);\n    } else {\n      refKey = dropAreaRefKey(targetKey, targetDir);\n    }\n    const content = getRef(refKey);\n    const svg = getRef(RefKey.SVG_DROP_EFFECT_KEY + model.id);\n    const bigView = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY + model.id).bigView;\n    const contentRect = getRelativeRect(content, bigView, zoomFactor);\n    const svgRect = getRelativeRect(svg, bigView, zoomFactor);\n    const padding = 3;\n    const x = contentRect.left - svgRect.left - padding;\n    const y = contentRect.top - svgRect.top - padding;\n    const width = contentRect.width + 2 * padding;\n    const height = contentRect.height + 2 * padding;\n\n    this.setState({\n      content: (\n        <g>\n          <rect\n            x={x}\n            y={y}\n            width={width}\n            height={height}\n            fill=\"none\"\n            stroke={model.config.theme.highlightColor}\n            strokeDasharray=\"5,5\"\n            strokeWidth={2}\n          />\n        </g>\n      )\n    });\n  }\n\n  render() {\n    const { saveRef, model } = this.props;\n    return (\n      <DropEffectSvg ref={saveRef(RefKey.SVG_DROP_EFFECT_KEY + model.id)}>\n        {this.state.content}\n      </DropEffectSvg>\n    );\n  }\n}\n","import { FocusMode } from '@blink-mind/core';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { contentRefKey, getRelativeRect, RefKey } from '../../utils';\nimport { BaseProps, BaseWidget } from '../common';\n\nconst FocusHighlightSvg = styled.svg`\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n`;\n\ninterface State {\n  content: any;\n}\n\nexport class TopicHighlight extends BaseWidget<BaseProps, State> {\n  state = {\n    content: null\n  };\n\n  layout() {\n    const { getRef, model, zoomFactor } = this.props;\n    const focusKey = model.focusKey;\n    const focusMode = model.focusMode;\n    if (!focusKey || focusMode === FocusMode.EDITING_CONTENT) {\n      this.setState({\n        content: null\n      });\n      return;\n    }\n    const content = getRef(contentRefKey(focusKey));\n    const bigView = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY + model.id).bigView;\n    const svg = getRef(RefKey.SVG_HIGHLIGHT_KEY + model.id);\n    const contentRect = getRelativeRect(content, bigView, zoomFactor);\n    const svgRect = getRelativeRect(svg, bigView, zoomFactor);\n    const padding = 3;\n    const x = contentRect.left - svgRect.left - padding;\n    const y = contentRect.top - svgRect.top - padding;\n    const width = contentRect.width + 2 * padding;\n    const height = contentRect.height + 2 * padding;\n    this.setState({\n      content: (\n        <rect\n          x={x}\n          y={y}\n          width={width}\n          height={height}\n          fill=\"none\"\n          stroke={model.config.theme.highlightColor}\n          strokeWidth={2}\n        />\n      )\n    });\n  }\n\n  render() {\n    const { saveRef, model } = this.props;\n    return (\n      <FocusHighlightSvg ref={saveRef(RefKey.SVG_HIGHLIGHT_KEY + model.id)}>\n        {this.state.content}\n      </FocusHighlightSvg>\n    );\n  }\n}\n","import { FocusMode, OpType, TopicDirection } from '@blink-mind/core';\nimport { ContextMenuTarget } from '@blueprintjs/core';\nimport debug from 'debug';\nimport * as React from 'react';\nimport { useRef } from 'react';\nimport styled from 'styled-components';\nimport {\n  collapseRefKey,\n  contentRefKey,\n  PropKey,\n  setColorAlphaPercent,\n  topicNodeRefKey\n} from '../../utils';\nimport { BaseProps, BaseWidget } from '../common';\n\nconst log = debug('node:topic-node-widget');\n\nconst TopicNodeRow = styled.div`\n  display: flex;\n  align-items: center;\n  //overflow: hidden;\n  position: relative;\n`;\n\nconst TopicNodeRoot = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  position: relative;\n`;\n\nconst Column = styled.div`\n  position: relative;\n`;\n\nconst NodeRows = styled.div`\n  display: flex;\n  flex-direction: column;\n  outline-offset: 2px;\n  outline: ${props =>\n    props.isFocus && `solid 2px ${props.theme.highlightColor}`};\n  &:hover {\n    outline: ${props => !props.isFocus && `solid 2px  ${props.outlineColor}`};\n  }\n`;\n\ninterface Props extends BaseProps {\n  draggable: boolean;\n}\n\ninterface State {\n  dragEnter: boolean;\n}\n\n@ContextMenuTarget\nexport class TopicNodeWidget extends BaseWidget<Props, State> {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dragEnter: false\n    };\n  }\n\n  onMouseDown = ev => {\n    ev.stopPropagation();\n  };\n\n  onDragStart = ev => {\n    log('onDragStart');\n    this.run('handleTopicDragStart', { ...this.props, ev });\n  };\n\n  onDragOver = ev => {\n    // log('onDragOver');\n    ev.preventDefault();\n  };\n\n  onDragEnter = ev => {\n    log('onDragEnter', this.props.topicKey);\n    this.run('handleTopicDragEnter', { ...this.props, ev, dropDir: 'in' });\n  };\n\n  onDragLeave = ev => {\n    this.run('handleTopicDragLeave', { ...this.props, ev, dropDir: 'in' });\n  };\n\n  onDrop = ev => {\n    log('onDrop');\n    this.run('handleTopicDrop', { ...this.props, ev, dropDir: 'in' });\n  };\n\n  onPaste = ev => {\n    log('onPaste');\n    this.run('handleTopicPaste', { ...this.props, ev });\n  };\n\n  public renderContextMenu() {\n    const { controller } = this.props;\n    if (\n      !controller.getValue(PropKey.TOPIC_CONTEXT_MENU_ENABLED, {\n        ...this.props\n      })\n    ) {\n      return;\n    }\n    this.operation(OpType.FOCUS_TOPIC, {\n      ...this.props,\n      focusMode: FocusMode.SHOW_POPUP\n    });\n    return controller.run('renderTopicContextMenu', this.props);\n  }\n\n  public onContextMenuClose() {\n    // Optional method called once the context menu is closed.\n  }\n\n  handleTopicClickTimeout;\n\n  onClick = ev => {\n    const props = this.props;\n    const { controller } = props;\n    //TODO bug [Violation] 'setTimeout' handler took 69ms\n    this.handleTopicClickTimeout = setTimeout(() => {\n      // log('handleTopicClick');\n      //注意这里要传递this.props, 而不是props, 因为会先调用onClick, 再调用其他的topic-content-editor的onClickOutside\n      //其他组件的onClickOutside是个同步的函数,会设置新的model, 如果这里用props传参,会导致model 还是老的model\n      controller.run('handleTopicClick', { ...this.props, ev });\n    }, 50);\n  };\n\n  onDoubleClick = ev => {\n    clearTimeout(this.handleTopicClickTimeout);\n    const { controller } = this.props;\n    controller.run('handleTopicDoubleClick', { ...this.props, ev });\n  };\n\n  needRelocation: boolean = false;\n  oldCollapseIconVector;\n\n  componentDidUpdate() {\n    if (this.needRelocation) {\n      const { getRef, topicKey, setViewBoxScrollDelta } = this.props;\n      const newIcon = getRef(collapseRefKey(topicKey));\n      const newRect = newIcon.getBoundingClientRect();\n      // const newVector = controller.run('getRelativeVectorFromViewPort', {\n      //   ...this.props,\n      //   element: getRef(collapseRefKey(topicKey))\n      // });\n      const newVector = [\n        newRect.left + newRect.width / 2,\n        newRect.top + newRect.height / 2\n      ];\n      log('newVector:', newVector);\n      log('oldVector:', this.oldCollapseIconVector);\n      //TODO bug\n      const vector = [\n        newVector[0] - this.oldCollapseIconVector[0],\n        newVector[1] - this.oldCollapseIconVector[1]\n      ];\n      log('vector', vector);\n      setViewBoxScrollDelta(vector[0], vector[1]);\n      this.needRelocation = false;\n    }\n  }\n\n  shouldComponentUpdate(\n    nextProps: Readonly<Props>,\n    nextState: Readonly<State>,\n    nextContext: any\n  ): boolean {\n    const { controller } = this.props;\n    return !controller.run('componentAreEqual', {\n      ...this.props,\n      prevProps: this.props,\n      nextProps\n    });\n  }\n\n  onClickCollapse = e => {\n    e.stopPropagation();\n    const { topicKey, getRef } = this.props;\n    this.needRelocation = true;\n    const collapseIcon = getRef(collapseRefKey(topicKey));\n    const rect = collapseIcon.getBoundingClientRect();\n    log('oldRect', rect);\n    this.oldCollapseIconVector = [\n      rect.left + rect.width / 2,\n      rect.top + rect.height / 2\n    ];\n    log('oldCollapseIconVector', this.oldCollapseIconVector);\n    // this.oldCollapseIconVector = controller.run('getRelativeVectorFromViewPort', {\n    //   ...this.props,\n    //   element: collapseIcon\n    // });\n    this.operation(OpType.TOGGLE_COLLAPSE, this.props);\n  };\n\n  render() {\n    const props = this.props;\n    const {\n      saveRef,\n      getRef,\n      topicKey,\n      model,\n      controller,\n      topicStyle,\n      dir\n    } = props;\n    log('render', topicKey, model.focusMode, getRef(topicNodeRefKey(topicKey)));\n    const draggable =\n      controller.run('isOperationEnabled', props) &&\n      model.editingContentKey !== topicKey;\n    const collapseIcon = controller.run('renderTopicCollapseIcon', {\n      ...props,\n      onClickCollapse: this.onClickCollapse.bind(this)\n    });\n    const prevDropArea = controller.run('renderTopicDropArea', {\n      ...props,\n      dropDir: 'prev'\n    });\n    const nextDropArea = controller.run('renderTopicDropArea', {\n      ...props,\n      dropDir: 'next'\n    });\n    const outlineColor = setColorAlphaPercent(\n      model.config.theme.highlightColor,\n      0.6\n    );\n    const nodeProps = {\n      isFocus: topicKey === model.focusKey,\n      outlineColor,\n      style: topicStyle,\n      draggable,\n      ref: saveRef(contentRefKey(topicKey)),\n      onDragStart: this.onDragStart,\n      onClick: this.onClick,\n      onDoubleClick: this.onDoubleClick,\n      onMouseDown: this.onMouseDown,\n      onDragEnter: this.onDragEnter,\n      onDragLeave: this.onDragLeave,\n      onDragOver: this.onDragOver,\n      onDrop: this.onDrop,\n      onPaste: this.onPaste\n    };\n    // log(topicKey, 'style', topicStyle);\n    return (\n      <TopicNodeRoot ref={saveRef(topicNodeRefKey(topicKey))}>\n        {prevDropArea}\n        <Column>\n          <NodeRows {...nodeProps}>\n            {controller.run('renderTopicNodeRows', props)}\n          </NodeRows>\n          {dir !== TopicDirection.MAIN && collapseIcon}\n        </Column>\n        {nextDropArea}\n      </TopicNodeRoot>\n    );\n  }\n}\n\nexport function TopicNodeLastRow(props) {\n  const { controller } = props;\n  const ref = useRef<HTMLElement>();\n  const addRowClickHandler = handler => {\n    const rowDiv = ref.current;\n    rowDiv.addEventListener('click', handler);\n    return () => {\n      rowDiv.removeEventListener('click', handler);\n    };\n  };\n  const nProps = {\n    ...props,\n    addRowClickHandler\n  };\n  return (\n    <TopicNodeRow ref={ref}>\n      {controller.run('renderTopicBlocks', nProps)}\n      {controller.run('renderTopicNodeLastRowOthers', nProps)}\n    </TopicNodeRow>\n  );\n}\n","import cx from 'classnames';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { BaseProps, BaseWidget } from '../common';\n\nexport type TopicContextMenuItemConfig = {\n  type: string;\n  icon?: string;\n  label?: string;\n  opType?: string;\n  rootCanUse?: boolean;\n  hotKey?: string;\n};\n\nexport const TopicPopupMenuItemType = {\n  ITEM: 'ITEM',\n  SEP_LINE: 'SEP_LINE'\n};\n\ninterface Props extends BaseProps {\n  config: TopicContextMenuItemConfig;\n}\n\nconst MenuItem = styled.li`\n  list-style: none;\n  padding: 3px 12px;\n  font-size: 14px;\n  line-height: 18px;\n  cursor: pointer;\n  &:hover {\n    background: darkgray;\n  }\n`;\n\nconst MenuItemLabel = styled.span`\n  margin-left: 8px;\n`;\n\nexport class TopicPopupMenuItem extends BaseWidget<Props> {\n  onClick = e => {\n    e.stopPropagation();\n    const { config } = this.props;\n    config.opType && this.operation(config.opType, this.props);\n  };\n  render() {\n    const { config } = this.props;\n    return (\n      <MenuItem onClick={this.onClick}>\n        <span className={cx('icon', 'iconfont', `bm-${config.icon}`)} />\n        <MenuItemLabel className=\"label\">{config.label}</MenuItemLabel>\n      </MenuItem>\n    );\n  }\n}\n","import { LinkStyle, TopicDirection } from '@blink-mind/core';\nimport React from 'react';\nimport styled from 'styled-components';\nimport {\n  centerPointX,\n  centerPointY,\n  centerY,\n  collapseRefKey,\n  contentRefKey,\n  getRelativeRect,\n  linksSvgRefKey,\n  Point,\n  RefKey\n} from '../../utils';\nimport { BaseProps, BaseWidget } from '../common';\n\nconst TopicLinksSvg = styled.svg`\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n`;\nimport debug from 'debug';\nconst log = debug('node:topic-sub-links');\n\ninterface Props extends BaseProps {}\n\ninterface State {\n  curves: any[];\n}\n\nexport class TopicSubLinks extends BaseWidget<Props, State> {\n  state = {\n    curves: []\n  };\n  layout() {\n    const props = this.props;\n    const { model, topic, getRef, topicKey, dir, controller } = props;\n    const z = controller.run('getZoomFactor', props);\n    const content = getRef(contentRefKey(topicKey));\n    const svg = getRef(linksSvgRefKey(topicKey));\n    const collapseIcon = getRef(collapseRefKey(topicKey));\n    const bigView = getRef(RefKey.DRAG_SCROLL_WIDGET_KEY + model.id).bigView;\n    const svgRect = getRelativeRect(svg, bigView, z);\n    const collapseRect = getRelativeRect(collapseIcon, bigView, z);\n    const contentRect = getRelativeRect(content, bigView, z);\n    const mLinkStyle: LinkStyle = controller.run('getLinkStyle', props);\n    log(topicKey);\n    log('svgRect', svgRect);\n    log('collapseRect', collapseRect);\n    log('contentRect', contentRect);\n    let p1: Point, p2: Point, p3: Point, p4: Point;\n\n    // p2 折叠icon 右侧10个像素\n    const marginCollapseIcon = 10;\n    let y =\n      (mLinkStyle.hasUnderline ? contentRect.bottom : centerY(contentRect)) -\n      svgRect.top;\n    if (dir === TopicDirection.RIGHT) {\n      p1 = {\n        x: 0,\n        y\n      };\n      p2 = {\n        x: collapseRect.right - svgRect.left + marginCollapseIcon,\n        y\n      };\n    } else if (dir === TopicDirection.LEFT) {\n      p1 = {\n        x: svgRect.right - svgRect.left,\n        y\n      };\n      p2 = {\n        x: collapseRect.left - svgRect.left - marginCollapseIcon,\n        y\n      };\n    }\n    const curves = [];\n\n    topic.subKeys.forEach(key => {\n      let curve;\n      const linkStyle: LinkStyle = controller.run('getLinkStyle', {\n        ...props,\n        topicKey: key\n      });\n      // log(key);\n      const subContent = getRef(contentRefKey(key));\n      if (!subContent) return;\n      const rect = getRelativeRect(subContent, bigView, z);\n\n      y = (linkStyle.hasUnderline ? rect.bottom : centerY(rect)) - svgRect.top;\n      const x =\n        (dir === TopicDirection.RIGHT ? rect.left : rect.right) - svgRect.left;\n      p3 = { x, y };\n\n      p4 = linkStyle.hasUnderline\n        ? {\n            x:\n              (dir === TopicDirection.RIGHT ? rect.right : rect.left) -\n              svgRect.left +\n              (dir === TopicDirection.RIGHT ? 1 : -1),\n            y: p3.y\n          }\n        : p3;\n\n      const { lineType } = linkStyle;\n\n      if (lineType === 'curve') {\n        curve = `M ${p1.x} ${p1.y} L ${p2.x} ${p2.y} C ${p2.x} ${centerPointY(\n          p2,\n          p3\n        )} ${centerPointX(p2, p3)} ${p3.y} ${p3.x} ${p3.y}`;\n      } else if (lineType === 'round') {\n        const vDir = p3.y > p1.y ? 1 : -1;\n        const hDir = p3.x > p1.x ? 1 : -1;\n        const radius = linkStyle.lineRadius;\n        // if (p3.y === p1.y) { //这样判断不可靠\n        if (\n          (!linkStyle.hasUnderline && topic.subKeys.size === 1) ||\n          Math.abs(p3.y - p1.y) <= 1\n        ) {\n          curve = `M ${p1.x} ${p1.y} L ${p3.x} ${p3.y}`;\n        } else {\n          // 0 表示逆时针 1 表示顺时针\n          curve = `M ${p1.x} ${p1.y} H ${p2.x} V ${p3.y -\n            vDir * radius} A ${radius} ${radius} 0 0 ${\n            vDir * hDir === 1 ? 0 : 1\n          } ${p2.x + radius * hDir} ${p3.y} H ${p3.x}`;\n        }\n      } else if (lineType === 'line') {\n        curve = `M ${p1.x} ${p1.y} H ${p2.x} L ${p3.x} ${p3.y}`;\n      }\n\n      curve = `${curve} L ${p4.x} ${p4.y}`;\n\n      curves.push(\n        <path\n          key={`link-${key}`}\n          d={curve}\n          strokeWidth={linkStyle.lineWidth}\n          stroke={linkStyle.lineColor}\n          fill=\"none\"\n        />\n      );\n    });\n    this.setState({\n      curves\n    });\n  }\n\n  render() {\n    const { topicKey, saveRef } = this.props;\n    return (\n      <TopicLinksSvg ref={saveRef(linksSvgRefKey(topicKey))}>\n        <g>{this.state.curves}</g>\n      </TopicLinksSvg>\n    );\n  }\n}\n","import { TopicDirection } from '@blink-mind/core';\nimport debug from 'debug';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { linksRefKey, topicWidgetRootRefKey } from '../../utils';\nimport { BaseProps } from '../common';\nimport { TopicSubLinks } from './topic-sub-links';\n\nconst log = debug('node:topic-widget');\n\ntype TopicWidgetRootProps = {\n  topicDirection: string;\n};\n\nconst TopicWidgetRoot = styled.div<TopicWidgetRootProps>`\n  display: flex;\n  align-items: stretch;\n  flex-direction: ${props =>\n    props.topicDirection === TopicDirection.RIGHT ? 'row' : 'row-reverse'};\n`;\n\ninterface NodeChildrenProps {\n  dir: string;\n  marginH: number;\n}\n\n// TODO\nconst NodeChildren = styled.div<NodeChildrenProps>`\n  position: relative;\n  padding: ${props =>\n    props.dir === TopicDirection.RIGHT\n      ? `0 0 0 ${props.marginH}px`\n      : `0 ${props.marginH}px 0 0`};\n`;\n\nconst SubNodes = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n`;\n\ninterface Props extends BaseProps {\n  setViewBoxScroll?: (left: number, top: number) => void;\n  setViewBoxScrollDelta?: (left: number, top: number) => void;\n}\n\nexport class TopicWidget extends React.Component<Props> {\n  renderSubTopics(props) {\n    const { controller, model, topicKey, dir } = props;\n    const topics = model.getTopic(topicKey).subKeys.toArray();\n    const res = controller.run('createSubTopics', { ...props, topics });\n    if (!res) return null;\n    const { subTopics } = res;\n    const subLinks = controller.run('renderSubLinks', props);\n    return (\n      <NodeChildren dir={dir} marginH={model.config.theme.marginH}>\n        <SubNodes>{subTopics}</SubNodes>\n        {subLinks}\n      </NodeChildren>\n    );\n  }\n\n  // componentDidUpdate(): void {\n  //   this.layoutLinks();\n  // }\n  //\n  // componentDidMount(): void {\n  //   this.layoutLinks();\n  // }\n\n  layoutLinks() {\n    const { getRef, topicKey, model } = this.props;\n    const topic = model.getTopic(topicKey);\n    if (topic.subKeys.size === 0 || topic.collapse) return;\n    log('layoutLinks', topicKey);\n    const links: TopicSubLinks = getRef(linksRefKey(topicKey));\n    links && links.layout();\n  }\n\n  render() {\n    const props = this.props;\n    const { controller, topic, topicKey, dir, saveRef } = props;\n    log('render', topicKey);\n    const topicStyle = controller.run('getTopicContentStyle', props);\n    const linkStyle = controller.run('getLinkStyle', props);\n    const propsMore = {\n      ...props,\n      topic,\n      topicStyle,\n      linkStyle\n    };\n    const topicNode = controller.run('renderTopicNode', propsMore);\n\n    return (\n      <TopicWidgetRoot\n        topicDirection={dir}\n        ref={saveRef(topicWidgetRootRefKey(topicKey))}\n      >\n        {topicNode}\n        {this.renderSubTopics(propsMore)}\n      </TopicWidgetRoot>\n    );\n  }\n}\n","import { BlockType, OpType, ViewModeMindMap } from '@blink-mind/core';\nimport { MenuItem } from '@blueprintjs/core';\nimport * as React from 'react';\nimport {\n  KeyboardHotKeyWidget,\n  TopicContextMenu\n} from '../../components/widgets';\nimport { getI18nText, I18nKey, Icon } from '../../utils';\n\nexport type TopicContextMenuItemConfig = {\n  enabledFunc?: ({ model, topic }) => boolean;\n  icon?: string;\n  label?: string;\n  shortcut?: Array<string>;\n  opType?: string;\n  opArg?: any;\n  rootCanUse?: boolean;\n  hotKey?: string;\n  viewMode?: Array<string>;\n};\n\nconst items: TopicContextMenuItemConfig[] = [\n  {\n    icon: 'edit',\n    label: I18nKey.EDIT,\n    shortcut: ['Space'],\n    rootCanUse: true,\n    opType: OpType.START_EDITING_CONTENT,\n    viewMode: [ViewModeMindMap]\n  },\n  {\n    icon: 'add-sibling',\n    label: I18nKey.ADD_SIBLING,\n    shortcut: ['Enter'],\n    opType: OpType.ADD_SIBLING,\n    viewMode: [ViewModeMindMap]\n  },\n  {\n    icon: 'add-child',\n    label: I18nKey.ADD_CHILD,\n    shortcut: ['Tab'],\n    rootCanUse: true,\n    opType: OpType.ADD_CHILD,\n    viewMode: [ViewModeMindMap]\n  },\n  {\n    icon: 'move-up',\n    label: I18nKey.MOVE_UP,\n    shortcut: ['Mod', 'Up'],\n    rootCanUse: false,\n    opType: OpType.SWAP_UP\n  },\n  {\n    icon: 'move-down',\n    label: I18nKey.MOVE_DOWN,\n    shortcut: ['Mod', 'Down'],\n    rootCanUse: false,\n    opType: OpType.SWAP_DOWN\n  },\n  {\n    icon: 'notes',\n    label: I18nKey.EDIT_NOTES,\n    shortcut: ['Alt', 'D'],\n    rootCanUse: true,\n    opType: OpType.START_EDITING_DESC\n  },\n  {\n    icon: 'trash',\n    enabledFunc: ({ topic }) => {\n      return topic.getBlock(BlockType.DESC).block != null;\n    },\n    label: I18nKey.REMOVE_NOTES,\n    shortcut: ['Alt', 'Shift', 'D'],\n    rootCanUse: true,\n    opType: OpType.DELETE_TOPIC_BLOCK,\n    opArg: {\n      blockType: BlockType.DESC\n    }\n  },\n  {\n    icon: 'delete-node',\n    label: I18nKey.DELETE,\n    shortcut: ['Del'],\n    opType: OpType.DELETE_TOPIC\n  },\n  {\n    icon: 'root',\n    label: I18nKey.SET_AS_EDITOR_ROOT,\n    shortcut: ['Alt', 'F'],\n    opType: OpType.SET_EDITOR_ROOT\n  },\n  {\n    icon: 'convert',\n    label: I18nKey.CONVERT_TO_PLAIN_TEXT,\n    opType: OpType.TOPIC_CONTENT_TO_PLAIN_TEXT\n  }\n];\n\nexport function ContextMenuPlugin() {\n  return {\n    renderTopicContextMenu(props) {\n      return <TopicContextMenu {...props} />;\n    },\n    customizeTopicContextMenu(ctx) {\n      const { topicKey, model, controller, topic } = ctx;\n      const viewMode = model.config.viewMode;\n      const isRoot = topicKey === model.editorRootTopicKey;\n      function onClickItem(item) {\n        return function(e) {\n          item.opType &&\n            controller.run('operation', {\n              ...ctx,\n              opType: item.opType,\n              ...item.opArg\n            });\n        };\n      }\n      return items.map(item => {\n        if (item.enabledFunc && !item.enabledFunc({ topic, model }))\n          return null;\n        if (isRoot && !item.rootCanUse) return null;\n        if (item.viewMode && !item.viewMode.includes(viewMode)) return null;\n        return (\n          <MenuItem\n            key={item.label}\n            icon={Icon(item.icon)}\n            text={getI18nText(ctx, item.label)}\n            labelElement={<KeyboardHotKeyWidget hotkeys={item.shortcut} />}\n            onClick={onClickItem(item)}\n          />\n        );\n      });\n    }\n  };\n}\n","import React from 'react';\nimport { DialogWidget } from '../../components/widgets';\n\nexport function DialogPlugin() {\n  return {\n    renderDialog(ctx) {\n      const { controller } = ctx;\n      const dialog = controller.run('customizeDialog', ctx);\n      if (dialog == null) return null;\n      const { dialogContent, dialogProps } = dialog;\n      const props = {\n        ...ctx,\n        dialogContent,\n        dialogProps\n      };\n      return <DialogWidget key=\"dialog\" {...props} />;\n    },\n\n    customizeDialog(ctx) {\n      return null;\n    }\n  };\n}\n","import {\n  FocusMode,\n  getRelationship,\n  OpType,\n  TopicRelationship\n} from '@blink-mind/core';\nimport debug from 'debug';\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport { TopicDropEffect } from '../../components/widgets';\nimport { contentRefKey, dropAreaRefKey, RefKey } from '../../utils';\nconst log = debug('plugin:drag-and-drop');\nconst DropArea = styled.div`\n  height: ${props => `${props.height}px`};\n  width: 100%;\n  margin: 1px 0;\n  padding: 2px 0;\n`;\n\nexport function DragAndDropPlugin() {\n  // let dragTargetKey: KeyType = null;\n  // let dragTargetDir: string = null;\n\n  return {\n    renderTopicDropArea(props) {\n      const { topicKey, dropDir, saveRef, controller } = props;\n      const onDragEnter = ev => {\n        log('onDragEnter', topicKey, dropDir);\n        controller.run('handleTopicDragEnter', { ...props, ev, dropDir });\n      };\n      const onDragLeave = ev => {\n        log('onDragLeave', topicKey, dropDir);\n        controller.run('handleTopicDragLeave', { ...props, ev, dropDir });\n      };\n      const onDragOver = ev => {\n        ev.preventDefault();\n      };\n      const onDrop = ev => {\n        log('onDrop', topicKey, dropDir);\n        controller.run('handleTopicDrop', { ...props, ev, dropDir });\n      };\n      const eventHandlers = {\n        onDragEnter,\n        onDragLeave,\n        onDragOver,\n        onDrop\n      };\n      return (\n        <DropArea\n          // height={model.config.theme.marginV / 2}\n          height={8}\n          ref={saveRef(dropAreaRefKey(topicKey, dropDir))}\n          {...eventHandlers}\n        />\n      );\n    },\n\n    renderDragAndDropEffect(props) {\n      log('renderDragAndDropEffect');\n      const { saveRef, model } = props;\n      return (\n        <TopicDropEffect\n          ref={saveRef(RefKey.DROP_EFFECT_KEY + model.id)}\n          {...props}\n        />\n      );\n    },\n\n    handleTopicDragStart(props) {\n      log('handleTopicDragStart');\n      const { controller, ev } = props;\n      ev.stopPropagation();\n      controller.run('operation', {\n        ...props,\n        opType: OpType.FOCUS_TOPIC,\n        focusMode: FocusMode.DRAGGING\n      });\n    },\n\n    canDrop(props) {\n      const { controller, srcKey, dstKey, dropDir } = props;\n      const model = controller.model;\n      if (\n        srcKey === model.editorRootTopicKey ||\n        srcKey === dstKey ||\n        getRelationship(model, srcKey, dstKey) === TopicRelationship.ANCESTOR\n      )\n        return false;\n      if (dstKey === model.editorRootTopicKey && dropDir !== 'in') return false;\n\n      const srcTopic = model.getTopic(srcKey);\n      return !(srcTopic.parentKey === dstKey && dropDir === 'in');\n    },\n\n    handleTopicDragEnter(props) {\n      const { dropDir, topicKey, controller, setDiagramState } = props;\n      const model = controller.model;\n      log('handleTopicDragEnter:', topicKey, dropDir);\n      const canDrop = controller.run('canDrop', {\n        ...props,\n        srcKey: model.focusKey,\n        dstKey: topicKey\n      });\n      if (canDrop) {\n        setDiagramState({\n          dragDrop: {\n            targetKey: topicKey,\n            targetDir: dropDir\n          }\n        });\n      }\n    },\n\n    handleTopicDragLeave(props) {\n      const {\n        topicKey,\n        dropDir,\n        getRef,\n        ev,\n        diagramState,\n        setDiagramState\n      } = props;\n      const relatedTarget = ev.nativeEvent.relatedTarget;\n      log('handleTopicDragLeave:', topicKey, dropDir);\n      const content = getRef(contentRefKey(topicKey));\n      if (content == relatedTarget || content.contains(relatedTarget)) {\n        return;\n      }\n      setDiagramState({ dragDrop: null });\n    },\n\n    handleTopicDrop(props) {\n      log('handleTopicDrop');\n      const { controller, topicKey, diagramState, setDiagramState } = props;\n      const model = controller.model;\n      props = { ...props, srcKey: model.focusKey, dstKey: topicKey };\n\n      setDiagramState({ dragDrop: null });\n      if (controller.run('canDrop', props)) {\n        controller.run('operation', {\n          ...props,\n          opType: OpType.DRAG_AND_DROP\n        });\n      }\n    }\n  };\n}\n","import * as React from 'react';\nimport { RootSubLinks, TopicSubLinks } from '../../components/widgets';\nimport { linksRefKey } from '../../utils';\n\nexport function LinkLinePlugin() {\n  return {\n    renderSubLinks(props) {\n      const { saveRef, topicKey, model } = props;\n      const topic = model.getTopic(topicKey);\n      if (topic.subKeys.size === 0 || topic.collapse) return null;\n      return <TopicSubLinks ref={saveRef(linksRefKey(topicKey))} {...props} />;\n    },\n\n    renderRootSubLinks(props) {\n      // log('renderRootSubLinks');\n      const { saveRef, topicKey } = props;\n      // 这里逻辑有问题,会导致layout 错误\n      // const topic = model.getTopic(topicKey);\n      // if (topic.subKeys.size === 0) return null;\n      return <RootSubLinks ref={saveRef(linksRefKey(topicKey))} {...props} />;\n    }\n\n    // renderLinkPath(props) {\n    //   const {linkStyle,contentRect,svgRect,dir,subContentRect} = props;\n    // }\n  };\n}\n","import { isAllSibiling, SheetModel } from '@blink-mind/core';\nimport { createKey, Topic, OpType } from '@blink-mind/core';\nimport { MenuItem } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { KeyboardHotKeyWidget } from '../../components';\nimport { getI18nText, I18nKey, Icon, IconName } from '../../utils';\n\nconst log = require('debug')('plugin:paste');\n\nexport function PastePlugin() {\n  let pasteType;\n\n  const processTopicJson = (topicJson, parentKey) => {\n    const res = [];\n    topicJson.parentKey = parentKey;\n    topicJson.key = createKey();\n    topicJson.subTopics.forEach(t => {\n      res.push(...processTopicJson(t, topicJson.key));\n    });\n    topicJson.subKeys = topicJson.subTopics.map(s => s.key);\n    res.push(topicJson);\n    return res;\n  };\n\n  return {\n    setPasteType(ctx) {\n      pasteType = ctx.pasteType;\n    },\n    getPasteType(ctx) {\n      return pasteType;\n    },\n\n    // customizeTopicContextMenu(ctx, next) {\n    //   function onClickPastePlainText(e) {\n    //     pasteType = 'PASTE_PLAIN_TEXT';\n    //     document.execCommand('paste');\n    //   }\n    //   function onClickPasteWithStyle(e) {\n    //     pasteType = 'PASTE_WITH_STYLE';\n    //     document.execCommand('paste');\n    //   }\n    //\n    //   const res = next();\n    //   res.push(\n    //     <MenuItem\n    //       key=\"paste-plain-text\"\n    //       icon={Icon(IconName.PASTE_AS_TEXT)}\n    //       text={getI18nText(ctx, I18nKey.PASTE_AS_PLAIN_TEXT)}\n    //       labelElement={<KeyboardHotKeyWidget hotkeys={['Meta', 'V']} />}\n    //       onClick={onClickPastePlainText}\n    //     />,\n    //     <MenuItem\n    //       key=\"paste-with-style\"\n    //       icon={Icon(IconName.PASTE)}\n    //       text={getI18nText(ctx, I18nKey.PASTE_WITH_STYLE)}\n    //       labelElement={\n    //         <KeyboardHotKeyWidget hotkeys={['Meta', 'Shift', 'V']} />\n    //       }\n    //       onClick={onClickPasteWithStyle}\n    //     />\n    //   );\n    //   return res;\n    // },\n\n    selectedKeysToClipboardData(ctx) {\n      const { controller } = ctx;\n      const model: SheetModel = controller.model;\n      if (model.selectedKeys) {\n        // 首先要normalize selectedKeys\n        if (isAllSibiling(model, model.selectedKeys)) {\n          const topics = model.selectedKeys.map(topicKey => {\n            return controller.run('topicToJson', {\n              ...ctx,\n              model,\n              topicKey\n            });\n          });\n          const obj = { topics };\n          const json = JSON.stringify(obj, null, 2);\n          log('selectedKeysToClipboardData', json);\n          return json;\n        }\n      }\n      return null;\n    },\n\n    topicToJson(ctx) {\n      const { controller, model, topicKey } = ctx;\n      const topic = model.getTopic(topicKey);\n      const blocks = controller.run('serializeBlocks', { ...ctx, topic });\n      const extData = controller.run('topicExtDataToJson', ctx);\n      const { collapse } = topic;\n      return {\n        collapse,\n        blocks,\n        extData,\n        subTopics: topic.subKeys\n          .toArray()\n          .map(subKey =>\n            controller.run('topicToJson', { ...ctx, topicKey: subKey })\n          )\n      };\n    },\n\n    pasteFromJson(ctx) {\n      const { controller, json, docModel, topicKey } = ctx;\n      let extData = docModel.extData;\n      const res = [];\n      if (json) {\n        // 这一步生成随机的key, 并且将树状结构变成平铺结构\n        const flattenTopics = [];\n        json.topics.forEach(topic => {\n          flattenTopics.push(...processTopicJson(topic, topicKey));\n        });\n\n        for (const item of flattenTopics) {\n          res.push(\n            controller.run('topicFromJson', {\n              ...ctx,\n              json: item\n            })\n          );\n\n          extData = controller.run('processTopicExtData', {\n            ...ctx,\n            extData,\n            topic: item\n          });\n        }\n        controller.run('operation', {\n          ...ctx,\n          opType: OpType.ADD_MULTI_CHILD_WITH_EXTDATA,\n          topicArray: res,\n          extData\n        });\n      }\n      return null;\n    },\n\n    processTopicExtData(ctx) {\n      let { extData } = ctx;\n      return extData;\n    },\n\n    topicFromJson(ctx) {\n      const { controller, json } = ctx;\n      return controller.run('deserializeTopic', { ...ctx, topic: json });\n    },\n\n    topicExtDataToJson(ctx) {\n      return {};\n    },\n\n    handleCopy(ctx) {\n      const { controller, ev } = ctx;\n      const model: SheetModel = controller.model;\n      if (model.selectedKeys) {\n        ev.preventDefault();\n        // navigator.clipboard.writeText('test clipboard');\n        ev.nativeEvent.clipboardData.setData(\n          'text/bmind',\n          controller.run('selectedKeysToClipboardData', ctx)\n        );\n      }\n    }\n  };\n}\n","import { BlockType, DescBlockData, FocusMode, OpType } from '@blink-mind/core';\nimport { Drawer } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { useRef } from 'react';\nimport styled from 'styled-components';\nimport { ITopicDescEditor } from '../../types';\nimport { getI18nText, I18nKey, Icon, stopPropagation } from '../../utils';\nconst DescEditorWrapper = styled.div`\n  overflow: auto;\n  padding: 10px;\n  display: flex;\n  flex-direction: column;\n  flex: auto;\n  background-color: white;\n`;\n\nexport function renderDrawer(props) {\n  const { controller, model, topicKey } = props;\n  const descEditorRef = useRef<ITopicDescEditor>();\n  if (model.focusMode === FocusMode.EDITING_DESC) {\n    const onDescEditorClose = e => {\n      e.stopPropagation();\n      const descData = model.getTopic(topicKey).getBlock(BlockType.DESC).block\n        .data;\n      controller.run('operation', {\n        ...props,\n        opType: OpType.SET_TOPIC_BLOCK,\n        topicKey,\n        blockType: BlockType.DESC,\n        data: descData.set('data', descEditorRef.current.getContent()),\n        focusMode: FocusMode.NORMAL\n      });\n    };\n\n    const descEditor = controller.run('renderTopicDescEditor', {\n      ...props,\n      ref: descEditorRef\n    });\n    return (\n      <Drawer\n        key=\"drawer\"\n        title={getI18nText(props, I18nKey.EDIT_NOTES)}\n        icon={Icon('note')}\n        isOpen\n        hasBackdrop\n        backdropProps={{ onMouseDown: stopPropagation }}\n        isCloseButtonShown={false}\n        onClose={onDescEditorClose}\n        size=\"70%\"\n      >\n        {descEditor}\n      </Drawer>\n    );\n  }\n}\n","import { BlockType, ViewModeMindMap } from '@blink-mind/core';\nimport debug from 'debug';\nimport React from 'react';\nimport { SaveRef } from '../../components/common';\nimport {\n  DiagramRoot,\n  EditorRootBreadcrumbs,\n  MindMapSheet,\n  RootWidget,\n  TopicBlockContent,\n  TopicCollapseIcon,\n  TopicDesc,\n  TopicNodeLastRow,\n  TopicNodeWidget,\n  TopicWidget,\n  ViewPortViewer\n} from '../../components/widgets';\nimport { PropKey } from '../../utils';\nimport { renderDrawer } from './drawer';\nconst log = debug('plugin:rendering');\n\nexport function RenderingPlugin() {\n  let diagramProps;\n  return {\n    getDiagramProps() {\n      return diagramProps;\n    },\n    renderDiagram(props) {\n      const { docModel } = props;\n      return (\n        <SaveRef>\n          {(saveRef, getRef, deleteRef) => {\n            diagramProps = {\n              ...props,\n              saveRef,\n              getRef,\n              deleteRef\n            };\n            log('renderDiagram', docModel);\n            return React.createElement(DiagramRoot, diagramProps);\n          }}\n        </SaveRef>\n      );\n    },\n\n    renderDiagramCustomize(ctx) {\n      return [];\n    },\n\n    renderSheet(props) {\n      const { model } = props;\n      if (model.config.viewMode === ViewModeMindMap)\n        return React.createElement(MindMapSheet, props);\n    },\n\n    renderDrawer,\n\n    getInitialSheetState(props) {\n      return {\n        rightTopPanel: { isOpen: false, selectedTabId: 'topic-style' }\n      };\n    },\n\n    renderSheetCustomize(props) {\n      const { controller, model } = props;\n      const zIndex = controller.getValue(\n        PropKey.DIAGRAM_CUSTOMIZE_BASE_Z_INDEX\n      );\n      const nProps = {\n        ...props,\n        zIndex,\n        topicKey: model.focusKey,\n        topic: model.getTopic(model.focusKey)\n      };\n      const breadcrumbs = controller.run('renderEditorRootBreadcrumbs', nProps);\n      // const styleEditor = controller.run('renderStyleEditor', nProps);\n      const rightTopPanel = controller.run('renderRightTopPanel', nProps);\n      const dialog = controller.run('renderDialog', {\n        ...nProps,\n        zIndex: zIndex + 1\n      });\n      const drawer = controller.run('renderDrawer', {\n        ...nProps,\n        zIndex: zIndex + 1\n      });\n      const viewportViewer = controller.run('renderViewPortViewer', nProps);\n      return [breadcrumbs, rightTopPanel, dialog, drawer, viewportViewer];\n    },\n\n    renderEditorRootBreadcrumbs(props) {\n      return <EditorRootBreadcrumbs key=\"EditorRootBreadcrumbs\" {...props} />;\n    },\n\n    renderDoc({ children }) {\n      return children;\n    },\n\n    renderRootWidget(props) {\n      return <RootWidget {...props} />;\n    },\n\n    renderTopicWidget(props) {\n      return <TopicWidget {...props} />;\n    },\n\n    renderTopicNode(props) {\n      return <TopicNodeWidget {...props} />;\n    },\n\n    renderTopicNodeRows(props) {\n      const { controller } = props;\n      return [controller.run('renderTopicNodeLastRow', props)];\n    },\n\n    renderTopicNodeLastRow(props) {\n      return <TopicNodeLastRow key=\"last-row\" {...props} />;\n    },\n\n    renderTopicCollapseIcon(props) {\n      return <TopicCollapseIcon {...props} />;\n    },\n\n    renderTopicNodeLastRowOthers(props) {\n      return [];\n    },\n\n    renderTopicBlocks(props) {\n      const { topic, controller } = props;\n      const blocks = topic.blocks;\n      const res = [];\n      let i = 0;\n      blocks.forEach(block => {\n        const b = controller.run('renderTopicBlock', {\n          ...props,\n          block,\n          blockKey: `block-${i}`\n        });\n        if (b) {\n          res.push(<React.Fragment key={`block-${i}`}>{b}</React.Fragment>);\n          i++;\n        }\n      });\n      return res;\n    },\n\n    renderTopicBlock(props) {\n      const { controller, block } = props;\n      switch (block.type) {\n        case BlockType.CONTENT:\n          return controller.run('renderTopicBlockContent', props);\n        case BlockType.DESC:\n          return controller.run('renderTopicBlockDesc', props);\n        default:\n          break;\n      }\n      return null;\n    },\n\n    renderTopicBlockContent(props) {\n      return <TopicBlockContent {...props} />;\n    },\n\n    renderTopicBlockDesc(props) {\n      return <TopicDesc {...props} />;\n    },\n\n    renderRootWidgetOtherChildren(props) {\n      const { controller } = props;\n      const zoomFactor = controller.run('getZoomFactor', props);\n      props = { ...props, zoomFactor };\n      return (\n        <>\n          {controller.run('renderRootSubLinks', props)}\n          {controller.run('renderDragAndDropEffect', props)}\n        </>\n      );\n    },\n\n    renderViewPortViewer(props) {\n      return <ViewPortViewer key=\"view-port-viewer\" {...props} />;\n    }\n  };\n}\n","import { Tab } from '@blueprintjs/core';\nimport * as React from 'react';\nimport { BaseProps } from '../../components/common';\nimport {\n  RightTopPanelWidget,\n  StyleEditor,\n  ThemeEditor\n} from '../../components/widgets';\nimport { TextStyleEditor } from '../../components/widgets/style-editor/text-style-editor';\nimport { getI18nText, I18nKey } from '../../utils';\n\nexport function RightTopPanelPlugin() {\n  return {\n    renderRightTopPanel(props: BaseProps) {\n      const nProps: BaseProps = {\n        ...props,\n        key: 'right-top-panel'\n      };\n      return <RightTopPanelWidget {...nProps} />;\n    },\n\n    renderRightTopPanelTabs(props) {\n      const { controller } = props;\n      const styleEditorTab = controller.run('renderTopicStyleEditor', props);\n      const themeEditorTab = controller.run('renderThemeEditor', props);\n\n      return [styleEditorTab, themeEditorTab];\n    },\n\n    renderTopicStyleEditor(ctx) {\n      const tProps = {\n        id: 'topic-style',\n        key: 'topic-style',\n        title: getI18nText(ctx, I18nKey.TOPIC_STYLE),\n        panel: <StyleEditor {...ctx} />\n      };\n      return <Tab {...tProps} />;\n    },\n\n    renderTextStyleEditor(ctx) {\n      return <TextStyleEditor {...ctx} />;\n    },\n\n    renderThemeEditor(props) {\n      const tProps = {\n        id: 'theme-editor',\n        key: 'theme-editor',\n        title: getI18nText(props, I18nKey.THEME),\n        panel: <ThemeEditor {...props} />\n      };\n      return <Tab {...tProps} />;\n    }\n  };\n}\n","import { getI18nText, I18nKey } from '../../utils';\n\nexport function SheetPlugin() {\n  return {\n    getSheetTitle(ctx) {\n      const { docModel, model } = ctx;\n      return (\n        model.title ||\n        `${getI18nText(ctx, I18nKey.SHEET)}${docModel.getSheetIndex(model) + 1}`\n      );\n    }\n  };\n}\n","import debug from 'debug';\nimport * as React from 'react';\nimport {\n  Toolbar,\n  ToolbarItemAddSheet,\n  ToolbarItemLayout,\n  ToolbarItemMore\n} from '../../components/widgets';\nimport { ElementItemConfigs } from '../../types';\nconst log = debug('plugin:toolbar');\n\nexport function ToolbarPlugin() {\n  return {\n    renderToolbar(props) {\n      return <Toolbar {...props} />;\n    },\n\n    renderToolbarItems(props) {\n      const { controller } = props;\n      const itemConfigs: ElementItemConfigs = controller.run(\n        'customizeToolbar',\n        props\n      );\n      //TODO 这里要判断 order不重复\n      itemConfigs.sort((a, b) => a.order - b.order);\n      log(itemConfigs);\n\n      return itemConfigs.map(item =>\n        React.createElement(item.element, {\n          ...props,\n          key: item.order.toString()\n        })\n      );\n    },\n\n    customizeToolbar(props): ElementItemConfigs {\n      return [\n        {\n          order: 0,\n          element: ToolbarItemMore\n        },\n        {\n          order: 100,\n          element: ToolbarItemLayout\n        }\n      ];\n    },\n\n    customizeToolbarItemMore(props): ElementItemConfigs {\n      return [\n        {\n          order: 10,\n          element: ToolbarItemAddSheet\n        }\n      ];\n    }\n  };\n}\n","import debug from 'debug';\nconst log = debug('plugin:utils');\nexport function UtilsPlugin() {\n  const tempValueMap = new Map<string, any>();\n  const eventListenerMap = new Map<string, any>();\n  return {\n    addTempValueChangeListener(props) {\n      const { key, listener } = props;\n      if (!eventListenerMap.has(key)) {\n        eventListenerMap.set(key, []);\n      }\n      eventListenerMap.get(key).push(listener);\n    },\n\n    removeTempValueChangeListener(props) {\n      const { key, listener } = props;\n      if (eventListenerMap.has(key)) {\n        const res = eventListenerMap.get(key).filter(l => l !== listener);\n        eventListenerMap.set(key, res);\n      }\n    },\n\n    getTempValue(props) {\n      const { key } = props;\n      log('getTempValue', key);\n      return tempValueMap.get(key);\n    },\n\n    setTempValue(props) {\n      const { key, value } = props;\n      log('setTempValue', key);\n      tempValueMap.set(key, value);\n      if (eventListenerMap.has(key)) {\n        const listeners = eventListenerMap.get(key);\n        for (const listener of listeners) {\n          listener(value);\n        }\n      }\n    },\n\n    deleteTempValue(props) {\n      const { key } = props;\n      log('deleteTempValue', key);\n      const value = tempValueMap.get(key);\n      tempValueMap.delete(key);\n      return value;\n    }\n  };\n}\n","import { ContextMenuPlugin } from './context-menu';\nimport { DialogPlugin } from './dialog';\nimport { DragAndDropPlugin } from './drag-and-drop';\nimport { LinkLinePlugin } from './link-line';\nimport { PastePlugin } from './paste';\nimport { RenderingPlugin } from './rendering';\nimport { RightTopPanelPlugin } from './right-top-panel-plugin';\nimport { SheetPlugin } from './sheet';\nimport { ToolbarPlugin } from './toolbar';\nimport { UtilsPlugin } from './utils';\n\nexport function ReactPlugin(options = {}) {\n  return [\n    RenderingPlugin(),\n    UtilsPlugin(),\n    PastePlugin(),\n    ContextMenuPlugin(),\n    RightTopPanelPlugin(),\n    ToolbarPlugin(),\n    DragAndDropPlugin(),\n    SheetPlugin(),\n    LinkLinePlugin(),\n    DialogPlugin()\n  ];\n}\n","import {\n  LinkStyle,\n  OpType,\n  ThemeType,\n  TopicStyle,\n  TopicVisualLevel\n} from '@blink-mind/core';\nimport debug from 'debug';\nimport { isEqual } from 'lodash';\n\nconst log = debug('plugin:StylePlugin');\n\nexport function StylePlugin() {\n  const colorMap = new Map();\n  let colorIndex = 0;\n  return {\n    getFontList(props): string[] {\n      return [];\n    },\n\n    getTopicStyle(props): TopicStyle {\n      const { controller } = props;\n      return {\n        contentStyle: controller.run('getTopicContentStyle', props),\n        linkStyle: controller.run('getLinkStyle', props),\n        subLinkStyle: controller.run('getSubLinksStyle', props)\n      };\n    },\n\n    getTopicContentStyle(props): TopicStyle {\n      const { topicKey, model, controller } = props;\n      log('getTopicContentStyle:', topicKey, model);\n      const visualLevel = model.getVisualDepth(topicKey);\n      const theme = model.config.theme;\n      let themeStyle;\n      if (visualLevel === TopicVisualLevel.ROOT) themeStyle = theme.rootTopic;\n      else if (visualLevel === TopicVisualLevel.PRIMARY)\n        themeStyle = theme.primaryTopic;\n      else themeStyle = theme.normalTopic;\n\n      themeStyle = { ...theme.contentStyle, ...themeStyle.contentStyle };\n\n      if (theme.randomColor) {\n        const randomColor = controller.run('getRandomColor', props);\n        themeStyle = {\n          ...themeStyle,\n          background: randomColor,\n          borderColor: randomColor,\n          subLinkStyle: {\n            ...themeStyle.subLinkStyle,\n            lineColor: randomColor\n          }\n        };\n      }\n\n      const topic = model.getTopic(topicKey);\n      if (!topic.style) {\n        return themeStyle;\n      }\n      const customStyle = JSON.parse(topic.style);\n\n      return {\n        ...themeStyle,\n        ...customStyle.contentStyle\n      };\n    },\n\n    getLinkStyle(props): LinkStyle {\n      const { topicKey, model, controller } = props;\n      log('getLinkStyle', topicKey);\n      const visualLevel = model.getVisualDepth(topicKey);\n      const theme: ThemeType = model.config.theme;\n      let linkStyle: LinkStyle = theme.linkStyle;\n      let presetStyle;\n      if (visualLevel === TopicVisualLevel.ROOT)\n        presetStyle = theme.rootTopic.linkStyle;\n      else if (visualLevel === TopicVisualLevel.PRIMARY)\n        presetStyle = theme.primaryTopic.linkStyle;\n      else presetStyle = theme.normalTopic.linkStyle;\n\n      linkStyle = { ...linkStyle, ...presetStyle };\n\n      const topic = model.getTopic(topicKey);\n\n      if (topic.parentKey != null) {\n        const parentSubLinkStyle = controller.run('getSubLinksStyle', {\n          ...props,\n          topicKey: topic.parentKey\n        });\n\n        linkStyle = {\n          ...linkStyle,\n          ...parentSubLinkStyle\n        };\n      }\n\n      if (!topic.style) {\n        return linkStyle;\n      }\n      const customStyle = JSON.parse(topic.style);\n\n      return {\n        ...linkStyle,\n        ...customStyle.linkStyle\n      };\n    },\n\n    getSubLinksStyle(props): LinkStyle {\n      const { topicKey, model, controller } = props;\n      log('getLinkStyle', topicKey);\n      const visualLevel = model.getVisualDepth(topicKey);\n      const theme = model.config.theme;\n      let subLinkStyle = theme.linkStyle;\n      let presetStyle;\n      if (visualLevel === TopicVisualLevel.ROOT)\n        presetStyle = theme.rootTopic.subLinkStyle;\n      else if (visualLevel === TopicVisualLevel.PRIMARY)\n        presetStyle = theme.primaryTopic.subLinkStyle;\n      else presetStyle = theme.normalTopic.subLinkStyle;\n\n      subLinkStyle = { ...subLinkStyle, ...presetStyle };\n\n      const topic = model.getTopic(topicKey);\n      // 获取父节点的color\n      if (theme.randomColor) {\n        const randomColor = controller.run('getRandomColor', props);\n        log(randomColor);\n        subLinkStyle = {\n          ...subLinkStyle,\n          lineColor: randomColor\n        };\n      }\n\n      if (!topic.style) {\n        return subLinkStyle;\n      }\n      const customStyle = JSON.parse(topic.style);\n\n      const res = {\n        ...subLinkStyle,\n        ...customStyle.subLinkStyle\n      };\n      // if (res.lineRadius == null) res.lineRadius = 5;\n      return res;\n    },\n\n    setTopicContentStyle(props) {\n      const { topicKey, controller, style, model } = props;\n      const topic = model.getTopic(topicKey);\n      const topicStyle = topic.style;\n      const styleObj = topicStyle ? JSON.parse(topicStyle) : {};\n      const newStyleObj = {\n        ...styleObj,\n        contentStyle: {\n          ...styleObj.contentStyle,\n          ...style\n        }\n      };\n      if (!isEqual(styleObj, newStyleObj)) {\n        const newStyleStr = JSON.stringify(newStyleObj);\n        controller.run('operation', {\n          ...props,\n          opType: OpType.SET_STYLE,\n          style: newStyleStr\n        });\n      }\n    },\n\n    setLinkStyle(props) {\n      const { topicKey, controller, linkStyle, model } = props;\n      const topic = model.getTopic(topicKey);\n      const style = topic.style;\n      const styleObj = style ? JSON.parse(style) : {};\n      const newStyleObj = {\n        ...styleObj,\n        linkStyle: {\n          ...styleObj.linkStyle,\n          ...linkStyle\n        }\n      };\n      if (!isEqual(styleObj, newStyleObj)) {\n        const newStyleStr = JSON.stringify(newStyleObj);\n        controller.run('operation', {\n          ...props,\n          opType: OpType.SET_STYLE,\n          style: newStyleStr\n        });\n      }\n    },\n\n    setSubLinkStyle(props) {\n      const { topicKey, controller, subLinkStyle, model } = props;\n      const topic = model.getTopic(topicKey);\n      const style = topic.style;\n      const styleObj = style ? JSON.parse(style) : {};\n      const newStyleObj = {\n        ...styleObj,\n        subLinkStyle: {\n          ...styleObj.subLinkStyle,\n          ...subLinkStyle\n        }\n      };\n      if (!isEqual(styleObj, newStyleObj)) {\n        const newStyleStr = JSON.stringify(newStyleObj);\n        controller.run('operation', {\n          ...props,\n          opType: OpType.SET_STYLE,\n          style: newStyleStr\n        });\n      }\n    },\n\n    getTopicThemeStyle(props): TopicStyle {\n      const { topicKey, model } = props;\n      const visualLevel = model.getVisualDepth(topicKey);\n      const theme = model.config.theme;\n      if (visualLevel === TopicVisualLevel.ROOT) return theme.rootTopic;\n      if (visualLevel === TopicVisualLevel.PRIMARY) return theme.primaryTopic;\n      return theme.normalTopic;\n    },\n\n    getRandomColor(props) {\n      const { topicKey } = props;\n      if (colorMap.has(topicKey)) return colorMap.get(topicKey);\n      const colors = [\n        '#00CC99',\n        '#FFEE88',\n        // '#A167A5',\n        '#E5F993',\n        '#F5C396',\n        '#DB995A',\n        '#83BCFF',\n        '#ED7B84',\n        '#739E82',\n        '#D3BCC0',\n        '#FFA0FD',\n        '#EFD3D7',\n        '#C6878F'\n      ];\n      const color = colors[++colorIndex % colors.length];\n      colorMap.set(topicKey, color);\n      log('getRandomColor', topicKey, color);\n      return color;\n    }\n  };\n}\n","import { IControllerRunContext } from '@blink-mind/core';\nimport { Classes } from '@blueprintjs/core';\n\nexport function ThemePlugin() {\n  return {\n    getThemeOfTopic(ctx: IControllerRunContext) {\n      const { model } = ctx;\n      const theme = model.config.theme;\n\n      const { contentStyle, rootTopic, primaryTopic, normalTopic } = theme;\n      return {\n        rootTopic: {\n          ...rootTopic,\n          contentStyle: { ...contentStyle, ...rootTopic.contentStyle }\n        },\n        primaryTopic: {\n          ...primaryTopic,\n          contentStyle: { ...contentStyle, ...primaryTopic.contentStyle }\n        },\n        normalTopic: {\n          ...normalTopic,\n          contentStyle: { ...contentStyle, ...normalTopic.contentStyle }\n        }\n      };\n    },\n\n    setDarkMode(ctx) {\n      const { darkMode } = ctx;\n      if (darkMode) {\n        if (!document.body.classList.contains(Classes.DARK)) {\n          document.body.classList.add(Classes.DARK);\n        }\n      } else {\n        if (document.body.classList.contains(Classes.DARK)) {\n          document.body.classList.remove(Classes.DARK);\n        }\n      }\n    },\n\n    toggleDarkMode(ctx) {\n      document.body.classList.toggle(Classes.DARK);\n    }\n  };\n}\n","\n/**\n * Expose `isUrl`.\n */\n\nmodule.exports = isUrl;\n\n/**\n * RegExps.\n * A URL must match #1 and then at least one of #2/#3.\n * Use two levels of REs to avoid REDOS.\n */\n\nvar protocolAndDomainRE = /^(?:\\w+:)?\\/\\/(\\S+)$/;\n\nvar localhostDomainRE = /^localhost[\\:?\\d]*(?:[^\\:?\\d]\\S*)?$/\nvar nonLocalhostDomainRE = /^[^\\s\\.]+\\.\\S{2,}$/;\n\n/**\n * Loosely validate a URL `string`.\n *\n * @param {String} string\n * @return {Boolean}\n */\n\nfunction isUrl(string){\n  if (typeof string !== 'string') {\n    return false;\n  }\n\n  var match = string.match(protocolAndDomainRE);\n  if (!match) {\n    return false;\n  }\n\n  var everythingAfterProtocol = match[1];\n  if (!everythingAfterProtocol) {\n    return false;\n  }\n\n  if (localhostDomainRE.test(everythingAfterProtocol) ||\n      nonLocalhostDomainRE.test(everythingAfterProtocol)) {\n    return true;\n  }\n\n  return false;\n}\n","import deepEqual from 'fast-deep-equal';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst log = require('debug')('node:content-editable');\n\nfunction normalizeHtml(str: string): string {\n  return str && str.replace(/&nbsp;|\\u202F|\\u00A0/g, ' ');\n}\n\nfunction replaceCaret(el: HTMLElement) {\n  log('replaceCaret', el.innerHTML);\n  // Place the caret at the end of the element\n  const target = document.createTextNode('');\n  el.appendChild(target);\n  // do not move caret if element was not focused\n  // const isTargetFocused = document.activeElement === el;\n  if (target !== null && target.nodeValue !== null) {\n    const sel = window.getSelection();\n    if (sel !== null) {\n      const range = document.createRange();\n      range.setStart(target, target.nodeValue.length);\n      range.collapse(true);\n      sel.removeAllRanges();\n      sel.addRange(range);\n    }\n    if (el instanceof HTMLElement) el.focus();\n  }\n}\n\n/**\n * A simple component for an html element with editable contents.\n */\nexport default class ContentEditable extends React.Component<Props> {\n  lastHtml: string = this.props.html;\n  el: any =\n    typeof this.props.innerRef === 'function'\n      ? { current: null }\n      : React.createRef<HTMLElement>();\n\n  getEl = () =>\n    (this.props.innerRef && typeof this.props.innerRef !== 'function'\n      ? this.props.innerRef\n      : this.el\n    ).current;\n\n  render() {\n    const {\n      tagName,\n      html,\n      innerRef,\n      handleKeyDown,\n      handleOnInput,\n      handleOnPaste,\n      focus,\n      ...props\n    } = this.props;\n\n    return React.createElement(\n      tagName || 'div',\n      {\n        ...props,\n        ref:\n          typeof innerRef === 'function'\n            ? (current: HTMLElement) => {\n                innerRef(current);\n                this.el.current = current;\n              }\n            : innerRef || this.el,\n        onInput: this.onInput,\n        onBlur: this.onBlur,\n        // onKeyUp: this.props.onKeyUp || this.emitChange,\n        onKeyDown: this.onKeyDown,\n        onPaste: handleOnPaste,\n        contentEditable: !this.props.disabled,\n        dangerouslySetInnerHTML: { __html: html }\n      },\n      this.props.children\n    );\n  }\n  emitChange = (originalEvt: React.SyntheticEvent<any>) => {\n    log('emitChange');\n    const el = this.getEl();\n    if (!el) return;\n\n    const html = el.innerHTML;\n    // if (this.props.onChange && html !== this.lastHtml) {\n    // 为了考虑到在一个节点上面快速输入，切换到另一个节点，第一个节点上输入的内容无法撤销这种情况\n    if (this.props.onChange) {\n      // Clone event with Object.assign to avoid\n      // \"Cannot assign to read only property 'target' of object\"\n      const evt = Object.assign({}, originalEvt, {\n        target: {\n          value: html\n        }\n      });\n      this.props.onChange(evt);\n    }\n    this.lastHtml = html;\n  };\n  onInput = e => {\n    log('onInput');\n    if (this.props.handleOnInput && this.props.handleOnInput(e)) return;\n    this.emitChange(e);\n  };\n\n  onBlur = e => {\n    this.emitChange(e);\n  };\n\n  onKeyDown = e => {\n    // log('onKeyDown', e.target.innerHTML);\n    if (this.props.handleKeyDown && this.props.handleKeyDown(e)) {\n      e.preventDefault();\n      return false;\n    }\n\n    // this.emitChange(e);\n  };\n\n  shouldComponentUpdate(nextProps: Props): boolean {\n    const { props } = this;\n    const el = this.getEl();\n\n    // We need not rerender if the change of props simply reflects the user's edits.\n    // Rerendering in this case would make the cursor/caret jump\n\n    // Rerender if there is no element yet... (somehow?)\n    if (!el) return true;\n\n    // ...or if html really changed... (programmatically, not by user edit)\n    if (normalizeHtml(nextProps.html) !== normalizeHtml(el.innerHTML)) {\n      return true;\n    }\n    // Handle additional properties\n    const res =\n      props.focus !== nextProps.focus ||\n      props.disabled !== nextProps.disabled ||\n      props.tagName !== nextProps.tagName ||\n      props.className !== nextProps.className ||\n      props.innerRef !== nextProps.innerRef ||\n      !deepEqual(props.style, nextProps.style);\n    // log('shouldComponentUpdate',res);\n    return res;\n  }\n\n  componentDidMount(): void {\n    const el = this.getEl();\n    if (!el) {\n      return;\n    }\n\n    // Perhaps React (whose VDOM gets outdated because we often prevent\n    // rerendering) did not update the DOM. So we update it manually now.\n    if (this.props.html !== el.innerHTML) {\n      el.innerHTML = this.lastHtml = this.props.html;\n    }\n    this.props.focus && replaceCaret(el);\n  }\n\n  componentDidUpdate() {\n    log('componentDidUpdate');\n    const el = this.getEl();\n    if (!el) {\n      return;\n    }\n\n    // Perhaps React (whose VDOM gets outdated because we often prevent\n    // rerendering) did not update the DOM. So we update it manually now.\n    if (this.props.html !== el.innerHTML) {\n      el.innerHTML = this.lastHtml = this.props.html;\n    }\n    this.props.focus && replaceCaret(el);\n  }\n\n  static propTypes = {\n    html: PropTypes.string.isRequired,\n    onChange: PropTypes.func,\n    disabled: PropTypes.bool,\n    tagName: PropTypes.string,\n    className: PropTypes.string,\n    style: PropTypes.object,\n    innerRef: PropTypes.oneOfType([PropTypes.object, PropTypes.func])\n  };\n}\n\nexport type ContentEditableEvent = React.SyntheticEvent<any, Event> & {\n  target: { value: string };\n};\ntype Modify<T, R> = Pick<T, Exclude<keyof T, keyof R>> & R;\ntype DivProps = Modify<\n  JSX.IntrinsicElements['div'],\n  { onChange: (event: ContentEditableEvent) => void }\n>;\n\nexport interface Props extends DivProps {\n  html: string;\n  disabled?: boolean;\n  focus?: boolean;\n  tagName?: string;\n  className?: string;\n  style?: Object;\n  innerRef?: React.RefObject<HTMLElement> | Function;\n  handleKeyDown?: (e) => boolean;\n  handleOnInput?: (e) => boolean;\n  handleOnPaste?: (e) => void;\n}\n","import { BlockType, DocModel, OpType } from '@blink-mind/core';\nimport cx from 'classnames';\nimport { Stack } from 'immutable';\nimport isUrl from 'is-url';\nimport React, { MutableRefObject, useRef } from 'react';\nimport { BaseProps } from '../../components/common';\nimport ContentEditable from './react-contenteditable';\n\nconst log = require('debug')('node:topic-content-editor');\n\nexport interface Props extends BaseProps {\n  className: string;\n  handleKeyDown: (e) => boolean;\n  handleOnInput?: (e) => boolean;\n  innerEditorDivRef?: MutableRefObject<HTMLElement>;\n}\n\nlet debounce = false;\nlet _isPaste = false;\n\nexport function TopicContentEditor(props: Props) {\n  const {\n    controller,\n    model,\n    topicKey,\n    topic,\n    readOnly,\n    className,\n    handleKeyDown: _handleKeyDown,\n    handleOnInput\n  } = props;\n  const content = topic.getBlock(BlockType.CONTENT).block.data;\n\n  const onChange = evt => {\n    log('inputType', evt.nativeEvent.inputType);\n    const data = evt.target.value;\n    if (evt.type === 'blur') {\n      const { undoStack }: { undoStack: Stack<DocModel> } = controller.run(\n        'getUndoRedoStack',\n        props\n      );\n      const lastUndoDocModel = undoStack.peek();\n      if (lastUndoDocModel && lastUndoDocModel.currentSheetModel) {\n        const lastTopic = lastUndoDocModel.currentSheetModel.getTopic(topicKey);\n        if (lastTopic && lastTopic.contentData !== data) {\n          controller.run('operation', {\n            ...props,\n            opType: OpType.SET_TOPIC_BLOCK,\n            blockType: BlockType.CONTENT,\n            data\n          });\n          return;\n        }\n      }\n    }\n    if (\n      evt.nativeEvent.inputType === 'historyUndo' ||\n      evt.nativeEvent.inputType === 'historyRedo'\n    ) {\n      evt.nativeEvent.preventDefault();\n      return;\n    }\n    if (data !== topic.contentData) {\n      if (debounce && !_isPaste) {\n        //无法进行undo\n        controller.run('operation', {\n          ...props,\n          opType: OpType.SET_TOPIC_BLOCK_CONTENT,\n          data\n        });\n        setTimeout(() => {\n          debounce = false;\n        }, 2000);\n      } else {\n        controller.run('operation', {\n          ...props,\n          opType: OpType.SET_TOPIC_BLOCK,\n          blockType: BlockType.CONTENT,\n          data\n        });\n        debounce = true;\n      }\n    }\n    _isPaste = false;\n  };\n\n  const innerEditorDivRef = props.innerEditorDivRef || useRef<HTMLElement>();\n\n  const handleKeyDown = e => {\n    return _handleKeyDown(e);\n  };\n\n  const handleOnPaste = e => {\n    log('handleOnPaste');\n    // e.preventDefault();\n    const pasteType = controller.run('getPasteType', props);\n    const bmind = e.clipboardData.getData('text/bmind');\n    if (bmind) {\n      const json = JSON.parse(bmind);\n      log(json);\n      controller.run('pasteFromJson', { ...props, json });\n    }\n    // else if (pasteType === 'PASTE_WITH_STYLE') {\n    //   console.log('PASTE_WITH_STYLE');\n    //   const html = e.clipboardData.getData('text/html');\n    //   setTimeout(() => {\n    //     _isPaste = true;\n    //     document.execCommand('insertHTML', false, html);\n    //   });\n    // }\n    else {\n      const html = e.clipboardData.getData('text/html');\n      const text = e.clipboardData.getData('text/plain');\n      log({ text, html });\n      // 无法递归执行document.execCommand\n      // _isPaste = true;\n      // //@ts-ignore\n      _isPaste = true;\n      if (isUrl(text)) {\n        e.preventDefault();\n        document.execCommand(\n          'insertHtml',\n          false,\n          `<a href=${text}>${text}</a>`\n        );\n      }\n    }\n\n    controller.run('setPasteType', { pasteType: null });\n  };\n\n  const editProps = {\n    className: cx('bm-content-editable', className),\n    handleKeyDown,\n    handleOnInput,\n    handleOnPaste,\n    html: content,\n    disabled: readOnly,\n    focus: model.focusKey === topicKey,\n    placeholder: 'new topic',\n    innerRef: innerEditorDivRef,\n    // onChange: v => {\n    //   setEditorState(v);\n    // }\n    onChange\n  };\n\n  log(\n    'render',\n    topicKey\n    // innerEditorDivRef.current\n  );\n  return <ContentEditable {...editProps} />;\n}\n","import { BlockType } from '@blink-mind/core';\nimport htmlToText from 'html-to-text';\nimport React from 'react';\nimport { TopicContentEditor } from './topic-content-editor';\n\nexport function TopicContentEditorPlugin() {\n  return {\n    getTopicTitle(ctx) {\n      const {\n        topicKey,\n        maxLength,\n        usePlainText = true,\n        sheetId,\n        docModel\n      } = ctx;\n      const model = sheetId ? docModel.getSheetModel(sheetId) : ctx.model;\n      const topic = model.getTopic(topicKey);\n      const block = topic.getBlock(BlockType.CONTENT).block;\n      let text = usePlainText\n        ? htmlToText.fromString(block.data, { preserveNewlines: true })\n        : block.data;\n      if (maxLength != null) {\n        text =\n          text.length > maxLength ? text.substr(0, maxLength) + '...' : text;\n      }\n      return text;\n    },\n\n    renderTopicContentEditor(props) {\n      return <TopicContentEditor {...props} />;\n    },\n\n    serializeBlockData(props, next) {\n      const { block } = props;\n      if (block.type === BlockType.CONTENT) {\n        return typeof block.data === 'string'\n          ? block.data\n          : block.data.getCurrentContent().getPlainText();\n      }\n      return next();\n    }\n  };\n}\n","import { DocModel, OpType, BlockType, FocusMode } from '@blink-mind/core';\nimport { Stack } from 'immutable';\n\nconst log = require('debug')('plugin:undo');\n\nexport function UndoPlugin() {\n  let undoStack = Stack<DocModel>();\n  let redoStack = Stack<DocModel>();\n  return {\n    //是否允许undo\n    getAllowUndo(ctx) {\n      const { controller, allowUndo = true } = ctx;\n      if (allowUndo === false) return false;\n      return controller.run('customizeAllowUndo', ctx);\n    },\n\n    customizeAllowUndo(ctx) {\n      const { docModel, opType } = ctx;\n      const model = docModel.currentSheetModel;\n      if (opType) {\n        switch (opType) {\n          // 这几种情况不加入undo 队列\n          case OpType.FOCUS_TOPIC:\n          case OpType.SET_FOCUS_MODE:\n          case OpType.START_EDITING_CONTENT:\n            return false;\n          case OpType.START_EDITING_DESC:\n            return !model.currentFocusTopic.getBlock(BlockType.DESC).block;\n          case OpType.SET_TOPIC_BLOCK_CONTENT:\n            return false;\n          default:\n            break;\n        }\n      }\n      if (model.focusMode === FocusMode.EDITING_DESC) return false;\n      return model.config.allowUndo;\n    },\n\n    getUndoRedoStack() {\n      return {\n        undoStack,\n        redoStack\n      };\n    },\n\n    setUndoStack(ctx) {\n      log('setUndoStack', ctx.undoStack);\n      undoStack = ctx.undoStack;\n    },\n\n    setRedoStack(ctx) {\n      log('setRedoStack', ctx.redoStack);\n      redoStack = ctx.redoStack;\n    },\n\n    canUndo(ctx) {\n      const { controller } = ctx;\n      const isOperationEnabled = controller.run('isOperationEnabled', ctx);\n      if (!isOperationEnabled) return false;\n      const { undoStack } = controller.run('getUndoRedoStack', ctx);\n      const allowUndo = controller.run('getAllowUndo', ctx);\n      return undoStack.size > 0 && allowUndo;\n    },\n\n    canRedo(ctx) {\n      const { controller } = ctx;\n      const isOperationEnabled = controller.run('isOperationEnabled', ctx);\n      if (!isOperationEnabled) return false;\n      const { redoStack } = controller.run('getUndoRedoStack', ctx);\n      const allowUndo = controller.run('getAllowUndo', ctx);\n      return redoStack.size > 0 && allowUndo;\n    },\n\n    undo(ctx) {\n      const { controller, docModel } = ctx;\n      if (!controller.run('getAllowUndo', ctx)) {\n        return;\n      }\n      const { undoStack, redoStack } = controller.run('getUndoRedoStack', ctx);\n      const newDocModel = undoStack.peek();\n      if (!newDocModel) return;\n      controller.run('setUndoStack', {\n        ...ctx,\n        undoStack: undoStack.shift()\n      });\n      controller.run('setRedoStack', {\n        ...ctx,\n        redoStack: redoStack.push(docModel)\n      });\n      log('undo', newDocModel.currentSheetModel.topics);\n      controller.change(newDocModel);\n    },\n\n    redo(ctx) {\n      const { controller, docModel } = ctx;\n      if (!controller.run('getAllowUndo', ctx)) {\n        return;\n      }\n      const { undoStack, redoStack } = controller.run('getUndoRedoStack', ctx);\n      const newDocModel = redoStack.peek();\n      if (!newDocModel) return;\n      controller.run('setUndoStack', {\n        ...ctx,\n        undoStack: undoStack.push(docModel)\n      });\n      controller.run('setRedoStack', {\n        ...ctx,\n        redoStack: redoStack.shift()\n      });\n      log('redo', newDocModel.currentSheetModel.topics);\n      controller.change(newDocModel);\n    }\n  };\n}\n","import { CreateModelPlugin } from './create-model';\nimport { EventPlugin } from './event';\nimport { GetValuePlugin } from './get-value';\nimport { HotKeyPlugin } from './hotkey';\nimport { I18nPlugin } from './i18n';\nimport { LayoutPlugin } from './layout';\nimport { OperationPlugin } from './operation';\nimport { OptmizationPlugin } from './optimization';\nimport { PlatformPlugin } from './platform';\nimport { ReactPlugin } from './react';\nimport { StylePlugin } from './style';\nimport { ThemePlugin } from './theme';\nimport { TopicContentEditorPlugin } from './topic-content-editor';\nimport { UndoPlugin } from './undo';\n\nexport function DefaultPlugin() {\n  return [\n    ReactPlugin(),\n    LayoutPlugin(),\n    OperationPlugin(),\n    UndoPlugin(),\n    StylePlugin(),\n    EventPlugin(),\n    HotKeyPlugin(),\n    GetValuePlugin(),\n    TopicContentEditorPlugin(),\n    CreateModelPlugin(),\n    ThemePlugin(),\n    PlatformPlugin(),\n    I18nPlugin(),\n    OptmizationPlugin()\n  ];\n}\n","import {\n  Controller,\n  DocModel,\n  FocusMode,\n  IDiagram,\n  IDiagramProps,\n  OnChangeFunction\n} from '@blink-mind/core';\nimport '@blink-mind/icons';\nimport { Hotkey, Hotkeys, HotkeysTarget } from '@blueprintjs/core';\nimport '@blueprintjs/core/lib/css/blueprint.css';\nimport '@blueprintjs/select/lib/css/blueprint-select.css';\nimport debug from 'debug';\nimport memoizeOne from 'memoize-one';\nimport * as React from 'react';\nimport { DefaultPlugin } from '../plugins';\nimport { HotKeysConfig } from '../types';\nimport './diagram.scss';\nconst log = debug('node:Diagram');\n\n// controller 可以为空\ninterface Props {\n  docModel: DocModel | null | undefined;\n  onChange?: OnChangeFunction;\n  controller?: Controller;\n  commands?: any;\n  plugins?: any;\n}\n@HotkeysTarget\nclass Diagram extends React.Component<Props> implements IDiagram {\n  controller: Controller;\n\n  public getDiagramProps(): IDiagramProps {\n    return this.controller.run('getDiagramProps');\n  }\n\n  renderHotkeys() {\n    const props = this.props;\n    const controller = props.controller || this.controller;\n    const model = controller.model;\n    log('renderHotkeys', model);\n    const hotKeys: HotKeysConfig = controller.run('customizeHotKeys', {\n      ...props,\n      controller\n    });\n    if (hotKeys === null) return null;\n    if (\n      !(\n        hotKeys.topicHotKeys instanceof Map &&\n        hotKeys.globalHotKeys instanceof Map\n      )\n    ) {\n      throw new TypeError('topicHotKeys and globalHotKeys must be a Map');\n    }\n    const children = [];\n    if (\n      model.focusMode === FocusMode.NORMAL ||\n      model.focusMode === FocusMode.SHOW_POPUP ||\n      model.focusMode === FocusMode.EDITING_CONTENT\n    ) {\n      hotKeys.topicHotKeys.forEach((v, k) => {\n        children.push(<Hotkey key={k} {...v} global />);\n      });\n\n      hotKeys.viewModeTopicHotKeys.has(model.config.viewMode) &&\n        hotKeys.viewModeTopicHotKeys\n          .get(model.config.viewMode)\n          .forEach((v, k) => {\n            children.push(<Hotkey key={k} {...v} global />);\n          });\n    }\n    hotKeys.globalHotKeys.forEach((v, k) => {\n      children.push(<Hotkey key={k} {...v} global />);\n    });\n    return <Hotkeys>{children}</Hotkeys>;\n  }\n\n  public openNewDocModel(newModel: DocModel) {\n    const props = this.getDiagramProps();\n    const { controller } = props;\n    controller.run('openNewDocModel', {\n      ...props,\n      newModel\n    });\n  }\n\n  private diagramProps: IDiagramProps;\n\n  private resolveController = memoizeOne((plugins = [], TheDefaultPlugin) => {\n    const defaultPlugin = TheDefaultPlugin();\n    this.controller = new Controller({\n      plugins: [plugins, defaultPlugin],\n      onChange: this.props.onChange\n    });\n  });\n\n  render() {\n    const { plugins, controller } = this.props;\n    if (controller) this.controller = controller;\n    else this.resolveController(plugins, DefaultPlugin);\n    let { docModel } = this.props;\n    if (!docModel) {\n      docModel = this.controller.run('createNewDocModel', {\n        controller: this.controller\n      });\n    }\n    this.diagramProps = {\n      ...this.props,\n      docModel,\n      controller: this.controller\n    };\n    return this.controller.run('renderDiagram', this.diagramProps);\n  }\n}\n\nexport { Diagram };\n"],"names":["React.Component","styled","React.createElement","log","Colors","colorString.get","colorString.to","Checkbox","createGlobalStyle","Popover","SketchPicker","Button","NumericInput","InputGroup","Select","MenuItem","useState","Dialog","Classes","AnchorButton","addEventListener","BpAlert","React","DiagramLayoutType","OpType","Menu","DocModel","List","SheetModel","FocusMode","op","BlockType","ViewModeMindMap","getRelationship","TopicRelationship","DocModelModifier","React.PureComponent","Title","Divider","ContextMenuTarget","Tabs","SettingItemSelect","SettingItemSelectC","borderWidthItems","cloneDeep","merge","Tab","isThemeType","Tooltip","Position","ThemeProvider","React.Fragment","Icon","IconNames","TabPanel","TabList","PopoverPosition","Breadcrumb","Breadcrumbs","TopicDirection","css","useRef","useEffect","Key","createKey","isAllSibiling","Drawer","TopicVisualLevel","isEqual","isUrl","Stack","Diagram","Controller","Hotkey","Hotkeys","HotkeysTarget"],"mappings":"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"}